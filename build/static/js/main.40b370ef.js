/*! For license information please see main.40b370ef.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+S(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+S(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+S(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},j={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:j,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,j(x);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(N),N=-1),f=!0;var s=p;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),l=!1}return l}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,E=null,N=-1,T=5,S=-1;function I(){return!(t.unstable_now()-S<T)}function P(){if(null!==E){var e=t.unstable_now();S=e;var n=!0;try{n=E(!0,e)}finally{n?k():(C=!1,E=null)}}else C=!1}if("function"===typeof w)k=function(){w(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=P,k=function(){A.postMessage(null)}}else k=function(){y(P,0)};function j(e){E=e,C||(C=!0,k())}function D(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,j(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(N),N=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,j(x))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var O,M=Object.assign;function U(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case E:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){X(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ce=null;function Ee(e){if(e=wi(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),xe(e.stateNode,e.type,t))}}function Ne(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Te(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Se(e,t){return e(t)}function Ie(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Se(e,t,n)}finally{Pe=!1,(null!==ke||null!==Ce)&&(Ie(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var je=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){je=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){je=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Oe=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Oe=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,kt,Ct,Et,Nt=!1,Tt=[],St=null,It=null,Pt=null,Rt=new Map,At=new Map,jt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Ot(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Nt=!1,null!==St&&Ut(St)&&(St=null),null!==It&&Ut(It)&&(It=null),null!==Pt&&Ut(Pt)&&(Pt=null),Rt.forEach(Ft),At.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&zt(St,e),null!==It&&zt(It,e),null!==Pt&&zt(Pt,e),Rt.forEach(t),At.forEach(t),n=0;n<jt.length;n++)(r=jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)Mt(n),null===n.blockedOn&&jt.shift()}var qt=b.ReactCurrentBatchConfig,$t=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){if($t){var i=Qt(e,t,n,r);if(null===i)$r(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return St=Ot(St,e,t,n,r,i),!0;case"dragenter":return It=Ot(It,e,t,n,r,i),!0;case"mouseover":return Pt=Ot(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Ot(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Ot(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Qt(e,t,n,r))&&$r(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),pn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),mn=sn(M({},pn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(M({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Cn}var Nn=M({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Nn),Sn=sn(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Rn),jn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var On=u&&"TextEvent"in window&&!Ln,Mn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},kr={},Cr={};function Er(e){if(kr[e])return kr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return kr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Nr=Er("animationend"),Tr=Er("animationiteration"),Sr=Er("animationstart"),Ir=Er("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Pr.set(e,t),l(t,[e])}for(var jr=0;jr<Rr.length;jr++){var Dr=Rr[jr];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Nr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Sr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Me;Oe=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=s,i=_e(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Nr:case Tr:case Sr:l=yn;break;case Ir:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Ae(f,d))&&u.push(Wr(f,m,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Sn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:bi(l),p=null==c?a:bi(c),(a=new u(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,vi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Kr(p))f++;for(p=0,m=d;m;m=Kr(m))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)d=Kr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==h&&Gr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if($n(a))if(Xn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Ae(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ae(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Ae(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[pi]||null}var xi=[],ki=-1;function Ci(e){return{current:e}}function Ei(e){0>ki||(e.current=xi[ki],xi[ki]=null,ki--)}function Ni(e,t){ki++,xi[ki]=e.current,e.current=t}var Ti={},Si=Ci(Ti),Ii=Ci(!1),Pi=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ji(){Ei(Ii),Ei(Si)}function Di(e,t,n){if(Si.current!==Ti)throw Error(s(168));Ni(Si,t),Ni(Ii,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Si.current,Ni(Si,e),Ni(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ii),Ei(Si),Ni(Si,e)):Ei(Ii),Ni(Ii,n)}var Ui=null,Fi=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],$i=0,Wi=null,Hi=0,Ki=[],Gi=0,Qi=null,Yi=1,Xi="";function Ji(e,t){qi[$i++]=Hi,qi[$i++]=Wi,Wi=e,Hi=t}function Zi(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--$i],qi[$i]=null,Hi=qi[--$i],qi[$i]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Xi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case A:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Ji(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=f(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),is&&Ji(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=p(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),is&&Ji(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Oc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(o,r.mode,l)).return=r,r=s}return a(r);case A:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),xs=Ci(null),ks=null,Cs=null,Es=null;function Ns(){Es=Cs=ks=null}function Ts(e){var t=xs.current;Ei(xs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){ks=e,Es=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===ks)throw Error(s(308));Cs=e,ks.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Rs=null;function As(e){null===Rs?Rs=[e]:Rs.push(e)}function js(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,As(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,As(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=M({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ul|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var $s={},Ws=Ci($s),Hs=Ci($s),Ks=Ci($s);function Gs(e){if(e===$s)throw Error(s(174));return e}function Qs(e,t){switch(Ni(Ks,t),Ni(Hs,e),Ni(Ws,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ws),Ni(Ws,t)}function Ys(){Ei(Ws),Ei(Hs),Ei(Ks)}function Xs(e){Gs(Ks.current);var t=Gs(Ws.current),n=le(t,e.type);t!==n&&(Ni(Hs,e),Ni(Ws,n))}function Js(e){Hs.current===e&&(Ei(Ws),Ei(Hs))}var Zs=Ci(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,po=0;function fo(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?ea:ta,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=na,e=n(r,i)}while(uo)}if(ro.current=Zo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ul|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ul|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function Co(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Oo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,No.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(s(349));0!==(30&so)||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,So(t)&&Io(e)}function To(e,t,n){return n(function(){So(t)&&Io(e)})}function So(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Io(e){var t=Ds(e,1);null!==t&&ic(t,e,1,-1)}function Po(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ao(){return wo().memoizedState}function jo(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function Lo(e,t){return jo(8390656,8,e,t)}function Oo(e,t){return Do(2048,8,e,t)}function Mo(e,t){return Do(4,2,e,t)}function Uo(e,t){return Do(4,4,e,t)}function Fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Fo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ul|=n,e.baseState=!0),t)}function Ho(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Ko(){return wo().memoizedState}function Go(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(t,n);else if(null!==(n=js(e,t,n,r))){ic(n,e,r,nc()),Jo(n,t,r)}}function Qo(e,t,n){var r=rc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,As(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=js(e,t,i,r))&&(ic(n,e,r,i=nc()),Jo(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Ps,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},ea={readContext:Ps,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Po,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rl)throw Error(s(349));0!==(30&so)||Eo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(To.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Rl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:Ps,useCallback:Bo,useContext:Ps,useEffect:Oo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Uo,useMemo:qo,useReducer:_o,useRef:Ao,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){return $o(wo(),ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Co,useId:Ko,unstable_isNewReconciler:!1},na={readContext:Ps,useCallback:Bo,useContext:Ps,useEffect:Oo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Uo,useMemo:qo,useReducer:xo,useRef:Ao,useState:function(){return xo(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:$o(t,ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Co,useId:Ko,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(ic(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(ic(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(ic(t,e,r,n),Vs(t,e,r))}};function oa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function aa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Ai(t)?Pi:Si.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function la(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Os(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Ai(t)?Pi:Si.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sa.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,t)},n}function ma(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Lc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Sa(e,t,n,r,i)}function Na(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Ll,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Ll,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ni(Ll,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ni(Ll,Dl),Dl|=r;return _a(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sa(e,t,n,r,i){var s=Ai(n)?Pi:Si.current;return s=Ri(t,s),Is(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(Ai(n)){var s=!0;Oi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Wa(e,t),aa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Ri(t,c=Ai(n)?Pi:Si.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&la(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ii.current||Ls?("function"===typeof u&&(ia(t,n,u,r),l=t.memoizedState),(a=Ls||oa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ms(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Ri(t,l=Ai(n)?Pi:Si.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&la(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var f=t.memoizedState;a!==h||d!==f||Ii.current||Ls?("function"===typeof p&&(ia(t,n,p,r),f=t.memoizedState),(c=Ls||oa(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,s,i)}function Pa(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ha(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Qs(e,t.containerInfo)}function Aa(e,t,n,r,i){return ps(),fs(i),t.flags|=256,_a(e,t,n,r),t.child}var ja,Da,La,Oa,Ma={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ni(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Uc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=Ma,e):Va(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Rl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),ic(r,e,i,-1))}return yc(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Lc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&fs(r),bs(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function qa(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $a(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qa(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qa(t,!0,n,null,s);break;case"together":qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ai(t.type)&&ji(),Ga(t),null;case 3:return r=t.stateNode,Ys(),Ei(Ii),Ei(Si),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(lc(ss),ss=null))),Da(e,t),Ga(t),null;case 5:Js(t);var i=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=Gs(Ws.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,ja(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ks.current),Gs(Ws.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(lc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):yc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Ys(),Da(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Ts(t.type._context),Ga(t),null;case 19:if(Ei(Zs),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>$l&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Xe()-o.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Ni(Zs,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Ai(t.type)&&ji(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ei(Ii),Ei(Si),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return Ys(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Ws.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Ja=!1,Za="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var rl=!1;function il(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&nl(t,n,s)}i=i.next}while(i!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var dl=null,pl=!1;function fl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||tl(n,t);case 6:var r=dl,i=pl;dl=null,fl(e,t,n),pl=i,null!==(dl=r)&&(pl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(pl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=pl,dl=n.stateNode.containerInfo,pl=!0,fl(e,t,n),dl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&nl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach(function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,pl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(o,a,i),dl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Nc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),wl(e),4&r){try{il(3,e,e.return),sl(3,e)}catch(g){Nc(e,e.return,g)}try{il(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:yl(t,e),wl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),wl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Nc(e,e.return,g)}}break;case 6:if(yl(t,e),wl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Nc(e,e.return,g)}}break;case 3:if(yl(t,e),wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:yl(t,e),wl(e);break;case 13:yl(t,e),wl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(ql=Xe())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,yl(t,e),Ja=u):yl(t,e),wl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(el=e,h=e.child;null!==h;){for(d=el=h;null!==el;){switch(f=(p=el).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:tl(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:tl(p,p.return);break;case 22:if(null!==p.memoizedState){kl(d);continue}}null!==f?(f.return=p,el=f):kl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Nc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yl(t,e),wl(e),4&r&&gl(e);case 21:}}function wl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),hl(e,cl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,cl(e),o);break;default:throw Error(s(161))}}catch(Ca){Nc(e,e.return,Ca)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){el=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var i=el,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Xa;var c=Ja;if(Xa=o,(Ja=l)&&!c)for(el=i;null!==el;)l=(o=el).child,22===o.tag&&null!==o.memoizedState?Cl(i):null!==l?(l.return=o,el=l):Cl(i);for(;null!==s;)el=s,_l(s,t,n),s=s.sibling;el=i,Xa=a,Ja=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,el=s):xl(e)}}function xl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ra(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&ol(t)}catch(p){Nc(t,t.return,p)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function kl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function Cl(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(Ca){Nc(t,n,Ca)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Ca){Nc(t,i,Ca)}}var s=t.return;try{ol(t)}catch(Ca){Nc(t,s,Ca)}break;case 5:var o=t.return;try{ol(t)}catch(Ca){Nc(t,o,Ca)}}}catch(Ca){Nc(t,t.return,Ca)}if(t===e){el=null;break}var a=t.sibling;if(null!==a){a.return=t.return,el=a;break}el=t.return}}var El,Nl=Math.ceil,Tl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,Pl=0,Rl=null,Al=null,jl=0,Dl=0,Ll=Ci(0),Ol=0,Ml=null,Ul=0,Fl=0,Vl=0,zl=null,Bl=null,ql=0,$l=1/0,Wl=null,Hl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,Xl=0,Jl=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&Pl)?Xe():-1!==ec?ec:ec=Xe()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==jl?jl&-jl:null!==ms.transition?(0===tc&&(tc=mt()),tc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ic(e,t,n,r){if(50<Jl)throw Jl=0,Zl=null,Error(s(185));yt(e,n,r),0!==(2&Pl)&&e===Rl||(e===Rl&&(0===(2&Pl)&&(Fl|=n),4===Ol&&cc(e,jl)),sc(e,r),1===n&&0===Pl&&0===(1&t.mode)&&($l=Xe()+500,Fi&&Bi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Rl?jl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(uc.bind(null,e)):zi(uc.bind(null,e)),oi(function(){0===(6&Pl)&&Bi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(ec=-1,tc=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=dt(e,e===Rl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Pl;Pl|=2;var o=gc();for(Rl===e&&jl===t||(Wl=null,$l=Xe()+500,fc(e,t));;)try{bc();break}catch(l){mc(e,l)}Ns(),Tl.current=o,Pl=i,null!==Al?t=0:(Rl=null,jl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ml,fc(e,0),cc(e,r),sc(e,Xe()),n;if(6===t)cc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=ft(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ml,fc(e,0),cc(e,r),sc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:kc(e,Bl,Wl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=ql+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kc.bind(null,e,Bl,Wl),t);break}kc(e,Bl,Wl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ri(kc.bind(null,e,Bl,Wl),r);break}kc(e,Bl,Wl);break;default:throw Error(s(329))}}}return sc(e,Xe()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&lc(t)),e}function lc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function cc(e,t){for(t&=~Vl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Pl))throw Error(s(327));Cc();var t=dt(e,0);if(0===(1&t))return sc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ml,fc(e,0),cc(e,t),sc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Bl,Wl),sc(e,Xe()),null}function hc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&($l=Xe()+500,Fi&&Bi())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Pl)&&Cc();var t=Pl;Pl|=1;var n=Il.transition,r=wt;try{if(Il.transition=null,wt=1,e)return e()}finally{wt=r,Il.transition=n,0===(6&(Pl=t))&&Bi()}}function pc(){Dl=Ll.current,Ei(Ll)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:Ys(),Ei(Ii),Ei(Si),no();break;case 5:Js(r);break;case 4:Ys();break;case 13:case 19:Ei(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Rl=e,Al=e=Lc(e.current,null),jl=Dl=t,Ol=0,Ml=null,Vl=Fl=Ul=0,Bl=zl=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function mc(e,t){for(;;){var n=Al;try{if(Ns(),ro.current=Zo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Sl.current=null,null===n||null===n.return){Ol=1,Ml=t,Al=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ga(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),yc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),fs(ua(c,l));break e}}o=c=ua(c,l),4!==Ol&&(Ol=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gl||!Gl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function gc(){var e=Tl.current;return Tl.current=Zo,null===e?Zo:e}function yc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Rl||0===(268435455&Ul)&&0===(268435455&Fl)||cc(Rl,jl)}function vc(e,t){var n=Pl;Pl|=2;var r=gc();for(Rl===e&&jl===t||(Wl=null,fc(e,t));;)try{wc();break}catch(i){mc(e,i)}if(Ns(),Pl=n,Tl.current=r,null!==Al)throw Error(s(261));return Rl=null,jl=0,Ol}function wc(){for(;null!==Al;)_c(Al)}function bc(){for(;null!==Al&&!Qe();)_c(Al)}function _c(e){var t=El(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?xc(e):Al=t,Sl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Al=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function kc(e,t,n){var r=wt,i=Il.transition;try{Il.transition=null,wt=1,function(e,t,n,r){do{Cc()}while(null!==Yl);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Rl&&(Al=Rl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Rc(tt,function(){return Cc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=wt;wt=1;var l=Pl;Pl|=4,Sl.current=null,function(e,t){if(ei=$t,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Wo){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=a),p===o&&++h===r&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ra(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(Wo){Nc(t,t.return,Wo)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}m=rl,rl=!1}(e,n),vl(n,e),fr(ti),$t=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Ye(),Pl=l,wt=a,Il.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Xl)&&0!==e.tag&&Cc(),o=e.pendingLanes,0!==(1&o)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,Bi()}(e,t,n,r)}finally{Il.transition=i,wt=r}return null}function Cc(){if(null!==Yl){var e=bt(Xl),t=Il.transition,n=wt;try{if(Il.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Pl))throw Error(s(331));var i=Pl;for(Pl|=4,el=e.current;null!==el;){var o=el,a=o.child;if(0!==(16&el.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var h=el;switch(h.tag){case 0:case 11:case 15:il(8,h,o)}var d=h.child;if(null!==d)d.return=h,el=d;else for(;null!==el;){var p=(h=el).sibling,f=h.return;if(al(h),h===u){el=null;break}if(null!==p){p.return=f,el=p;break}el=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}el=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,el=a;else e:for(;null!==el;){if(0!==(2048&(o=el).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,el=v;break e}el=o.return}}var w=e.current;for(el=w;null!==el;){var b=(a=el).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,el=b;else e:for(a=w;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(x){Nc(l,l.return,x)}if(l===a){el=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,el=_;break e}el=l.return}}if(Pl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{wt=n,Il.transition=t}}return!1}function Ec(e,t,n){e=Fs(e,t=fa(0,t=ua(n,t),1),1),t=nc(),null!==e&&(yt(e,1,t),sc(e,t))}function Nc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Fs(t,e=ma(t,e=ua(n,e),1),1),e=nc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(jl&n)===n&&(4===Ol||3===Ol&&(130023424&jl)===jl&&500>Xe()-ql?fc(e,0):Vl|=n),sc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Ds(e,t))&&(yt(e,t,n),sc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,n)}function Rc(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Mc(n.children,i,o,t);case C:a=8,i|=8;break;case E:return(e=jc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case I:return(e=jc(13,n,t,i)).elementType=I,e.lanes=o,e;case P:return(e=jc(19,n,t,i)).elementType=P,e.lanes=o,e;case j:return Uc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case T:a=9;break e;case S:a=11;break e;case R:a=14;break e;case A:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),e}function qc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function $c(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=qc(null),n=e.current,(s=Us(r=nc(),i=rc(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,i),e.current.lanes=i,yt(e,i,r),sc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=nc(),o=rc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,o))&&(ic(e,i,o,s),Vs(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),ps();break;case 5:Xs(t);break;case 1:Ai(t.type)&&Oi(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ni(Zs,1&Zs.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ni(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $a(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Na(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Ri(t,Si.current);Is(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Os(t),i.updater=sa,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=Pa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===R)return 14}return 2}(r),e=ra(r,e),i){case 0:t=Sa(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,ra(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ms(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ha(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ni(xs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ii.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ps(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=ra(r=t.type,t.pendingProps),ka(e,t,r,i=ra(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ra(r,i),Wa(e,t),t.tag=1,Ai(r)?(e=!0,Oi(t)):e=!1,Is(t,n),aa(t,r,i),ca(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return $a(e,t,n);case 22:return Na(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=$c(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=o,e[fi]=o.current,Br(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[fi]=l.current,Br(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[fi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Xe()),0===(6&Pl)&&($l=Xe()+500,Bi()))}break;case 13:dc(function(){var t=Ds(e,1);if(null!==t){var n=nc();ic(t,e,1,n)}}),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)ic(t,e,134217728,nc());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=rc(e),n=Ds(e,t);if(null!==n)ic(n,e,t,nc());Gc(e,t)}},Ct=function(){return wt},Et=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=hc,Ie=dc;var nu={usingClientEntryPoint:!1,Events:[wi,bi,_i,Ne,Te,hc]},ru={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{it=su.inject(iu),st=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,i,0,o,a),e[fi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),s=n.t(i,2),o=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,p=s.history,f=r.Pop,m=null,g=y();function y(){return(p.state||{idx:null}).idx}function v(){f=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:f,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:d(e);return c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(a({},p.state,{idx:g}),""));let b={get action(){return f},get location(){return e(s,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,v),m=e,()=>{s.removeEventListener(l,v),m=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=r.Push;let i=h(b.location,e,t);n&&n(i,e),g=y()+1;let a=u(i,g),l=b.createHref(i);try{p.pushState(a,"",l)}catch(dv){s.location.assign(l)}o&&m&&m({action:f,location:b.location,delta:1})},replace:function(e,t){f=r.Replace;let i=h(b.location,e,t);n&&n(i,e),g=y();let s=u(i,g),a=b.createHref(i);p.replaceState(s,"",a),o&&m&&m({action:f,location:b.location,delta:0})},go:e=>p.go(e)};return b}var m;function g(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=T(i[o],I(r));return s}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=L([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))i(e,t,r);else i(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=v(r.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));const w=/^:\w+$/,b=3,_=2,x=1,k=10,C=-2,E=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=C),t&&(r+=_),n.filter(e=>!E(e)).reduce((e,t)=>e+(w.test(t)?b:""===t?x:k),r)}function T(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=S({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:L([i,c.pathname]),pathnameBase:O(L([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=L([i,c.pathnameBase]))}return s}function S(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);R("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(e,t)=>(r.push(t),"/([^\\/]+)"));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce((e,t,n)=>{if("*"===t){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(dv){return R(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+dv+")."),e}}(a[n]||"",t),e},{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function I(e){try{return decodeURI(e)}catch(dv){return R(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+dv+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),A("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),A("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),A("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(r||null==l)s=n;else{let e=t.length-1;if(l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:M(r),hash:U(i)}}(i,s),h=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const L=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],z=(new Set(V),["get",...V]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const q="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},{useState:$,useEffect:W,useLayoutEffect:H,useDebugValue:K}=s;function G(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!q(n,e)}catch(dv){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,s.useSyncExternalStore;const Q=i.createContext(null);const Y=i.createContext(null);const X=i.createContext(null);const J=i.createContext(null);const Z=i.createContext({outlet:null,matches:[]});const ee=i.createContext(null);function te(){return null!=i.useContext(J)}function ne(){return te()||c(!1),i.useContext(J).location}function re(){te()||c(!1);let{basename:e,navigator:t}=i.useContext(X),{matches:n}=i.useContext(Z),{pathname:r}=ne(),s=JSON.stringify(j(n).map(e=>e.pathnameBase)),o=i.useRef(!1);return i.useEffect(()=>{o.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!o.current)return;if("number"===typeof n)return void t.go(n);let a=D(n,JSON.parse(s),r,"path"===i.relative);"/"!==e&&(a.pathname="/"===a.pathname?e:L([e,a.pathname])),(i.replace?t.replace:t.push)(a,i.state,i)},[e,t,s,r])}function ie(){let{matches:e}=i.useContext(Z),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:n}=void 0===t?{}:t,{matches:r}=i.useContext(Z),{pathname:s}=ne(),o=JSON.stringify(j(r).map(e=>e.pathnameBase));return i.useMemo(()=>D(e,JSON.parse(o),s,"path"===n),[e,o,s,n])}function oe(){let e=function(){var e;let t=i.useContext(ee),n=de(he.UseRouteError),r=pe(he.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}class ae extends i.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?i.createElement(Z.Provider,{value:this.props.routeContext},i.createElement(ee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(Q);return s&&s.static&&s.staticContext&&n.route.errorElement&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Z.Provider,{value:t},r)}function ce(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}let r=e,s=null==n?void 0:n.errors;if(null!=s){let e=r.findIndex(e=>e.route.id&&(null==s?void 0:s[e.route.id]));e>=0||c(!1),r=r.slice(0,Math.min(r.length,e+1))}return r.reduceRight((e,o,a)=>{let l=o.route.id?null==s?void 0:s[o.route.id]:null,c=n?o.route.errorElement||i.createElement(oe,null):null,u=t.concat(r.slice(0,a+1)),h=()=>i.createElement(le,{match:o,routeContext:{outlet:e,matches:u}},l?c:void 0!==o.route.element?o.route.element:e);return n&&(o.route.errorElement||0===a)?i.createElement(ae,{location:n.location,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u}}):h()},null)}var ue,he;function de(e){let t=i.useContext(Y);return t||c(!1),t}function pe(e){let t=function(){let e=i.useContext(Z);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(ue||(ue={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(he||(he={}));function fe(e){c(!1)}function me(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:l=!1}=e;te()&&c(!1);let u=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:u,navigator:a,static:l}),[u,a,l]);"string"===typeof s&&(s=p(s));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:y="default"}=s,v=i.useMemo(()=>{let e=P(d,u);return null==e?null:{pathname:e,search:f,hash:m,state:g,key:y}},[u,d,f,m,g,y]);return null==v?null:i.createElement(X.Provider,{value:h},i.createElement(J.Provider,{children:n,value:{location:v,navigationType:o}}))}function ge(e){let{children:t,location:n}=e,s=i.useContext(Q);return function(e,t){te()||c(!1);let{navigator:n}=i.useContext(X),s=i.useContext(Y),{matches:o}=i.useContext(Z),a=o[o.length-1],l=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let h,d=ne();if(t){var f;let e="string"===typeof t?p(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||c(!1),h=e}else h=d;let m=h.pathname||"/",y=g(e,{pathname:"/"===u?m:m.slice(u.length)||"/"}),v=ce(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:L([u,n.encodeLocation?n.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:L([u,n.encodeLocation?n.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s||void 0);return t&&v?i.createElement(J.Provider,{value:{location:B({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},v):v}(s&&!t?s.router.routes:ve(t),n)}var ye;!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ye||(ye={}));new Promise(()=>{});i.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;if(e.type===i.Fragment)return void n.push.apply(n,ve(e.props.children,t));e.type!==fe&&c(!1),e.props.index&&e.props.children&&c(!1);let s=[...t,r],o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)}),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _e(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}const xe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function ke(e){let{basename:t,children:n,window:r}=e,s=i.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:r,v5Compat:!0})&&(o={}),f(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:d(t)},null,o)));let a=s.current,[l,c]=i.useState({action:a.action,location:a.location});return i.useLayoutEffect(()=>a.listen(c),[a]),i.createElement(me,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=i.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:u,to:h,preventScrollReset:p}=e,f=be(e,xe),m=!1;if(Ce&&"string"===typeof h&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(h)){n=h;let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h);t.origin===e.origin?h=t.pathname+t.search+t.hash:m=!0}let g=function(e,t){let{relative:n}=void 0===t?{}:t;te()||c(!1);let{basename:r,navigator:s}=i.useContext(X),{hash:o,pathname:a,search:l}=se(e,{relative:n}),u=a;return"/"!==r&&(u="/"===a?r:L([r,a])),s.createHref({pathname:u,search:l,hash:o})}(h,{relative:s}),y=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a}=void 0===t?{}:t,l=re(),c=ne(),u=se(e,{relative:a});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:d(c)===d(u);l(e,{replace:n,state:s,preventScrollReset:o,relative:a})}},[c,l,u,r,s,n,e,o,a])}(h,{replace:a,state:l,target:u,preventScrollReset:p,relative:s});return i.createElement("a",we({},f,{href:n||g,onClick:m||o?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:u}))});var Ne,Te;function Se(e){let t=i.useRef(_e(e)),n=i.useRef(!1),r=ne(),s=i.useMemo(()=>function(e,t){let n=_e(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)});return n}(r.search,n.current?null:t.current),[r.search]),o=re(),a=i.useCallback((e,t)=>{const r=_e("function"===typeof e?e(s):e);n.current=!0,o("?"+r,t)},[o,s]);return[s,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ne||(Ne={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));const Ie=!1,Pe=!1,Re="${JSCORE_VERSION}",Ae=function(e,t){if(!e)throw je(t)},je=function(e){return new Error("Firebase Database ("+Re+") INTERNAL ASSERT FAILED: "+e)},De=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(De(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Oe;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(e){const t=De(e);return Le.encodeByteArray(t,!0)},Ue=function(e){return Me(e).replace(/\./g,"")},Fe=function(e){try{return Le.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ve(e){return ze(void 0,e)}function ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Be(n)&&(e[n]=ze(e[n],t[n]));return e}function Be(e){return"__proto__"!==e}function qe(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const $e=()=>{try{return qe().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Catcher",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Fe(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},We=e=>$e()?.emulatorHosts?.[e],He=e=>{const t=We(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ke=()=>$e()?.config,Ge=e=>$e()?.[`_${e}`];class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ye(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xe(e){return(await fetch(e,{credentials:"include"})).ok}function Je(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(s)),""].join(".")}const Ze={};let et=!1;function tt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ye(window.location.host)||Ze[e]===t||Ze[e]||et)return;function n(e){return`__firebase__banner__${e}`}Ze[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ze))Ze[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{et=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function nt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function rt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function it(){const e=$e()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function st(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ot(){return!0===Ie||!0===Pe}function at(){return!it()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lt(){try{return"object"===typeof indexedDB}catch(e){return!1}}class ct extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ut.prototype.create)}}class ut{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(ht,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new ct(n,s,t)}}const ht=/\{\$([^}]+)}/g;function dt(e){return JSON.parse(e)}function pt(e){return JSON.stringify(e)}const ft=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=dt(Fe(s[0])||""),n=dt(Fe(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function yt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function wt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(bt(n)&&bt(s)){if(!wt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bt(e){return null!==e&&"object"===typeof e}function _t(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function xt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function kt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ct{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Et{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Nt),void 0===r.error&&(r.error=Nt),void 0===r.complete&&(r.complete=Nt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}function Tt(e,t){return`${e} failed: ${t} argument `}const St=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function It(e){return e&&e._delegate?e._delegate:e}class Pt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rt="[DEFAULT]";class At{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Qe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rt})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Rt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.component?this.component.multipleInstances?e:Rt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class jt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new At(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Dt=[];var Lt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Lt||(Lt={}));const Ot={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},Mt=Lt.INFO,Ut={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},Ft=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ut[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Vt{constructor(e){this.name=e,this._logLevel=Mt,this._logHandler=Ft,this._userLogHandler=null,Dt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ot[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}let zt,Bt;const qt=new WeakMap,$t=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,Kt=new WeakMap;let Gt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Wt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Qt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Jt(this),n),Xt(qt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xt(e.apply(Jt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Jt(this),t,...r);return Wt.set(s,t.sort?t.sort():[t]),Xt(s)}}function Yt(e){return"function"===typeof e?Qt(e):(e instanceof IDBTransaction&&function(e){if($t.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});$t.set(e,t)}(e),t=e,(zt||(zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Gt):e);var t}function Xt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Xt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&qt.set(t,e)}).catch(()=>{}),Kt.set(t,e),t}(e);if(Ht.has(e))return Ht.get(e);const t=Yt(e);return t!==e&&(Ht.set(e,t),Kt.set(t,e)),t}const Jt=e=>Kt.get(e);const Zt=["get","getKey","getAll","getAllKeys","count"],en=["put","add","delete","clear"],tn=new Map;function nn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(tn.get(t))return tn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=en.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Zt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return tn.set(t,s),s}Gt=(e=>({...e,get:(t,n,r)=>nn(t,n)||e.get(t,n,r),has:(t,n)=>!!nn(t,n)||e.has(t,n)}))(Gt);class rn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const sn="@firebase/app",on="0.14.0",an=new Vt("@firebase/app"),ln="@firebase/app-compat",cn="@firebase/analytics-compat",un="@firebase/analytics",hn="@firebase/app-check-compat",dn="@firebase/app-check",pn="@firebase/auth",fn="@firebase/auth-compat",mn="@firebase/database",gn="@firebase/data-connect",yn="@firebase/database-compat",vn="@firebase/functions",wn="@firebase/functions-compat",bn="@firebase/installations",_n="@firebase/installations-compat",xn="@firebase/messaging",kn="@firebase/messaging-compat",Cn="@firebase/performance",En="@firebase/performance-compat",Nn="@firebase/remote-config",Tn="@firebase/remote-config-compat",Sn="@firebase/storage",In="@firebase/storage-compat",Pn="@firebase/firestore",Rn="@firebase/ai",An="@firebase/firestore-compat",jn="firebase",Dn="[DEFAULT]",Ln={[sn]:"fire-core",[ln]:"fire-core-compat",[un]:"fire-analytics",[cn]:"fire-analytics-compat",[dn]:"fire-app-check",[hn]:"fire-app-check-compat",[pn]:"fire-auth",[fn]:"fire-auth-compat",[mn]:"fire-rtdb",[gn]:"fire-data-connect",[yn]:"fire-rtdb-compat",[vn]:"fire-fn",[wn]:"fire-fn-compat",[bn]:"fire-iid",[_n]:"fire-iid-compat",[xn]:"fire-fcm",[kn]:"fire-fcm-compat",[Cn]:"fire-perf",[En]:"fire-perf-compat",[Nn]:"fire-rc",[Tn]:"fire-rc-compat",[Sn]:"fire-gcs",[In]:"fire-gcs-compat",[Pn]:"fire-fst",[An]:"fire-fst-compat",[Rn]:"fire-vertex","fire-js":"fire-js",[jn]:"fire-js-all"},On=new Map,Mn=new Map,Un=new Map;function Fn(e,t){try{e.container.addComponent(t)}catch(n){an.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Vn(e){const t=e.name;if(Un.has(t))return an.debug(`There were multiple attempts to register component ${t}.`),!1;Un.set(t,e);for(const n of On.values())Fn(n,e);for(const n of Mn.values())Fn(n,e);return!0}function zn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Bn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const qn=new ut("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $n{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}const Wn="12.0.0";function Hn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r={name:Dn,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!==typeof i||!i)throw qn.create("bad-app-name",{appName:String(i)});if(n||(n=Ke()),!n)throw qn.create("no-options");const s=On.get(i);if(s){if(wt(n,s.options)&&wt(r,s.config))return s;throw qn.create("duplicate-app",{appName:i})}const o=new jt(i);for(const l of Un.values())o.addComponent(l);const a=new $n(n,r,o);return On.set(i,a),a}function Kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;const t=On.get(e);if(!t&&e===Dn&&Ke())return Hn();if(!t)throw qn.create("no-app",{appName:e});return t}function Gn(e,t,n){let r=Ln[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void an.warn(e.join(" "))}Vn(new Pt(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Qn="firebase-heartbeat-store";let Yn=null;function Xn(){return Yn||(Yn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Xt(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Xt(o.result),e.oldVersion,e.newVersion,Xt(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Qn)}catch(n){console.warn(n)}}}).catch(e=>{throw qn.create("idb-open",{originalErrorMessage:e.message})})),Yn}async function Jn(e,t){try{const n=(await Xn()).transaction(Qn,"readwrite"),r=n.objectStore(Qn);await r.put(t,Zn(e)),await n.done}catch(n){if(n instanceof ct)an.warn(n.message);else{const e=qn.create("idb-set",{originalErrorMessage:n?.message});an.warn(e.message)}}}function Zn(e){return`${e.name}!${e.options.appId}`}class er{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=tr();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){an.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=tr(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),rr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Ue(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return an.warn(e),""}}}function tr(){return(new Date).toISOString().substring(0,10)}class nr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!lt()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(dv){t(dv)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Xn()).transaction(Qn),n=await t.objectStore(Qn).get(Zn(e));return await t.done,n}catch(t){if(t instanceof ct)an.warn(t.message);else{const e=qn.create("idb-get",{originalErrorMessage:t?.message});an.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Jn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Jn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function rr(e){return Ue(JSON.stringify({version:2,heartbeats:e})).length}var ir;ir="",Vn(new Pt("platform-logger",e=>new rn(e),"PRIVATE")),Vn(new Pt("heartbeat",e=>new er(e),"PRIVATE")),Gn(sn,on,ir),Gn(sn,on,"esm2020"),Gn("fire-js","");function sr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const or=sr,ar=new ut("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lr=new Vt("@firebase/auth");function cr(e){if(lr.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lr.error(`Auth (${Wn}): ${e}`,...n)}}function ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fr(e,...n)}function hr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fr(e,...n)}function dr(e,t,n){const r={...or(),[t]:n};return new ut("auth","Firebase",r).create(t,{appName:e.name})}function pr(e){return dr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ar.create(e,...n)}function mr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fr(t,...r)}}function gr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw cr(t),new Error(t)}function yr(e,t){e||gr(t)}function vr(){return"undefined"!==typeof self&&self.location?.href||""}function wr(){return"http:"===br()||"https:"===br()}function br(){return"undefined"!==typeof self&&self.location?.protocol||null}function _r(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(wr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class xr{constructor(e,t){this.shortDelay=e,this.longDelay=t,yr(t>e,"Short delay should be less than long delay!"),this.isMobile=rt()||st()}get(){return _r()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kr(e,t){yr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Cr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Er={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Nr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Tr=new xr(3e4,6e4);function Sr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ir(e,t,n,r){return Pr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=_t({key:e.config.apiKey,...s}).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:a,...i};return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Ye(e.emulatorConfig.host)&&(l.credentials="include"),Cr.fetch()(await Ar(e,e.config.apiHost,n,o),l)})}async function Pr(e,t,n){e._canInitEmulator=!1;const r={...Er,...t};try{const t=new Dr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Lr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Lr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Lr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Lr(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw dr(e,a,o);ur(e,a)}}catch(i){if(i instanceof ct)throw i;ur(e,"network-request-failed",{message:String(i)})}}async function Rr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ir(e,t,n,r,i);return"mfaPendingCredential"in s&&ur(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Ar(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?kr(e.config,i):`${e.config.apiScheme}://${i}`;if(Nr.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function jr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(hr(this.auth,"network-request-failed")),Tr.get())})}}function Lr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hr(e,t,r);return i.customData._tokenResponse=n,i}function Or(e){return void 0!==e&&void 0!==e.enterprise}class Mr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ur(e,t){return Ir(e,"GET","/v2/recaptchaConfig",Sr(e,t))}async function Fr(e,t){return Ir(e,"POST","/v1/accounts:lookup",t)}function Vr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function zr(e){return 1e3*Number(e)}function Br(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return cr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Fe(n);return e?JSON.parse(e):(cr("Failed to decode base64 JWT payload"),null)}catch(i){return cr("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qr(e){const t=Br(e);return mr(t,"internal-error"),mr("undefined"!==typeof t.exp,"internal-error"),mr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function $r(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof ct&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Wr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class Hr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kr(e){const t=e.auth,n=await e.getIdToken(),r=await $r(e,Fr(t,{idToken:n}));mr(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=i.providerUserInfo?.length?Gr(i.providerUserInfo):[],o=(a=e.providerData,l=s,[...a.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var a,l;const c=e.isAnonymous,u=!(e.email&&i.passwordHash)&&!o?.length,h=!!c&&u,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hr(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,d)}function Gr(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Qr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mr(e.idToken,"internal-error"),mr("undefined"!==typeof e.idToken,"internal-error"),mr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):qr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mr(0!==e.length,"internal-error");const t=qr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(mr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Pr(e,{},async()=>{const n=_t({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Ar(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&Ye(e.emulatorConfig.host)&&(a.credentials="include"),Cr.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Qr;return n&&(mr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(mr("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(mr("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qr,this.toJSON())}_performRefresh(){return gr("not implemented")}}function Yr(e,t){mr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Xr{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...i}=e;this.providerId="firebase",this.proactiveRefresh=new Wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await $r(this,this.stsTokenManager.getToken(this.auth,e));return mr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=It(e),r=await n.getIdToken(t),i=Br(r);mr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Vr(zr(i.auth_time)),issuedAtTime:Vr(zr(i.iat)),expirationTime:Vr(zr(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=It(e);await Kr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(mr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){mr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Kr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(pr(this.auth));const e=await this.getIdToken();return await $r(this,async function(e,t){return Ir(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:h,isAnonymous:d,providerData:p,stsTokenManager:f}=t;mr(u&&f,e,"internal-error");const m=Qr.fromJSON(this.name,f);mr("string"===typeof u,e,"internal-error"),Yr(n,e.name),Yr(r,e.name),mr("boolean"===typeof h,e,"internal-error"),mr("boolean"===typeof d,e,"internal-error"),Yr(i,e.name),Yr(s,e.name),Yr(o,e.name),Yr(a,e.name),Yr(l,e.name),Yr(c,e.name);const g=new Xr({uid:u,auth:e,email:r,emailVerified:h,displayName:n,isAnonymous:d,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:m,createdAt:l,lastLoginAt:c});return p&&Array.isArray(p)&&(g.providerData=p.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qr;r.updateFromServerResponse(t);const i=new Xr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Kr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];mr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Gr(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!i?.length,o=new Qr;o.updateFromIdToken(n);const a=new Xr({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Hr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(a,l),a}}const Jr=new Map;function Zr(e){yr(e instanceof Function,"Expected a class definition");let t=Jr.get(e);return t?(yr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jr.set(e,t),t)}class ei{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ei.type="NONE";const ti=ei;function ni(e,t,n){return`firebase:${e}:${t}:${n}`}class ri{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ni(this.userKey,r.apiKey,i),this.fullPersistenceKey=ni("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Fr(this.auth,{idToken:e}).catch(()=>{});return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ri(Zr(ti),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Zr(ti);const s=ni(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await Fr(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Xr._fromGetAccountInfoResponse(e,r,t)}else n=Xr._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new ri(i,e,n)):new ri(i,e,n)}}function ii(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(li(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(si(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ui(t))return"Blackberry";if(hi(t))return"Webos";if(oi(t))return"Safari";if((t.includes("chrome/")||ai(t))&&!t.includes("edge/"))return"Chrome";if(ci(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/firefox\//i.test(e)}function oi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/crios\//i.test(e)}function li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/iemobile/i.test(e)}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/android/i.test(e)}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/blackberry/i.test(e)}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/webos/i.test(e)}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pi(){return function(){const e=nt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return di(e)||ci(e)||hi(e)||ui(e)||/windows phone/i.test(e)||li(e)}function mi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ii(nt());break;case"Worker":t=`${ii(nt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wn}/${r}`}class gi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class yi{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class vi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bi(this),this.idTokenSubscription=new bi(this),this.beforeStateQueue=new gi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ar,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ri.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Fr(this,{idToken:e}),n=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Bn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==i||!s?.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return mr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kr(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(pr(this));const t=e?It(e):null;return t&&mr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&mr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ir(e,"GET","/v2/passwordPolicy",Sr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new yi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ut("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ir(e,"POST","/v2/accounts:revokeToken",Sr(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zr(e)||this._popupRedirectResolver;mr(t,this,"argument-error"),this.redirectPersistenceManager=await ri.create(this,[Zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(mr(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(lr.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lr.warn(`Auth (${Wn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wi(e){return It(e)}class bi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Et(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return mr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _i={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xi(e){return _i.loadJS(e)}function ki(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ci{constructor(){this.enterprise=new Ei}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ei{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ni="NO_RECAPTCHA";class Ti{constructor(e){this.type="recaptcha-enterprise",this.auth=wi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Or(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ni)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ci).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ur(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Mr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Or(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=_i.recaptchaEnterpriseScript;0!==t.length&&(t+=i),xi(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Si(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Ti(e);let o;if(i)o=Ni;else try{o=await s.verify(n)}catch(dv){o=await s.verify(n,!0)}const a={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ii(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Si(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Si(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await Si(e,t,n);return r(e,i).catch(async i=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Si(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Si(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Pi(e){const t=wi(e),n=await Ur(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Mr(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ti(t).verify()}}function Ri(e,t,n){const r=wi(e);mr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=Ai(t),{host:o,port:a}=function(e){const t=Ai(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ji(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ji(t)}}}(t),l=null===a?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return mr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void mr(wt(c,r.config.emulator)&&wt(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ye(o)?(Xe(`${s}//${o}${l}`),tt("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ai(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ji(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Di{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,t){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function Li(e,t){return Ir(e,"POST","/v1/accounts:signUp",t)}async function Oi(e,t){return Rr(e,"POST","/v1/accounts:signInWithPassword",Sr(e,t))}class Mi extends Di{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Mi(e,t,"password")}static _fromEmailAndCode(e,t){return new Mi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ii(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithEmailLink",Sr(e,t))}(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ii(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Li,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithEmailLink",Sr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ui(e,t){return Rr(e,"POST","/v1/accounts:signInWithIdp",Sr(e,t))}class Fi extends Di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new Fi(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ui(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ui(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ui(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_t(t)}return e}}async function Vi(e,t){return Ir(e,"POST","/v1/accounts:sendVerificationCode",Sr(e,t))}const zi={USER_NOT_FOUND:"user-not-found"};class Bi extends Di{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Bi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Bi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithPhoneNumber",Sr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Rr(e,"POST","/v1/accounts:signInWithPhoneNumber",Sr(e,t));if(n.temporaryProof)throw Lr(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return Rr(e,"POST","/v1/accounts:signInWithPhoneNumber",Sr(e,{...t,operation:"REAUTH"}),zi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Bi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qi{constructor(e){const t=xt(kt(e)),n=t.apiKey??null,r=t.oobCode??null,i=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);mr(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=xt(kt(e)).link,n=t?xt(kt(t)).deep_link_id:null,r=xt(kt(e)).deep_link_id;return(r?xt(kt(r)).link:null)||r||n||t||e}(e);try{return new qi(t)}catch{return null}}}class $i{constructor(){this.providerId=$i.PROVIDER_ID}static credential(e,t){return Mi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qi.parseLink(t);return mr(n,"argument-error"),Mi._fromEmailAndCode(e,n.code,n.tenantId)}}$i.PROVIDER_ID="password",$i.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hi extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ki extends Hi{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ki.credential(t.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ki.PROVIDER_ID="facebook.com";class Gi extends Hi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fi._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Gi.credential(n,r)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com",Gi.PROVIDER_ID="google.com";class Qi extends Hi{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qi.credential(t.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com",Qi.PROVIDER_ID="github.com";class Yi extends Hi{constructor(){super("twitter.com")}static credential(e,t){return Fi._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Yi.credential(n,r)}catch{return null}}}async function Xi(e,t){return Rr(e,"POST","/v1/accounts:signUp",Sr(e,t))}Yi.TWITTER_SIGN_IN_METHOD="twitter.com",Yi.PROVIDER_ID="twitter.com";class Ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Xr._fromIdTokenResponse(e,n,r),s=Zi(n);return new Ji({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Zi(n);return new Ji({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Zi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class es extends ct{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,es.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new es(e,t,n,r)}}function ts(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw es._fromErrorAndOperation(e,n,t,r);throw n})}async function ns(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await $r(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ji._forOperation(e,"link",r)}async function rs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Bn(r.app))return Promise.reject(pr(r));const i="reauthenticate";try{const s=await $r(e,ts(r,i,t,e),n);mr(s.idToken,r,"internal-error");const o=Br(s.idToken);mr(o,r,"internal-error");const{sub:a}=o;return mr(e.uid===a,r,"user-mismatch"),Ji._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&ur(r,"user-mismatch"),s}}async function is(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Bn(e.app))return Promise.reject(pr(e));const r="signIn",i=await ts(e,r,t),s=await Ji._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ss(e,t){return is(wi(e),t)}async function os(e){const t=wi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function as(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=It(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await $r(i,async function(e,t){return Ir(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function ls(e,t){return Ir(e,"POST","/v2/accounts/mfaEnrollment:start",Sr(e,t))}new WeakMap;const cs="__sak";class us{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cs,"1"),this.storage.removeItem(cs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class hs extends us{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);pi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hs.type="LOCAL";const ds=hs;function ps(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function fs(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class ms{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=fs(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return ps(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=fs(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=fs(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=ps(n);const i=setInterval(()=>{const e=ps(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ms.type="COOKIE";class gs extends us{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gs.type="SESSION";const ys=gs;class vs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new vs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}vs.receivers=[];class bs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=ws("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function _s(){return window}function xs(){return"undefined"!==typeof _s().WorkerGlobalScope&&"function"===typeof _s().importScripts}const ks="firebaseLocalStorageDb",Cs="firebaseLocalStorage",Es="fbase_key";class Ns{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ts(e,t){return e.transaction([Cs],t?"readwrite":"readonly").objectStore(Cs)}function Ss(){const e=indexedDB.open(ks,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Cs,{keyPath:Es})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Cs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ks);return new Ns(e).toPromise()}(),t(await Ss()))})})}async function Is(e,t,n){const r=Ts(e,!0).put({[Es]:t,value:n});return new Ns(r).toPromise()}function Ps(e,t){const n=Ts(e,!0).delete(t);return new Ns(n).toPromise()}class Rs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ss()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vs._getInstance(xs()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new bs(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ss();return await Is(e,cs,"1"),await Ps(e,cs),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Is(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ts(e,!1).get(t),r=await new Ns(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ps(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ts(e,!1).getAll();return new Ns(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rs.type="LOCAL";const As=Rs;function js(e,t){return Ir(e,"POST","/v2/accounts/mfaSignIn:start",Sr(e,t))}ki("rcb"),new xr(3e4,6e4);const Ds="recaptcha";async function Ls(e,t,n){if(!e._getRecaptchaConfig())try{await Pi(e)}catch(dv){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){mr("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Ii(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ni){mr(n?.type===Ds,e,"argument-error");return ls(e,await Os(e,t,n))}return ls(e,t)},"PHONE_PROVIDER"),o=await s.catch(e=>Promise.reject(e));return o.phoneSessionInfo.sessionInfo}{mr("signin"===t.type,e,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;mr(i,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ii(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ni){mr(n?.type===Ds,e,"argument-error");return js(e,await Os(e,t,n))}return js(e,t)},"PHONE_PROVIDER"),a=await o.catch(e=>Promise.reject(e));return a.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=Ii(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ni){mr(n?.type===Ds,e,"argument-error");return Vi(e,await Os(e,t,n))}return Vi(e,t)},"PHONE_PROVIDER"),s=await i.catch(e=>Promise.reject(e));return s.sessionInfo}}finally{n?._reset()}}async function Os(e,t,n){mr(n.type===Ds,e,"argument-error");const r=await n.verify();mr("string"===typeof r,e,"argument-error");const i={...t};if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ms{constructor(e){this.providerId=Ms.PROVIDER_ID,this.auth=wi(e)}verifyPhoneNumber(e,t){return Ls(this.auth,e,It(t))}static credential(e,t){return Bi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ms.credentialFromTaggedObject(t)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Bi._fromTokenResponse(n,r):null}}function Us(e,t){return t?Zr(t):(mr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ms.PROVIDER_ID="phone",Ms.PHONE_SIGN_IN_METHOD="phone";class Fs extends Di{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ui(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ui(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vs(e){return is(e.auth,new Fs(e),e.bypassAuthState)}function zs(e){const{auth:t,user:n}=e;return mr(n,t,"internal-error"),rs(n,new Fs(e),e.bypassAuthState)}async function Bs(e){const{auth:t,user:n}=e;return mr(n,t,"internal-error"),ns(n,new Fs(e),e.bypassAuthState)}class qs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vs;case"linkViaPopup":case"linkViaRedirect":return Bs;case"reauthViaPopup":case"reauthViaRedirect":return zs;default:ur(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $s=new xr(2e3,1e4);class Ws extends qs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mr(e,this.auth,"internal-error"),e}async onExecution(){yr(1===this.filter.length,"Popup operations only handle one event");const e=ws();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,$s.get())};e()}}Ws.currentPopupAction=null;const Hs=new Map;class Ks extends qs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Hs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ys(t),r=Qs(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Hs.set(this.auth._key(),e)}return this.bypassAuthState||Hs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Gs(e,t){Hs.set(e._key(),t)}function Qs(e){return Zr(e._redirectPersistence)}function Ys(e){return ni("pendingRedirect",e.config.apiKey,e.name)}async function Xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Bn(e.app))return Promise.reject(pr(e));const r=wi(e),i=Us(r,t),s=new Ks(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Js{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!eo(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(hr(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zs(e))}saveEventToCache(e){this.cachedEventUids.add(Zs(e)),this.lastProcessedEventTime=Date.now()}}function Zs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function eo(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const to=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,no=/^https?/;async function ro(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ir(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(io(n))return}catch{}ur(e,"unauthorized-domain")}function io(e){const t=vr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!no.test(n))return!1;if(to.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const so=new xr(3e4,6e4);function oo(){const e=_s().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ao(e){return new Promise((t,n)=>{function r(){oo(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oo(),n(hr(e,"network-request-failed"))},timeout:so.get()})}if(_s().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!_s().gapi?.load){const t=ki("iframefcb");return _s()[t]=()=>{gapi.load?r():n(hr(e,"network-request-failed"))},xi(`${_i.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw lo=null,e})}let lo=null;const co=new xr(5e3,15e3),uo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ho=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function po(e){const t=e.config;mr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Wn},i=ho.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_t(r).slice(1)}`}async function fo(e){const t=await function(e){return lo=lo||ao(e),lo}(e),n=_s().gapi;return mr(n,e,"internal-error"),t.open({where:document.body,url:po(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uo,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=hr(e,"network-request-failed"),s=_s().setTimeout(()=>{r(i)},co.get());function o(){_s().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const mo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class go{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function yo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...mo,width:r.toString(),height:i.toString(),top:s,left:o},c=nt().toLowerCase();n&&(a=ai(c)?"_blank":n),si(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return di(arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt())&&!!window.navigator?.standalone}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new go(null);const h=window.open(t||"",a,u);mr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new go(h)}const vo="__/auth/handler",wo="emulator/auth/handler",bo=encodeURIComponent("fac");async function _o(e,t,n,r,i,s){mr(e.config.authDomain,e,"auth-domain-config-required"),mr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wn,eventId:i};if(t instanceof Wi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",yt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Hi){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${bo}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${vo}`;return kr(t,wo)}(e)}?${_t(a).slice(1)}${c}`}const xo="webStorageSupport";const ko=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ys,this._completeRedirectFn=Xs,this._overrideRedirectResult=Gs}async _openPopup(e,t,n,r){yr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return yo(e,await _o(e,t,n,vr(),r),ws())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){_s().location.href=e}(await _o(e,t,n,vr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(yr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await fo(e),n=new Js(e);return t.register("authEvent",t=>{mr(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xo,{type:xo},n=>{const r=n?.[0]?.[xo];void 0!==r&&t(!!r),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ro(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fi()||oi()||di()}};var Co="@firebase/auth",Eo="1.11.0";class No{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const To=Ge("authIdTokenMaxAge")||300;let So=null;var Io,Po;Io={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=hr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},_i=Io,Po="Browser",Vn(new Pt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mr(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Po,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mi(Po)},c=new vi(r,i,s,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Vn(new Pt("auth-internal",e=>(e=>new No(e))(wi(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(Co,Eo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Po)),Gn(Co,Eo,"esm2020");Gn("firebase","12.0.0","app");var Ro,Ao,jo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Do={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=p(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=p*g,f(n,2*i+2*s),n[2*i+2*s+1]+=l*g,f(n,2*i+2*s+1),n[2*i+2*s+1]+=p*m,f(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,f(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ao=Do.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Ro=Do.Integer=r}).apply("undefined"!==typeof jo?jo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Lo,Oo,Mo,Uo,Fo,Vo,zo,Bo,qo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},$o={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof qo&&qo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout(()=>{throw e},0)}function C(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new N,e=>e.reset());class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,S=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(R)}};var R=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}S=!1};function A(){this.s=this.s,this.C=this.C}function j(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},j.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(j.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,j);var O={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),W={};function H(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[$]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[$]=null)):V(e)}}}function X(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new j(t,e);else if(t instanceof j)t.target=t.target||e;else{var i=t;_(t=new j(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,A),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}h(le,A);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){j.call(this,"d")}function we(){j.call(this,"c")}h(ve,j),h(we,j);var be={},_e=null;function xe(){return _e=_e||new ne}function ke(e){j.call(this,be.La,e)}function Ce(e){const t=xe();re(t,new ke(t))}function Ee(e,t){j.call(this,be.STAT_EVENT,e),this.stat=t}function Ne(e){const t=xe();re(t,new Ee(t,e))}function Te(e,t){j.call(this,be.Ma,e),this.size=t}function Se(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Pe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",h(ke,j),be.STAT_EVENT="statevent",h(Ee,j),be.Ma="timingevent",h(Te,j),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Re,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},je={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(De,fe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Re=new De;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Se(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Ne(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Se(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(We(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ce()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||Ce(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Ht(this.g);e="";var s=r.length,o=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ne(12),Ke(this),He(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==d&&(this.s=4,Ne(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ne(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ne(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),He(this)}else Pe(this.i,this.l,a,null),Ge(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Ke(this),He(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ce(),Ne(17)),Ke(this),this.s=2,He(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function kt(e,t){xt(e),t=Nt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return xt(e),t=Nt(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Nt(e,t),d(n)),e.h+=n.length)}function Nt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function St(){this.g=new pe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function jt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){xt(this),this.i=null,e=Nt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)Ct(this,e)&&(t=t.concat(this.g.get(Nt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Ct(this,e=Nt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Pt,fe),Pt.prototype.g=function(){return new Rt(this.l,this.j)},Pt.prototype.i=(mt={},function(){return mt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jt(this):Dt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,jt(this))},e.Qa=function(e){this.g&&(this.response=e,jt(this))},e.ga=function(){this.g&&jt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ut.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Wt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){$t(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new St,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||P(),S||(T(),S=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{It(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||P(),S||(T(),S=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Se(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new Te(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Se(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Pt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Ot(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Se(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,we),h(wn,fn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new yn(e))},wn.prototype.sa=function(e){re(this.g,new vn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Bo=$o.createWebChannelTransport=function(){return new mn},zo=$o.getStatEventTarget=function(){return xe()},Vo=$o.Event=be,Fo=$o.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Uo=$o.ErrorCode=Ae,je.COMPLETE="complete",Mo=$o.EventType=je,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Oo=$o.WebChannel=ge,$o.FetchXmlHttpFactory=Pt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Lo=$o.XhrIo=Mt}).apply("undefined"!==typeof qo?qo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Wo="@firebase/firestore",Ho="4.9.0";class Ko{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ko.UNAUTHENTICATED=new Ko(null),Ko.GOOGLE_CREDENTIALS=new Ko("google-credentials-uid"),Ko.FIRST_PARTY=new Ko("first-party-uid"),Ko.MOCK_USER=new Ko("mock-user");let Go="12.0.0";const Qo=new Vt("@firebase/firestore");function Yo(){return Qo.logLevel}function Xo(e){if(Qo.logLevel<=Lt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ea);Qo.debug(`Firestore (${Go}): ${e}`,...i)}}function Jo(e){if(Qo.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ea);Qo.error(`Firestore (${Go}): ${e}`,...i)}}function Zo(e){if(Qo.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ea);Qo.warn(`Firestore (${Go}): ${e}`,...i)}}function ea(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ta(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,na(e,r,n)}function na(e,t,n){let r=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Jo(r),new Error(r)}function ra(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||na(t,i,r)}function ia(e,t){return e}const sa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oa extends ct{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class aa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class la{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ca{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ko.UNAUTHENTICATED))}shutdown(){}}class ua{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ha{constructor(e){this.t=e,this.currentUser=Ko.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ra(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new aa,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Xo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Xo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new aa)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Xo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ra("string"==typeof t.accessToken,31837,{l:t}),new la(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ra(null===e||"string"==typeof e,2055,{h:e}),new Ko(e)}}class da{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ko.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pa{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new da(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ko.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ma{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ra(void 0===this.o,3512);const n=e=>{null!=e.error&&Xo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Xo("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Xo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Xo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fa(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ra("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new fa(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ga(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ya{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ga(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function va(e,t){return e<t?-1:e>t?1:0}function wa(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return xa(n)===xa(i)?va(n,i):xa(n)?1:-1}return va(e.length,t.length)}const ba=55296,_a=57343;function xa(e){const t=e.charCodeAt(0);return t>=ba&&t<=_a}function ka(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Ca="__name__";class Ea{constructor(e,t,n){void 0===t?t=0:t>e.length&&ta(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ta(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ea.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ea?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Ea.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return va(e.length,t.length)}static compareSegments(e,t){const n=Ea.isNumericId(e),r=Ea.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ea.extractNumericId(e).compare(Ea.extractNumericId(t)):wa(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ro.fromString(e.substring(4,e.length-2))}}class Na extends Ea{construct(e,t,n){return new Na(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new oa(sa.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Na(e)}static emptyPath(){return new Na([])}}const Ta=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sa extends Ea{construct(e,t,n){return new Sa(e,t,n)}static isValidIdentifier(e){return Ta.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ca}static keyField(){return new Sa([Ca])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new oa(sa.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new oa(sa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new oa(sa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new oa(sa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sa(t)}static emptyPath(){return new Sa([])}}class Ia{constructor(e){this.path=e}static fromPath(e){return new Ia(Na.fromString(e))}static fromName(e){return new Ia(Na.fromString(e).popFirst(5))}static empty(){return new Ia(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Na.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Na.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ia(new Na(e.slice()))}}function Pa(e,t,n){if(!n)throw new oa(sa.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ra(e){if(!Ia.isDocumentKey(e))throw new oa(sa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Aa(e){if(Ia.isDocumentKey(e))throw new oa(sa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ja(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Da(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":ta(12329,{type:typeof e})}function La(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new oa(sa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Da(e);throw new oa(sa.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Oa(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ma(e,t){if(!ja(e))throw new oa(sa.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new oa(sa.INVALID_ARGUMENT,n);return!0}const Ua=-62135596800,Fa=1e6;class Va{static now(){return Va.fromMillis(Date.now())}static fromDate(e){return Va.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Fa);return new Va(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oa(sa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oa(sa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ua)throw new oa(sa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oa(sa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fa}_compareTo(e){return this.seconds===e.seconds?va(this.nanoseconds,e.nanoseconds):va(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Va._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ma(e,Va._jsonSchema))return new Va(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ua;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Va._jsonSchemaVersion="firestore/timestamp/1.0",Va._jsonSchema={type:Oa("string",Va._jsonSchemaVersion),seconds:Oa("number"),nanoseconds:Oa("number")};class za{static fromTimestamp(e){return new za(e)}static min(){return new za(new Va(0,0))}static max(){return new za(new Va(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ba=-1;class qa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}qa.UNKNOWN_ID=-1;function $a(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=za.fromTimestamp(1e9===r?new Va(n+1,0):new Va(n,r));return new Ha(i,Ia.empty(),t)}function Wa(e){return new Ha(e.readTime,e.key,Ba)}class Ha{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ha(za.min(),Ia.empty(),Ba)}static max(){return new Ha(za.max(),Ia.empty(),Ba)}}function Ka(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ia.comparator(e.documentKey,t.documentKey),0!==n?n:va(e.largestBatchId,t.largestBatchId))}const Ga="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ya(e){if(e.code!==sa.FAILED_PRECONDITION||e.message!==Ga)throw e;Xo("LocalStore","Unexpectedly lost primary lease")}class Xa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ta(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xa((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Xa?t:Xa.resolve(t)}catch(e){return Xa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Xa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Xa.reject(t)}static resolve(e){return new Xa((t,n)=>{t(e)})}static reject(e){return new Xa((t,n)=>{n(e)})}static waitFor(e){return new Xa((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Xa.resolve(!1);for(const n of e)t=t.next(e=>e?Xa.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Xa((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Xa((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ja(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Za(e){return"IndexedDbTransactionError"===e.name}class el{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}el.ce=-1;const tl=-1;function nl(e){return null==e}function rl(e){return 0===e&&1/e==-1/0}function il(e){return"number"==typeof e&&Number.isInteger(e)&&!rl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const sl="\x01";function ol(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ll(t)),t=al(e.get(n),t);return ll(t)}function al(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case sl:n+="\x01\x11";break;default:n+=t}}return n}function ll(e){return e+sl+"\x01"}const cl="remoteDocuments",ul="owner",hl="mutationQueues",dl="mutations";const pl="documentMutations",fl="remoteDocumentsV14",ml="remoteDocumentGlobal",gl="targets",yl="targetDocuments",vl="targetGlobal",wl="collectionParents",bl="clientMetadata",_l="bundles",xl="namedQueries",kl="indexConfiguration",Cl="indexState",El="indexEntries",Nl="documentOverlays",Tl="globals",Sl=[hl,dl,pl,cl,gl,ul,vl,yl,bl,ml,wl,_l,xl],Il=[hl,dl,pl,fl,gl,ul,vl,yl,bl,ml,wl,_l,xl,Nl],Pl=Il,Rl=[...Pl,kl,Cl,El];function Al(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ll{constructor(e,t){this.comparator=e,this.root=t||Ml.EMPTY}insert(e,t){return new Ll(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ml.BLACK,null,null))}remove(e){return new Ll(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ml.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ol(this.root,e,this.comparator,!0)}}class Ol{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ml{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ml.RED,this.left=null!=r?r:Ml.EMPTY,this.right=null!=i?i:Ml.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ml(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ml.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ml.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ml.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ml.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ta(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ta(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ta(27949);return e+(this.isRed()?0:1)}}Ml.EMPTY=null,Ml.RED=!0,Ml.BLACK=!1,Ml.EMPTY=new class{constructor(){this.size=0}get key(){throw ta(57766)}get value(){throw ta(16141)}get color(){throw ta(16727)}get left(){throw ta(29726)}get right(){throw ta(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ml(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ul{constructor(e){this.comparator=e,this.data=new Ll(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fl(this.data.getIterator())}getIteratorFrom(e){return new Fl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ul))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ul(this.comparator);return t.data=e,t}}class Fl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Vl{constructor(e){this.fields=e,e.sort(Sa.comparator)}static empty(){return new Vl([])}unionWith(e){let t=new Ul(Sa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Vl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class zl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new zl("Invalid base64 string: "+e):e}}(e);return new Bl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Bl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return va(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bl.EMPTY_BYTE_STRING=new Bl("");const ql=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $l(e){if(ra(!!e,39018),"string"==typeof e){let t=0;const n=ql.exec(e);if(ra(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Wl(e.seconds),nanos:Wl(e.nanos)}}function Wl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hl(e){return"string"==typeof e?Bl.fromBase64String(e):Bl.fromUint8Array(e)}const Kl="server_timestamp",Gl="__type__",Ql="__previous_value__",Yl="__local_write_time__";function Xl(e){const t=(e?.mapValue?.fields||{})[Gl]?.stringValue;return t===Kl}function Jl(e){const t=e.mapValue.fields[Ql];return Xl(t)?Jl(t):t}function Zl(e){const t=$l(e.mapValue.fields[Yl].timestampValue);return new Va(t.seconds,t.nanos)}class ec{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const tc="(default)";class nc{constructor(e,t){this.projectId=e,this.database=t||tc}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database===tc}isEqual(e){return e instanceof nc&&e.projectId===this.projectId&&e.database===this.database}}const rc="__type__",ic="__max__",sc={mapValue:{fields:{__type__:{stringValue:ic}}}},oc="__vector__",ac="value";function lc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xl(e)?4:Ec(e)?9007199254740991:kc(e)?10:11:ta(28295,{value:e})}function cc(e,t){if(e===t)return!0;const n=lc(e);if(n!==lc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zl(e).isEqual(Zl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=$l(e.timestampValue),r=$l(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hl(e.bytesValue).isEqual(Hl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wl(e.geoPointValue.latitude)===Wl(t.geoPointValue.latitude)&&Wl(e.geoPointValue.longitude)===Wl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wl(e.integerValue)===Wl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Wl(e.doubleValue),r=Wl(t.doubleValue);return n===r?rl(n)===rl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ka(e.arrayValue.values||[],t.arrayValue.values||[],cc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Al(n)!==Al(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cc(n[i],r[i])))return!1;return!0}(e,t);default:return ta(52216,{left:e})}}function uc(e,t){return void 0!==(e.values||[]).find(e=>cc(e,t))}function hc(e,t){if(e===t)return 0;const n=lc(e),r=lc(t);if(n!==r)return va(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return va(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Wl(e.integerValue||e.doubleValue),r=Wl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return dc(e.timestampValue,t.timestampValue);case 4:return dc(Zl(e),Zl(t));case 5:return wa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Hl(e),r=Hl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=va(n[i],r[i]);if(0!==e)return e}return va(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=va(Wl(e.latitude),Wl(t.latitude));return 0!==n?n:va(Wl(e.longitude),Wl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return pc(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},i=n[ac]?.arrayValue,s=r[ac]?.arrayValue,o=va(i?.values?.length||0,s?.values?.length||0);return 0!==o?o:pc(i,s)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===sc.mapValue&&t===sc.mapValue)return 0;if(e===sc.mapValue)return 1;if(t===sc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=wa(r[o],s[o]);if(0!==e)return e;const t=hc(n[r[o]],i[s[o]]);if(0!==t)return t}return va(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ta(23264,{he:n})}}function dc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return va(e,t);const n=$l(e),r=$l(t),i=va(n.seconds,r.seconds);return 0!==i?i:va(n.nanos,r.nanos)}function pc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=hc(n[i],r[i]);if(e)return e}return va(n.length,r.length)}function fc(e){return mc(e)}function mc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=$l(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Hl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ia.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=mc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${mc(e.fields[i])}`;return n+"}"}(e.mapValue):ta(61005,{value:e})}function gc(e){switch(lc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Jl(e);return t?16+gc(t):16;case 5:return 2*e.stringValue.length;case 6:return Hl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+gc(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return jl(e.fields,(e,n)=>{t+=e.length+gc(n)}),t}(e.mapValue);default:throw ta(13486,{value:e})}}function yc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function vc(e){return!!e&&"integerValue"in e}function wc(e){return!!e&&"arrayValue"in e}function bc(e){return!!e&&"nullValue"in e}function _c(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xc(e){return!!e&&"mapValue"in e}function kc(e){const t=(e?.mapValue?.fields||{})[rc]?.stringValue;return t===oc}function Cc(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return jl(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Cc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Cc(e.arrayValue.values[n]);return t}return{...e}}function Ec(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ic}class Nc{constructor(e){this.value=e}static empty(){return new Nc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!xc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(t)}setAll(e){let t=Sa.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Cc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());xc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];xc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){jl(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Nc(Cc(this.value))}}function Tc(e){const t=[];return jl(e.fields,(e,n)=>{const r=new Sa([e]);if(xc(n)){const e=Tc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Vl(t)}class Sc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Sc(e,0,za.min(),za.min(),za.min(),Nc.empty(),0)}static newFoundDocument(e,t,n,r){return new Sc(e,1,t,za.min(),n,r,0)}static newNoDocument(e,t){return new Sc(e,2,t,za.min(),za.min(),Nc.empty(),0)}static newUnknownDocument(e,t){return new Sc(e,3,t,za.min(),za.min(),Nc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(za.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=za.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ic{constructor(e,t){this.position=e,this.inclusive=t}}function Pc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ia.comparator(Ia.fromName(o.referenceValue),n.key):hc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Rc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cc(e.position[n],t.position[n]))return!1;return!0}class Ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function jc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Dc{}class Lc extends Dc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new qc(e,t,n):"array-contains"===t?new Kc(e,n):"in"===t?new Gc(e,n):"not-in"===t?new Qc(e,n):"array-contains-any"===t?new Yc(e,n):new Lc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new $c(e,n):new Wc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(hc(t,this.value)):null!==t&&lc(this.value)===lc(t)&&this.matchesComparison(hc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ta(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oc extends Dc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Oc(e,t)}matches(e){return Mc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Mc(e){return"and"===e.op}function Uc(e){return Fc(e)&&Mc(e)}function Fc(e){for(const t of e.filters)if(t instanceof Oc)return!1;return!0}function Vc(e){if(e instanceof Lc)return e.field.canonicalString()+e.op.toString()+fc(e.value);if(Uc(e))return e.filters.map(e=>Vc(e)).join(",");{const t=e.filters.map(e=>Vc(e)).join(",");return`${e.op}(${t})`}}function zc(e,t){return e instanceof Lc?function(e,t){return t instanceof Lc&&e.op===t.op&&e.field.isEqual(t.field)&&cc(e.value,t.value)}(e,t):e instanceof Oc?function(e,t){return t instanceof Oc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&zc(n,t.filters[r]),!0)}(e,t):void ta(19439)}function Bc(e){return e instanceof Lc?function(e){return`${e.field.canonicalString()} ${e.op} ${fc(e.value)}`}(e):e instanceof Oc?function(e){return e.op.toString()+" {"+e.getFilters().map(Bc).join(" ,")+"}"}(e):"Filter"}class qc extends Lc{constructor(e,t,n){super(e,t,n),this.key=Ia.fromName(n.referenceValue)}matches(e){const t=Ia.comparator(e.key,this.key);return this.matchesComparison(t)}}class $c extends Lc{constructor(e,t){super(e,"in",t),this.keys=Hc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Wc extends Lc{constructor(e,t){super(e,"not-in",t),this.keys=Hc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hc(e,t){return(t.arrayValue?.values||[]).map(e=>Ia.fromName(e.referenceValue))}class Kc extends Lc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wc(t)&&uc(t.arrayValue,this.value)}}class Gc extends Lc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uc(this.value.arrayValue,t)}}class Qc extends Lc{constructor(e,t){super(e,"not-in",t)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!uc(this.value.arrayValue,t)}}class Yc extends Lc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>uc(this.value.arrayValue,e))}}class Xc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function Jc(e){return new Xc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zc(e){const t=ia(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Vc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),nl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>fc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>fc(e)).join(",")),t.Te=e}return t.Te}function eu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!zc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Rc(e.startAt,t.startAt)&&Rc(e.endAt,t.endAt)}function tu(e){return Ia.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class nu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ru(e,t,n,r,i,s,o,a){return new nu(e,t,n,r,i,s,o,a)}function iu(e){return new nu(e)}function su(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ou(e){return null!==e.collectionGroup}function au(e){const t=ia(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ul(Sa.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ac(r,n))}),e.has(Sa.keyField().canonicalString())||t.Ie.push(new Ac(Sa.keyField(),n))}return t.Ie}function lu(e){const t=ia(e);return t.Ee||(t.Ee=cu(t,au(e))),t.Ee}function cu(e,t){if("F"===e.limitType)return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ac(e.field,t)});const n=e.endAt?new Ic(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ic(e.startAt.position,e.startAt.inclusive):null;return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function uu(e,t){const n=e.filters.concat([t]);return new nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hu(e,t,n){return new nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function du(e,t){return eu(lu(e),lu(t))&&e.limitType===t.limitType}function pu(e){return`${Zc(lu(e))}|lt:${e.limitType}`}function fu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Bc(e)).join(", ")}]`),nl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>fc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>fc(e)).join(",")),`Target(${t})`}(lu(e))}; limitType=${e.limitType})`}function mu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ia.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of au(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Pc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,au(e),t))&&!(e.endAt&&!function(e,t,n){const r=Pc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,au(e),t))}(e,t)}function gu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yu(e){return(t,n)=>{let r=!1;for(const i of au(e)){const e=vu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function vu(e,t,n){const r=e.field.isKeyField()?Ia.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hc(r,i):ta(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ta(19790,{direction:e.dir})}}class wu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Dl(this.inner)}size(){return this.innerSize}}const bu=new Ll(Ia.comparator);function _u(){return bu}const xu=new Ll(Ia.comparator);function ku(){let e=xu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Cu(e){let t=xu;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Eu(){return Tu()}function Nu(){return Tu()}function Tu(){return new wu(e=>e.toString(),(e,t)=>e.isEqual(t))}const Su=new Ll(Ia.comparator),Iu=new Ul(Ia.comparator);function Pu(){let e=Iu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ru=new Ul(va);function Au(){return Ru}function ju(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(t)?"-0":t}}function Du(e){return{integerValue:""+e}}function Lu(e,t){return il(t)?Du(t):ju(e,t)}class Ou{constructor(){this._=void 0}}function Mu(e,t,n){return e instanceof Vu?function(e,t){const n={fields:{[Gl]:{stringValue:Kl},[Yl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xl(t)&&(t=Jl(t)),t&&(n.fields[Ql]=t),{mapValue:n}}(n,t):e instanceof zu?Bu(e,t):e instanceof qu?$u(e,t):function(e,t){const n=Fu(e,t),r=Hu(n)+Hu(e.Ae);return vc(n)&&vc(e.Ae)?Du(r):ju(e.serializer,r)}(e,t)}function Uu(e,t,n){return e instanceof zu?Bu(e,t):e instanceof qu?$u(e,t):n}function Fu(e,t){return e instanceof Wu?function(e){return vc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Vu extends Ou{}class zu extends Ou{constructor(e){super(),this.elements=e}}function Bu(e,t){const n=Ku(t);for(const r of e.elements)n.some(e=>cc(e,r))||n.push(r);return{arrayValue:{values:n}}}class qu extends Ou{constructor(e){super(),this.elements=e}}function $u(e,t){let n=Ku(t);for(const r of e.elements)n=n.filter(e=>!cc(e,r));return{arrayValue:{values:n}}}class Wu extends Ou{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Hu(e){return Wl(e.integerValue||e.doubleValue)}function Ku(e){return wc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Gu{constructor(e,t){this.version=e,this.transformResults=t}}class Qu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qu}static exists(e){return new Qu(void 0,e)}static updateTime(e){return new Qu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Xu{}function Ju(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new lh(e.key,Qu.none()):new rh(e.key,e.data,Qu.none());{const n=e.data,r=Nc.empty();let i=new Ul(Sa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ih(e.key,r,new Vl(i.toArray()),Qu.none())}}function Zu(e,t,n){e instanceof rh?function(e,t,n){const r=e.value.clone(),i=oh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ih?function(e,t,n){if(!Yu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=oh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(sh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function eh(e,t,n,r){return e instanceof rh?function(e,t,n,r){if(!Yu(e.precondition,t))return n;const i=e.value.clone(),s=ah(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ih?function(e,t,n,r){if(!Yu(e.precondition,t))return n;const i=ah(e.fieldTransforms,r,t),s=t.data;return s.setAll(sh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Yu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function th(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Fu(r.transform,e||null);null!=i&&(null===n&&(n=Nc.empty()),n.set(r.field,i))}return n||null}function nh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ka(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof zu&&t instanceof zu||e instanceof qu&&t instanceof qu?ka(e.elements,t.elements,cc):e instanceof Wu&&t instanceof Wu?cc(e.Ae,t.Ae):e instanceof Vu&&t instanceof Vu}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class rh extends Xu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ih extends Xu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sh(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function oh(e,t,n){const r=new Map;ra(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Uu(o,a,n[i]))}return r}function ah(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Mu(e,s,t))}return r}class lh extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ch extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Zu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=eh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=eh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Nu();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ju(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(za.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pu())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,(e,t)=>nh(e,t))&&ka(this.baseMutations,e.baseMutations,(e,t)=>nh(e,t))}}class hh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ra(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Su;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new hh(e,t,n,r)}}class dh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ph{constructor(e,t){this.count=e,this.unchangedNames=t}}var fh,mh;function gh(e){switch(e){case sa.OK:return ta(64938);case sa.CANCELLED:case sa.UNKNOWN:case sa.DEADLINE_EXCEEDED:case sa.RESOURCE_EXHAUSTED:case sa.INTERNAL:case sa.UNAVAILABLE:case sa.UNAUTHENTICATED:return!1;case sa.INVALID_ARGUMENT:case sa.NOT_FOUND:case sa.ALREADY_EXISTS:case sa.PERMISSION_DENIED:case sa.FAILED_PRECONDITION:case sa.ABORTED:case sa.OUT_OF_RANGE:case sa.UNIMPLEMENTED:case sa.DATA_LOSS:return!0;default:return ta(15467,{code:e})}}function yh(e){if(void 0===e)return Jo("GRPC error has no .code"),sa.UNKNOWN;switch(e){case fh.OK:return sa.OK;case fh.CANCELLED:return sa.CANCELLED;case fh.UNKNOWN:return sa.UNKNOWN;case fh.DEADLINE_EXCEEDED:return sa.DEADLINE_EXCEEDED;case fh.RESOURCE_EXHAUSTED:return sa.RESOURCE_EXHAUSTED;case fh.INTERNAL:return sa.INTERNAL;case fh.UNAVAILABLE:return sa.UNAVAILABLE;case fh.UNAUTHENTICATED:return sa.UNAUTHENTICATED;case fh.INVALID_ARGUMENT:return sa.INVALID_ARGUMENT;case fh.NOT_FOUND:return sa.NOT_FOUND;case fh.ALREADY_EXISTS:return sa.ALREADY_EXISTS;case fh.PERMISSION_DENIED:return sa.PERMISSION_DENIED;case fh.FAILED_PRECONDITION:return sa.FAILED_PRECONDITION;case fh.ABORTED:return sa.ABORTED;case fh.OUT_OF_RANGE:return sa.OUT_OF_RANGE;case fh.UNIMPLEMENTED:return sa.UNIMPLEMENTED;case fh.DATA_LOSS:return sa.DATA_LOSS;default:return ta(39323,{code:e})}}(mh=fh||(fh={}))[mh.OK=0]="OK",mh[mh.CANCELLED=1]="CANCELLED",mh[mh.UNKNOWN=2]="UNKNOWN",mh[mh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mh[mh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mh[mh.NOT_FOUND=5]="NOT_FOUND",mh[mh.ALREADY_EXISTS=6]="ALREADY_EXISTS",mh[mh.PERMISSION_DENIED=7]="PERMISSION_DENIED",mh[mh.UNAUTHENTICATED=16]="UNAUTHENTICATED",mh[mh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mh[mh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mh[mh.ABORTED=10]="ABORTED",mh[mh.OUT_OF_RANGE=11]="OUT_OF_RANGE",mh[mh.UNIMPLEMENTED=12]="UNIMPLEMENTED",mh[mh.INTERNAL=13]="INTERNAL",mh[mh.UNAVAILABLE=14]="UNAVAILABLE",mh[mh.DATA_LOSS=15]="DATA_LOSS";let vh=null;function wh(){return new TextEncoder}const bh=new Ro([4294967295,4294967295],0);function _h(e){const t=wh().encode(e),n=new Ao;return n.update(t),new Uint8Array(n.digest())}function xh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ro([n,r],0),new Ro([i,s],0)]}class kh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ch(`Invalid padding: ${t}`);if(n<0)throw new Ch(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Ch(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Ch(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ro.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ro.fromNumber(n)));return 1===r.compare(bh)&&(r=new Ro([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=_h(e),[n,r]=xh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new kh(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=_h(e),[n,r]=xh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ch extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Eh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Nh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Eh(za.min(),r,new Ll(va),_u(),Pu())}}class Nh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Nh(n,t,Pu(),Pu(),Pu())}}class Th{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Sh{constructor(e,t){this.targetId=e,this.Ce=t}}class Ih{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ph{constructor(){this.ve=0,this.Fe=jh(),this.Me=Bl.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pu(),t=Pu(),n=Pu();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ta(38017,{changeType:i})}}),new Nh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=jh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ra(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Rh{constructor(e){this.Ge=e,this.ze=new Map,this.je=_u(),this.Je=Ah(),this.He=Ah(),this.Ye=new Ll(va)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ta(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(tu(i))if(0===n){const e=new Ia(i.path);this.et(t,e,Sc.newNoDocument(e,za.min()))}else ra(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}vh?.lt(function(e,t,n,r,i){const s={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(s.bloomFilter={applied:0===i,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),s}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Hl(n).toUint8Array()}catch(e){if(e instanceof zl)return Zo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new kh(s,r,i)}catch(e){return Zo(e instanceof Ch?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&tu(i.target)){const t=new Ia(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Sc.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Pu();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Eh(e,t,this.Ye,this.je,n);return this.je=_u(),this.Je=Ah(),this.He=Ah(),this.Ye=new Ll(va),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ph,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ul(va),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ul(va),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Xo("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ph),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ah(){return new Ll(Ia.comparator)}function jh(){return new Ll(Ia.comparator)}const Dh={asc:"ASCENDING",desc:"DESCENDING"},Lh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oh={and:"AND",or:"OR"};class Mh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Uh(e,t){return e.useProto3Json||nl(t)?t:{value:t}}function Fh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function zh(e,t){return Fh(e,t.toTimestamp())}function Bh(e){return ra(!!e,49232),za.fromTimestamp(function(e){const t=$l(e);return new Va(t.seconds,t.nanos)}(e))}function qh(e,t){return $h(e,t).canonicalString()}function $h(e,t){const n=function(e){return new Na(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Wh(e){const t=Na.fromString(e);return ra(hd(t),10190,{key:t.toString()}),t}function Hh(e,t){return qh(e.databaseId,t.path)}function Kh(e,t){const n=Wh(t);if(n.get(1)!==e.databaseId.projectId)throw new oa(sa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new oa(sa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ia(Xh(n))}function Gh(e,t){return qh(e.databaseId,t)}function Qh(e){const t=Wh(e);return 4===t.length?Na.emptyPath():Xh(t)}function Yh(e){return new Na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xh(e){return ra(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Jh(e,t,n){return{name:Hh(e,t),fields:n.value.mapValue.fields}}function Zh(e,t){let n;if(t instanceof rh)n={update:Jh(e,t.key,t.value)};else if(t instanceof lh)n={delete:Hh(e,t.key)};else if(t instanceof ih)n={update:Jh(e,t.key,t.data),updateMask:ud(t.fieldMask)};else{if(!(t instanceof ch))return ta(16599,{Vt:t.type});n={verify:Hh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Vu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wu)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ta(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:zh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ta(27497)}(e,t.precondition)),n}function ed(e,t){return{documents:[Gh(e,t.path)]}}function td(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gh(e,i);const s=function(e){if(0!==e.length)return cd(Oc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ad(e.field),direction:id(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Uh(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function nd(e){let t=Qh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ra(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=rd(e);return t instanceof Oc&&Uc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Ac(ld(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,nl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ic(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ic(n,t)}(n.endAt)),ru(t,i,o,s,a,"F",l,c)}function rd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ld(e.unaryFilter.field);return Lc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ld(e.unaryFilter.field);return Lc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ld(e.unaryFilter.field);return Lc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ld(e.unaryFilter.field);return Lc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ta(61313);default:return ta(60726)}}(e):void 0!==e.fieldFilter?function(e){return Lc.create(ld(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ta(58110);default:return ta(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Oc.create(e.compositeFilter.filters.map(e=>rd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ta(1026)}}(e.compositeFilter.op))}(e):ta(30097,{filter:e})}function id(e){return Dh[e]}function sd(e){return Lh[e]}function od(e){return Oh[e]}function ad(e){return{fieldPath:e.canonicalString()}}function ld(e){return Sa.fromServerFormat(e.fieldPath)}function cd(e){return e instanceof Lc?function(e){if("=="===e.op){if(_c(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NAN"}};if(bc(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_c(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NOT_NAN"}};if(bc(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ad(e.field),op:sd(e.op),value:e.value}}}(e):e instanceof Oc?function(e){const t=e.getFilters().map(e=>cd(e));return 1===t.length?t[0]:{compositeFilter:{op:od(e.op),filters:t}}}(e):ta(54877,{filter:e})}function ud(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function hd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class dd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:za.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:za.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new dd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pd{constructor(e){this.yt=e}}function fd(e){const t=nd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hu(t,t.limit,"L"):t}class md{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Wl(e.integerValue));else if("doubleValue"in e){const n=Wl(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),rl(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=$l(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Hl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Ec(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):kc(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ta(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=ac,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Wl(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ia.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}md.Kt=new md;class gd{constructor(){this.Cn=new yd}addToCollectionParentIndex(e,t){return this.Cn.add(t),Xa.resolve()}getCollectionParents(e,t){return Xa.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Xa.resolve()}deleteFieldIndex(e,t){return Xa.resolve()}deleteAllFieldIndexes(e){return Xa.resolve()}createTargetIndexes(e,t){return Xa.resolve()}getDocumentsMatchingTarget(e,t){return Xa.resolve(null)}getIndexType(e,t){return Xa.resolve(0)}getFieldIndexes(e,t){return Xa.resolve([])}getNextCollectionGroupToUpdate(e){return Xa.resolve(null)}getMinOffset(e,t){return Xa.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,t){return Xa.resolve(Ha.min())}updateCollectionGroup(e,t,n){return Xa.resolve()}updateIndexEntries(e,t){return Xa.resolve()}}class yd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ul(Na.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ul(Na.comparator)).toArray()}}new Uint8Array(0);const vd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wd=41943040;class bd{static withCacheSize(e){return new bd(e,bd.DEFAULT_COLLECTION_PERCENTILE,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}bd.DEFAULT_COLLECTION_PERCENTILE=10,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bd.DEFAULT=new bd(wd,bd.DEFAULT_COLLECTION_PERCENTILE,bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bd.DISABLED=new bd(-1,0,0);class _d{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _d(0)}static cr(){return new _d(-1)}}const xd="LruGarbageCollector",kd=1048576;function Cd(e,t){let[n,r]=e,[i,s]=t;const o=va(n,i);return 0===o?va(r,s):o}class Ed{constructor(e){this.Ir=e,this.buffer=new Ul(Cd),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Cd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Nd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Xo(xd,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Za(e)?Xo(xd,"Ignoring IndexedDB error during garbage collection: ",e):await Ya(e)}await this.Vr(3e5)})}}class Td{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Xa.resolve(el.ce);const n=new Ed(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Xo("LruGarbageCollector","Garbage collection skipped; disabled"),Xa.resolve(vd)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Xo("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vd):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Xo("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Yo()<=Lt.DEBUG&&Xo("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),Xa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Sd(e,t){return new Td(e,t)}class Id{constructor(){this.changes=new wu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Xa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&eh(n.mutation,e,Vl.empty(),Va.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Pu()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pu();const r=Eu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ku();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Eu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Pu()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=_u();const s=Tu(),o=Tu();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ih)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),eh(o.mutation,t,o.mutation.getFieldMask(),Va.now())):s.set(t.key,Vl.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new Pd(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=Tu();let r=new Ll((e,t)=>e-t),i=Pu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Vl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Pu()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Nu();l.forEach(e=>{if(!i.has(e)){const r=Ju(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Xa.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ia.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ou(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Xa.resolve(Eu());let o=Ba,a=i;return s.next(t=>Xa.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Xa.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Pu())).next(e=>({batchId:o,changes:Cu(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ia(t)).next(e=>{let t=ku();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ku();return this.indexManager.getCollectionParents(e,i).next(o=>Xa.forEach(o,o=>{const a=function(e,t){return new nu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Sc.newInvalidDocument(r)))});let n=ku();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&eh(s.mutation,r,Vl.empty(),Va.now()),mu(t,r)&&(n=n.insert(e,r))}),n})}}class Ad{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Xa.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Bh(e.createTime)}}(t)),Xa.resolve()}getNamedQuery(e,t){return Xa.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:fd(e.bundledQuery),readTime:Bh(e.readTime)}}(t)),Xa.resolve()}}class jd{constructor(){this.overlays=new Ll(Ia.comparator),this.qr=new Map}getOverlay(e,t){return Xa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Eu();return Xa.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Xa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Xa.resolve()}getOverlaysForCollection(e,t,n){const r=Eu(),i=t.length+1,s=new Ia(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Xa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ll((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Eu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Eu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Xa.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new dh(t,n));let i=this.qr.get(t);void 0===i&&(i=Pu(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Dd{constructor(){this.sessionToken=Bl.EMPTY_BYTE_STRING}getSessionToken(e){return Xa.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Xa.resolve()}}class Ld{constructor(){this.Qr=new Ul(Od.$r),this.Ur=new Ul(Od.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Od(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Od(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Ia(new Na([])),n=new Od(t,e),r=new Od(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ia(new Na([])),n=new Od(t,e),r=new Od(t,e+1);let i=Pu();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Od(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Od{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ia.comparator(e.key,t.key)||va(e.Yr,t.Yr)}static Kr(e,t){return va(e.Yr,t.Yr)||Ia.comparator(e.key,t.key)}}class Md{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ul(Od.$r)}checkEmpty(e){return Xa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new uh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Od(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Xa.resolve(s)}lookupMutationBatch(e,t){return Xa.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Xa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Xa.resolve(0===this.mutationQueue.length?tl:this.tr-1)}getAllMutationBatches(e){return Xa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Od(t,0),r=new Od(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Xa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ul(va);return t.forEach(e=>{const t=new Od(e,0),r=new Od(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Xa.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ia.isDocumentKey(i)||(i=i.child(""));const s=new Od(new Ia(i),0);let o=new Ul(va);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),Xa.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ra(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Xa.forEach(t.mutations,r=>{const i=new Od(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Od(t,0),r=this.Zr.firstAfterOrEqual(n);return Xa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xa.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ud{constructor(e){this.ri=e,this.docs=new Ll(Ia.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Xa.resolve(n?n.document.mutableCopy():Sc.newInvalidDocument(t))}getEntries(e,t){let n=_u();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Sc.newInvalidDocument(e))}),Xa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=_u();const s=t.path,o=new Ia(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ka(Wa(o),n)<=0||(r.has(o.key)||mu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Xa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ta(9500)}ii(e,t){return Xa.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Fd(this)}getSize(e){return Xa.resolve(this.size)}}class Fd extends Id{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Xa.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Vd{constructor(e){this.persistence=e,this.si=new wu(e=>Zc(e),eu),this.lastRemoteSnapshotVersion=za.min(),this.highestTargetId=0,this.oi=0,this._i=new Ld,this.targetCount=0,this.ai=_d.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Xa.resolve()}getLastRemoteSnapshotVersion(e){return Xa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xa.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Xa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Xa.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new _d(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Xa.resolve()}updateTargetData(e,t){return this.Pr(t),Xa.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Xa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Xa.waitFor(i).next(()=>r)}getTargetCount(e){return Xa.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Xa.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Xa.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Xa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Xa.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Xa.resolve(n)}containsKey(e,t){return Xa.resolve(this._i.containsKey(t))}}class zd{constructor(e,t){this.ui={},this.overlays={},this.ci=new el(0),this.li=!1,this.li=!0,this.hi=new Dd,this.referenceDelegate=e(this),this.Pi=new Vd(this),this.indexManager=new gd,this.remoteDocumentCache=function(e){return new Ud(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new pd(t),this.Ii=new Ad(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Md(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Xo("MemoryPersistence","Starting transaction:",e);const r=new Bd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Xa.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Bd extends Qa{constructor(e){super(),this.currentSequenceNumber=e}}class qd{constructor(e){this.persistence=e,this.Ri=new Ld,this.Vi=null}static mi(e){return new qd(e)}get fi(){if(this.Vi)return this.Vi;throw ta(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Xa.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Xa.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Xa.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xa.forEach(this.fi,n=>{const r=Ia.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,za.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Xa.or([()=>Xa.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $d{constructor(e,t){this.persistence=e,this.pi=new wu(e=>ol(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Sd(this,t)}static mi(e,t){return new $d(e,t)}Ei(){}di(e){return Xa.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Xa.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Xa.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,za.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Xa.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Xa.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Xa.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Xa.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gc(e.data.value)),t}br(e,t,n){return Xa.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Xa.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Pu(),r=Pu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Wd(e,t.fromCache,n,r)}}class Hd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Kd{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=at()?8:Ja(nt())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Hd;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Yo()<=Lt.DEBUG&&Xo("QueryEngine","SDK will not create cache indexes for query:",fu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Xa.resolve()):(Yo()<=Lt.DEBUG&&Xo("QueryEngine","Query:",fu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Yo()<=Lt.DEBUG&&Xo("QueryEngine","The SDK decides to create cache indexes for query:",fu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lu(t))):Xa.resolve())}ys(e,t){if(su(t))return Xa.resolve(null);let n=lu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=hu(t,null,"F"),n=lu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Pu(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,hu(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return su(t)||r.isEqual(za.min())?Xa.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Xa.resolve(null):(Yo()<=Lt.DEBUG&&Xo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fu(t)),this.vs(e,s,t,$a(r,Ba)).next(e=>e))})}Ds(e,t){let n=new Ul(yu(e));return t.forEach((t,r)=>{mu(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Yo()<=Lt.DEBUG&&Xo("QueryEngine","Using full collection scan to execute query:",fu(t)),this.ps.getDocumentsMatchingQuery(e,t,Ha.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Gd="LocalStore";class Qd{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Ll(va),this.xs=new wu(e=>Zc(e),eu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rd(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Yd(e,t,n,r){return new Qd(e,t,n,r)}async function Xd(e,t){const n=ia(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Pu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Jd(e){const t=ia(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Zd(e,t,n){let r=Pu(),i=Pu();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=_u();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(za.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Xo(Gd,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function ep(e,t){const n=ia(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=tl),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function tp(e,t){const n=ia(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Xa.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new dd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function np(e,t,n){const r=ia(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Za(e))throw e;Xo(Gd,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function rp(e,t,n){const r=ia(e);let i=za.min(),s=Pu();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=ia(e),i=r.xs.get(n);return void 0!==i?Xa.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,lu(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:za.min(),n?s:Pu())).next(e=>(ip(r,gu(t),e),{documents:e,Qs:s})))}function ip(e,t,n){let r=e.Os.get(t)||za.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class sp{constructor(){this.activeTargetIds=Au()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class op{constructor(){this.Mo=new sp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ap{Oo(e){}shutdown(){}}const lp="ConnectivityMonitor";class cp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Xo(lp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Xo(lp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let up=null;function hp(){return null===up?up=268435456+Math.round(2147483648*Math.random()):up++,"0x"+up.toString(16)}const dp="RestConnection",pp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fp{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===tc?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=hp(),o=this.zo(e,t.toUriEncodedString());Xo(dp,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=Ye(l);return this.Jo(e,o,a,n,c).then(t=>(Xo(dp,`Received RPC '${e}' ${s}: `,t),t),t=>{throw Zo(dp,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Go,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=pp[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class mp{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const gp="WebChannelConnection";class yp extends fp{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=hp();return new Promise((i,o)=>{const a=new Lo;a.setWithCredentials(!0),a.listenOnce(Mo.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Uo.NO_ERROR:const t=a.getResponseJson();Xo(gp,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Uo.TIMEOUT:Xo(gp,`RPC '${e}' ${s} timed out`),o(new oa(sa.DEADLINE_EXCEEDED,"Request time out"));break;case Uo.HTTP_ERROR:const n=a.getStatus();if(Xo(gp,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(sa).indexOf(t)>=0?t:sa.UNKNOWN}(t.status);o(new oa(e,t.message))}else o(new oa(sa.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new oa(sa.UNAVAILABLE,"Connection failed."));break;default:ta(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Xo(gp,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);Xo(gp,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=hp(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Bo(),o=zo(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Xo(gp,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const p=new mp({Yo:t=>{d?Xo(gp,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Xo(gp,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Xo(gp,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return f(u,Oo.EventType.OPEN,()=>{d||(Xo(gp,`RPC '${e}' stream ${r} transport opened.`),p.o_())}),f(u,Oo.EventType.CLOSE,()=>{d||(d=!0,Xo(gp,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))}),f(u,Oo.EventType.ERROR,t=>{d||(d=!0,Zo(gp,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.a_(new oa(sa.UNAVAILABLE,"The operation could not be completed")))}),f(u,Oo.EventType.MESSAGE,t=>{if(!d){const n=t.data[0];ra(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){Xo(gp,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=fh[e];if(void 0!==t)return yh(t)}(t),i=s.message;void 0===n&&(n=sa.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,p.a_(new oa(n,i)),u.close()}else Xo(gp,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}}),f(o,Vo.STAT_EVENT,t=>{t.stat===Fo.PROXY?Xo(gp,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Fo.NOPROXY&&Xo(gp,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function vp(){return"undefined"!=typeof document?document:null}function wp(e){return new Mh(e,!0)}class bp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Xo("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const _p="PersistentStream";class xp{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bp(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===sa.RESOURCE_EXHAUSTED?(Jo(t.toString()),Jo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===sa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new oa(sa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Xo(_p,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Xo(_p,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kp extends xp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ta(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ra(void 0===t||"string"==typeof t,58123),Bl.fromBase64String(t||"")):(ra(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Bl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?sa.UNKNOWN:yh(e.code);return new oa(t,e.message||"")}(o);n=new Ih(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kh(e,r.document.name),s=Bh(r.document.updateTime),o=r.document.createTime?Bh(r.document.createTime):za.min(),a=new Nc({mapValue:{fields:r.document.fields}}),l=Sc.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Th(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Kh(e,r.document),s=r.readTime?Bh(r.readTime):za.min(),o=Sc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Th([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Kh(e,r.document),s=r.removedTargetIds||[];n=new Th([],s,i,null)}else{if(!("filter"in t))return ta(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ph(r,i),o=e.targetId;n=new Sh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return za.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?za.min():t.readTime?Bh(t.readTime):za.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Yh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=tu(r)?{documents:ed(e,r)}:{query:td(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Vh(e,t.resumeToken);const r=Uh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(za.min())>0){n.readTime=Fh(e,t.snapshotVersion.toTimestamp());const r=Uh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ta(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Yh(this.serializer),t.removeTarget=e,this.q_(t)}}class Cp extends xp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ra(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ra(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){ra(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(ra(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Bh(e.updateTime):Bh(t);return n.isEqual(za.min())&&(n=Bh(t)),new Gu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Bh(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Yh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Zh(this.serializer,e))};this.q_(t)}}class Ep{}class Np extends Ep{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new oa(sa.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,$h(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===sa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new oa(sa.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,$h(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===sa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new oa(sa.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Tp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jo(t),this.aa=!1):Xo("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Sp="RemoteStore";class Ip{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Up(this)&&(Xo(Sp,"Restarting streams for network reachability change."),await async function(e){const t=ia(e);t.Ea.add(4),await Rp(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Pp(t)}(this))})}),this.Ra=new Tp(n,r)}}async function Pp(e){if(Up(e))for(const t of e.da)await t(!0)}async function Rp(e){for(const t of e.da)await t(!1)}function Ap(e,t){const n=ia(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Mp(n)?Op(n):rf(n).O_()&&Dp(n,t))}function jp(e,t){const n=ia(e),r=rf(n);n.Ia.delete(t),r.O_()&&Lp(n,t),0===n.Ia.size&&(r.O_()?r.L_():Up(n)&&n.Ra.set("Unknown"))}function Dp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(za.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rf(e).Y_(t)}function Lp(e,t){e.Va.Ue(t),rf(e).Z_(t)}function Op(e){e.Va=new Rh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),rf(e).start(),e.Ra.ua()}function Mp(e){return Up(e)&&!rf(e).x_()&&e.Ia.size>0}function Up(e){return 0===ia(e).Ea.size}function Fp(e){e.Va=void 0}async function Vp(e){e.Ra.set("Online")}async function zp(e){e.Ia.forEach((t,n)=>{Dp(e,t)})}async function Bp(e,t){Fp(e),Mp(e)?(e.Ra.ha(t),Op(e)):e.Ra.set("Unknown")}async function qp(e,t,n){if(e.Ra.set("Online"),t instanceof Ih&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Xo(Sp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await $p(e,n)}else if(t instanceof Th?e.Va.Ze(t):t instanceof Sh?e.Va.st(t):e.Va.tt(t),!n.isEqual(za.min()))try{const t=await Jd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Bl.EMPTY_BYTE_STRING,r.snapshotVersion)),Lp(e,t);const i=new dd(r.target,t,n,r.sequenceNumber);Dp(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Xo(Sp,"Failed to raise snapshot:",t),await $p(e,t)}}async function $p(e,t,n){if(!Za(t))throw t;e.Ea.add(1),await Rp(e),e.Ra.set("Offline"),n||(n=()=>Jd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Xo(Sp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Pp(e)})}function Wp(e,t){return t().catch(n=>$p(e,n,t))}async function Hp(e){const t=ia(e),n=sf(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:tl;for(;Kp(t);)try{const e=await ep(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Gp(t,e)}catch(e){await $p(t,e)}Qp(t)&&Yp(t)}function Kp(e){return Up(e)&&e.Ta.length<10}function Gp(e,t){e.Ta.push(t);const n=sf(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Qp(e){return Up(e)&&!sf(e).x_()&&e.Ta.length>0}function Yp(e){sf(e).start()}async function Xp(e){sf(e).ra()}async function Jp(e){const t=sf(e);for(const n of e.Ta)t.ea(n.mutations)}async function Zp(e,t,n){const r=e.Ta.shift(),i=hh.from(r,t,n);await Wp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Hp(e)}async function ef(e,t){t&&sf(e).X_&&await async function(e,t){if(function(e){return gh(e)&&e!==sa.ABORTED}(t.code)){const n=e.Ta.shift();sf(e).B_(),await Wp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Hp(e)}}(e,t),Qp(e)&&Yp(e)}async function tf(e,t){const n=ia(e);n.asyncQueue.verifyOperationInProgress(),Xo(Sp,"RemoteStore received new credentials");const r=Up(n);n.Ea.add(3),await Rp(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Pp(n)}async function nf(e,t){const n=ia(e);t?(n.Ea.delete(2),await Pp(n)):t||(n.Ea.add(2),await Rp(n),n.Ra.set("Unknown"))}function rf(e){return e.ma||(e.ma=function(e,t,n){const r=ia(e);return r.sa(),new kp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Vp.bind(null,e),t_:zp.bind(null,e),r_:Bp.bind(null,e),H_:qp.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Mp(e)?Op(e):e.Ra.set("Unknown")):(await e.ma.stop(),Fp(e))})),e.ma}function sf(e){return e.fa||(e.fa=function(e,t,n){const r=ia(e);return r.sa(),new Cp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Xp.bind(null,e),r_:ef.bind(null,e),ta:Jp.bind(null,e),na:Zp.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Hp(e)):(await e.fa.stop(),e.Ta.length>0&&(Xo(Sp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class of{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new of(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new oa(sa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function af(e,t){if(Jo("AsyncQueue",`${t}: ${e}`),Za(e))return new oa(sa.UNAVAILABLE,`${t}: ${e}`);throw e}class lf{static emptySet(e){return new lf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ia.comparator(t.key,n.key):(e,t)=>Ia.comparator(e.key,t.key),this.keyedMap=ku(),this.sortedSet=new Ll(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new lf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class cf{constructor(){this.ga=new Ll(Ia.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ta(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class uf{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new uf(e,t,lf.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class hf{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class df{constructor(){this.queries=pf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=ia(e),r=n.queries;n.queries=pf(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new oa(sa.ABORTED,"Firestore shutting down"))}}function pf(){return new wu(e=>pu(e),du)}async function ff(e,t){const n=ia(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new hf,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=af(e,`Initialization of query '${fu(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&vf(n)}async function mf(e,t){const n=ia(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gf(e,t){const n=ia(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&vf(n)}function yf(e,t,n){const r=ia(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function vf(e){e.Ca.forEach(e=>{e.next()})}var wf,bf;(bf=wf||(wf={})).Ma="default",bf.Cache="cache";class _f{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new uf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=uf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wf.Cache}}class xf{constructor(e){this.key=e}}class kf{constructor(e){this.key=e}}class Cf{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pu(),this.mutatedKeys=Pu(),this.eu=yu(e),this.tu=new lf(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new cf,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=mu(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.su(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ta(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new uf(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pu(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new kf(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new xf(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Pu();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return uf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Ef="SyncEngine";class Nf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tf{constructor(e){this.key=e,this.hu=!1}}class Sf{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new wu(e=>pu(e),du),this.Iu=new Map,this.Eu=new Set,this.du=new Ll(Ia.comparator),this.Au=new Map,this.Ru=new Ld,this.Vu={},this.mu=new Map,this.fu=_d.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function If(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Yf(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Rf(r,t,n,!0),i}async function Pf(e,t){const n=Yf(e);await Rf(n,t,!0,!1)}async function Rf(e,t,n,r){const i=await tp(e.localStore,lu(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Af(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Ap(e.remoteStore,i),a}async function Af(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await rp(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return $f(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await rp(e.localStore,t,!0),o=new Cf(t,s.Qs),a=o.ru(s.documents),l=Nh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);$f(e,n,c.au);const u=new Nf(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function jf(e,t,n){const r=ia(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!du(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await np(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jp(r.remoteStore,i.targetId),Bf(r,i.targetId)}).catch(Ya)):(Bf(r,i.targetId),await np(r.localStore,i.targetId,!0))}async function Df(e,t){const n=ia(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jp(n.remoteStore,r.targetId))}async function Lf(e,t){const n=ia(e);try{const e=await function(e,t){const n=ia(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Bl.EMPTY_BYTE_STRING,za.min()).withLastLimboFreeSnapshotVersion(za.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=_u(),l=Pu();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Zd(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(za.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Xa.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(ra(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?ra(r.hu,14607):e.removedDocuments.size>0&&(ra(r.hu,42227),r.hu=!1))}),await Kf(n,e,t)}catch(e){await Ya(e)}}function Of(e,t,n){const r=ia(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=ia(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&vf(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Mf(e,t,n){const r=ia(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Ll(Ia.comparator);e=e.insert(s,Sc.newNoDocument(s,za.min()));const n=Pu().add(s),i=new Eh(za.min(),new Map,new Ll(va),e,n);await Lf(r,i),r.du=r.du.remove(s),r.Au.delete(t),Hf(r)}else await np(r.localStore,t,!1).then(()=>Bf(r,t,n)).catch(Ya)}async function Uf(e,t){const n=ia(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ia(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Xa.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);ra(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Pu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);zf(n,r,null),Vf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kf(n,e)}catch(e){await Ya(e)}}async function Ff(e,t,n){const r=ia(e);try{const e=await function(e,t){const n=ia(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ra(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);zf(r,t,n),Vf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Kf(r,e)}catch(n){await Ya(n)}}function Vf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function zf(e,t,n){const r=ia(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Bf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||qf(e,t)})}function qf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(jp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Hf(e))}function $f(e,t,n){for(const r of n)r instanceof xf?(e.Ru.addReference(r.key,t),Wf(e,r)):r instanceof kf?(Xo(Ef,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||qf(e,r.key)):ta(19791,{wu:r})}function Wf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Xo(Ef,"New document in limbo: "+n),e.Eu.add(r),Hf(e))}function Hf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Ia(Na.fromString(t)),r=e.fu.next();e.Au.set(r,new Tf(n)),e.du=e.du.insert(n,r),Ap(e.remoteStore,new dd(lu(iu(n.path)),r,"TargetPurposeLimboResolution",el.ce))}}async function Kf(e,t,n){const r=ia(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=Wd.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=ia(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Xa.forEach(t,t=>Xa.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Xa.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Za(e))throw e;Xo(Gd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Gf(e,t){const n=ia(e);if(!n.currentUser.isEqual(t)){Xo(Ef,"User change. New user:",t.toKey());const e=await Xd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new oa(sa.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Kf(n,e.Ls)}}function Qf(e,t){const n=ia(e),r=n.Au.get(t);if(r&&r.hu)return Pu().add(r.key);{let e=Pu();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Yf(e){const t=ia(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Lf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Mf.bind(null,t),t.Pu.H_=gf.bind(null,t.eventManager),t.Pu.yu=yf.bind(null,t.eventManager),t}function Xf(e){const t=ia(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Uf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ff.bind(null,t),t}class Jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Yd(this.persistence,new Kd,e.initialUser,this.serializer)}Cu(e){return new zd(qd.mi,this.serializer)}Du(e){return new op}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jf.provider={build:()=>new Jf};class Zf extends Jf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ra(this.persistence.referenceDelegate instanceof $d,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Nd(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?bd.withCacheSize(this.cacheSizeBytes):bd.DEFAULT;return new zd(e=>$d.mi(e,t),this.serializer)}}class em{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Of(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gf.bind(null,this.syncEngine),await nf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new df}createDatastore(e){const t=wp(e.databaseInfo.databaseId),n=function(e){return new yp(e)}(e.databaseInfo);return function(e,t,n,r){return new Np(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ip(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Of(this.syncEngine,e,0),cp.v()?new cp:new ap)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Sf(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=ia(e);Xo(Sp,"RemoteStore shutting down."),t.Ea.add(5),await Rp(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}em.provider={build:()=>new em};class tm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const nm="FirestoreClient";class rm{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ko.UNAUTHENTICATED,this.clientId=ya.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Xo(nm,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Xo(nm,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=af(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function im(e,t){e.asyncQueue.verifyOperationInProgress(),Xo(nm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Xd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await om(e);Xo(nm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>tf(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>tf(t.remoteStore,n)),e._onlineComponents=t}async function om(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Xo(nm,"Using user provided OfflineComponentProvider");try{await im(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===sa.FAILED_PRECONDITION||e.code===sa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await im(e,new Jf)}}else Xo(nm,"Using default OfflineComponentProvider"),await im(e,new Zf(void 0));return e._offlineComponents}async function am(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Xo(nm,"Using user provided OnlineComponentProvider"),await sm(e,e._uninitializedComponentsProvider._online)):(Xo(nm,"Using default OnlineComponentProvider"),await sm(e,new em))),e._onlineComponents}function lm(e){return am(e).then(e=>e.syncEngine)}async function cm(e){const t=await am(e),n=t.eventManager;return n.onListen=If.bind(null,t.syncEngine),n.onUnlisten=jf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Pf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Df.bind(null,t.syncEngine),n}function um(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new aa;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new tm({next:a=>{s.Nu(),t.enqueueAndForget(()=>mf(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new oa(sa.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new oa(sa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new _f(iu(n.path),s,{includeMetadataChanges:!0,qa:!0});return ff(e,o)}(await cm(e),e.asyncQueue,t,n,r)),r.promise}function hm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new aa;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new tm({next:n=>{s.Nu(),t.enqueueAndForget(()=>mf(e,o)),n.fromCache&&"server"===r.source?i.reject(new oa(sa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new _f(n,s,{includeMetadataChanges:!0,qa:!0});return ff(e,o)}(await cm(e),e.asyncQueue,t,n,r)),r.promise}function dm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const pm=new Map,fm="firestore.googleapis.com",mm=!0;class gm{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new oa(sa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fm,this.ssl=mm}else this.host=e.host,this.ssl=e.ssl??mm;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=wd;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<kd)throw new oa(sa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new oa(sa.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dm(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new oa(sa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new oa(sa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new oa(sa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ym{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oa(sa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new oa(sa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gm(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ca;switch(e.type){case"firstParty":return new pa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new oa(sa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pm.get(e);t&&(Xo("ComponentProvider","Removing Datastore"),pm.delete(e),t.terminate())}(this),Promise.resolve()}}class vm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vm(this.firestore,e,this._query)}}class wm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wm(this.firestore,e,this._key)}toJSON(){return{type:wm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ma(t,wm._jsonSchema))return new wm(e,n||null,new Ia(Na.fromString(t.referencePath)))}}wm._jsonSchemaVersion="firestore/documentReference/1.0",wm._jsonSchema={type:Oa("string",wm._jsonSchemaVersion),referencePath:Oa("string")};class bm extends vm{constructor(e,t,n){super(e,t,iu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wm(this.firestore,null,new Ia(e))}withConverter(e){return new bm(this.firestore,e,this._path)}}function _m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=It(e),Pa("collection","path",t),e instanceof ym){const n=Na.fromString(t,...r);return Aa(n),new bm(e,null,n)}{if(!(e instanceof wm||e instanceof bm))throw new oa(sa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return Aa(n),new bm(e.firestore,null,n)}}function xm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=It(e),1===arguments.length&&(t=ya.newId()),Pa("doc","path",t),e instanceof ym){const n=Na.fromString(t,...r);return Ra(n),new wm(e,null,new Ia(n))}{if(!(e instanceof wm||e instanceof bm))throw new oa(sa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return Ra(n),new wm(e.firestore,e instanceof bm?e.converter:null,new Ia(n))}}const km="AsyncQueue";class Cm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bp(this,"async_queue_retry"),this._c=()=>{const e=vp();e&&Xo(km,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=vp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new aa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Za(e))throw e;Xo(km,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Jo("INTERNAL UNHANDLED ERROR: ",Em(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=of.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ta(47125,{Pc:Em(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Em(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Nm extends ym{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Cm,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cm(e),this._firestoreClient=void 0,await e}}}function Tm(e){if(e._terminated)throw new oa(sa.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Sm(e),e._firestoreClient}function Sm(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new ec(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,dm(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new rm(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class Im{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Im(Bl.fromBase64String(e))}catch(e){throw new oa(sa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Im(Bl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Im._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ma(e,Im._jsonSchema))return Im.fromBase64String(e.bytes)}}Im._jsonSchemaVersion="firestore/bytes/1.0",Im._jsonSchema={type:Oa("string",Im._jsonSchemaVersion),bytes:Oa("string")};class Pm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new oa(sa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rm{constructor(e){this._methodName=e}}class Am{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oa(sa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oa(sa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return va(this._lat,e._lat)||va(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Am._jsonSchemaVersion}}static fromJSON(e){if(Ma(e,Am._jsonSchema))return new Am(e.latitude,e.longitude)}}Am._jsonSchemaVersion="firestore/geoPoint/1.0",Am._jsonSchema={type:Oa("string",Am._jsonSchemaVersion),latitude:Oa("number"),longitude:Oa("number")};class jm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ma(e,jm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new jm(e.vectorValues);throw new oa(sa.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jm._jsonSchemaVersion="firestore/vectorValue/1.0",jm._jsonSchema={type:Oa("string",jm._jsonSchemaVersion),vectorValues:Oa("object")};const Dm=/^__.*__$/;class Lm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ih(e,this.data,this.fieldMask,t,this.fieldTransforms):new rh(e,this.data,t,this.fieldTransforms)}}class Om{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ih(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ta(40011,{Ac:e})}}class Um{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Um({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Mm(this.Ac)&&Dm.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Fm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||wp(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Um({Ac:e,methodName:t,Dc:n,path:Sa.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vm(e){const t=e._freezeSettings(),n=wp(e._databaseId);return new Fm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Qm("Data must be an object, but it was:",o,r);const a=Km(r,o);let l,c;if(s.merge)l=new Vl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ym(t,r,n);if(!o.contains(i))throw new oa(sa.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);eg(e,i)||e.push(i)}l=new Vl(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Lm(new Nc(a),l,c)}class Bm extends Rm{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bm}}function qm(e,t,n,r){const i=e.Cc(1,t,n);Qm("Data must be an object, but it was:",i,r);const s=[],o=Nc.empty();jl(r,(e,r)=>{const a=Jm(t,e,n);r=It(r);const l=i.yc(a);if(r instanceof Bm)s.push(a);else{const e=Hm(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Vl(s);return new Om(o,a,i.fieldTransforms)}function $m(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[Ym(t,r,n)],l=[i];if(s.length%2!=0)throw new oa(sa.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Ym(t,s[d])),l.push(s[d+1]);const c=[],u=Nc.empty();for(let d=a.length-1;d>=0;--d)if(!eg(c,a[d])){const e=a[d];let t=l[d];t=It(t);const n=o.yc(e);if(t instanceof Bm)c.push(e);else{const r=Hm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Vl(c);return new Om(u,h,o.fieldTransforms)}function Wm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Hm(n,e.Cc(r?4:3,t))}function Hm(e,t){if(Gm(e=It(e)))return Qm("Unsupported field value:",t,e),Km(e,t);if(e instanceof Rm)return function(e,t){if(!Mm(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Hm(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=It(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Lu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Va.fromDate(e);return{timestampValue:Fh(t.serializer,n)}}if(e instanceof Va){const n=new Va(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fh(t.serializer,n)}}if(e instanceof Am)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Im)return{bytesValue:Vh(t.serializer,e._byteString)};if(e instanceof wm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:qh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof jm)return function(e,t){return{mapValue:{fields:{[rc]:{stringValue:oc},[ac]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ju(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Da(e)}`)}(e,t)}function Km(e,t){const n={};return Dl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jl(e,(e,r)=>{const i=Hm(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Gm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Va||e instanceof Am||e instanceof Im||e instanceof wm||e instanceof Rm||e instanceof jm)}function Qm(e,t,n){if(!Gm(n)||!ja(n)){const r=Da(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Ym(e,t,n){if((t=It(t))instanceof Pm)return t._internalPath;if("string"==typeof t)return Jm(e,t);throw Zm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xm=new RegExp("[~\\*/\\[\\]]");function Jm(e,t,n){if(t.search(Xm)>=0)throw Zm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Pm(...t.split("."))._internalPath}catch(r){throw Zm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zm(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new oa(sa.INVALID_ARGUMENT,a+e+l)}function eg(e,t){return e.some(e=>e.isEqual(t))}class tg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ng(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ng extends tg{data(){return super.data()}}function rg(e,t){return"string"==typeof t?Jm(e,t):t instanceof Pm?t._internalPath:t._delegate._internalPath}function ig(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new oa(sa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sg{}class og extends sg{}function ag(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof sg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof ug).length,n=e.filter(e=>e instanceof lg).length;if(t>1||t>0&&n>0)throw new oa(sa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class lg extends og{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new lg(e,t,n)}_apply(e){const t=this._parse(e);return mg(e._query,t),new vm(e.firestore,e.converter,uu(e._query,t))}_parse(e){const t=Vm(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new oa(sa.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){fg(o,s);const t=[];for(const n of o)t.push(pg(r,e,n));a={arrayValue:{values:t}}}else a=pg(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||fg(o,s),a=Wm(n,t,o,"in"===s||"not-in"===s);return Lc.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function cg(e,t,n){const r=t,i=rg("where",e);return lg._create(i,r,n)}class ug extends sg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ug(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Oc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)mg(n,i),n=uu(n,i)}(e._query,t),new vm(e.firestore,e.converter,uu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hg extends og{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new oa(sa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new oa(sa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ac(t,n)}(e._query,this._field,this._direction);return new vm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new nu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function dg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=rg("orderBy",e);return hg._create(n,t)}function pg(e,t,n){if("string"==typeof(n=It(n))){if(""===n)throw new oa(sa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ou(t)&&-1!==n.indexOf("/"))throw new oa(sa.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Na.fromString(n));if(!Ia.isDocumentKey(r))throw new oa(sa.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yc(e,new Ia(r))}if(n instanceof wm)return yc(e,n._key);throw new oa(sa.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Da(n)}.`)}function fg(e,t){if(!Array.isArray(e)||0===e.length)throw new oa(sa.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function mg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new oa(sa.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new oa(sa.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class gg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(lc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ta(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return jl(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[ac].arrayValue?.values?.map(e=>Wl(e.doubleValue));return new jm(t)}convertGeoPoint(e){return new Am(Wl(e.latitude),Wl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Jl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const t=$l(e);return new Va(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Na.fromString(e);ra(hd(n),9688,{name:e});const r=new nc(n.get(1),n.get(3)),i=new Ia(n.popFirst(5));return r.isEqual(t)||Jo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function yg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wg extends tg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(rg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oa(sa.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wg._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}wg._jsonSchemaVersion="firestore/documentSnapshot/1.0",wg._jsonSchema={type:Oa("string",wg._jsonSchemaVersion),bundleSource:Oa("string","DocumentSnapshot"),bundleName:Oa("string"),bundle:Oa("string")};class bg extends wg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class _g{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new bg(this._firestore,this._userDataWriter,n.key,n,new vg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new oa(sa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new bg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new vg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new bg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:xg(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oa(sa.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_g._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ya.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ta(61501,{type:e})}}function kg(e){e=La(e,wm);const t=La(e.firestore,Nm);return um(Tm(t),e._key).then(n=>Sg(t,e,n))}_g._jsonSchemaVersion="firestore/querySnapshot/1.0",_g._jsonSchema={type:Oa("string",_g._jsonSchemaVersion),bundleSource:Oa("string","QuerySnapshot"),bundleName:Oa("string"),bundle:Oa("string")};class Cg extends gg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Im(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wm(this.firestore,null,t)}}function Eg(e){e=La(e,vm);const t=La(e.firestore,Nm),n=Tm(t),r=new Cg(t);return ig(e._query),hm(n,e._query).then(n=>new _g(t,r,e,n))}function Ng(e,t){const n=La(e.firestore,Nm),r=xm(e),i=yg(e.converter,t);return Tg(n,[zm(Vm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Qu.exists(!1))]).then(()=>r)}function Tg(e,t){return function(e,t){const n=new aa;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Xf(e);try{const e=await function(e,t){const n=ia(e),r=Va.now(),i=t.reduce((e,t)=>e.add(t.key),Pu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=_u(),l=Pu();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=th(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new ih(e.key,t,Tc(t.value.mapValue),Qu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Cu(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Ll(va)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Kf(r,e.changes),await Hp(r.remoteStore)}catch(e){const t=af(e,"Failed to persist write");n.reject(t)}}(await lm(e),t,n)),n.promise}(Tm(e),t)}function Sg(e,t,n){const r=n.docs.get(t._key),i=new Cg(e);return new wg(e,i,t._key,r,new vg(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Go=e}(Wn),Vn(new Pt("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Nm(new ha(e.getProvider("auth-internal")),new ma(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new oa(sa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(e.options.projectId,t)}(s,r),s);return i={useFetchStreams:t,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Gn(Wo,Ho,e),Gn(Wo,Ho,"esm2020")}();const Ig="firebasestorage.googleapis.com",Pg="storageBucket";class Rg extends ct{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Dg(e),`Firebase Storage: ${t} (${Dg(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rg.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ag,jg;function Dg(e){return"storage/"+e}function Lg(){return new Rg(Ag.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Og(){return new Rg(Ag.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Mg(){return new Rg(Ag.CANCELED,"User canceled the upload/download.")}function Ug(){return new Rg(Ag.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fg(e){return new Rg(Ag.INVALID_ARGUMENT,e)}function Vg(){return new Rg(Ag.APP_DELETED,"The Firebase app was deleted.")}function zg(e,t){return new Rg(Ag.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Bg(e){throw new Rg(Ag.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ag||(Ag={}));class qg{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=qg.makeFromUrl(e,t)}catch(i){return new qg(e,"")}if(""===n.path)return n;throw r=e,new Rg(Ag.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Ig?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new qg(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Rg(Ag.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class $g{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Wg(e){return"string"===typeof e||e instanceof String}function Hg(e){return Kg()&&e instanceof Blob}function Kg(){return"undefined"!==typeof Blob}function Gg(e,t,n,r){if(r<t)throw Fg(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Fg(`Invalid value for '${e}'. Expected ${n} or less.`)}function Qg(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Yg(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Xg(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(jg||(jg={}));class Jg{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Zg(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===jg.NO_ERROR,i=n.getStatus();if(!t||Xg(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===jg.ABORT;return void e(!1,new Zg(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Zg(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=Lg();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Vg():Mg())}else{r(Og())}};this.canceled_?t(0,new Zg(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout(()=>{i=null,e(p,l())},t)}function d(){s&&clearTimeout(s)}function p(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let f=!1;function m(e){f||(f=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Zg{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ey(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ty(){const e=ey();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Kg())return new Blob(n);throw new Rg(Ag.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ny(e){if("undefined"===typeof atob)throw t="base-64",new Rg(Ag.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const ry="raw",iy="base64",sy="base64url",oy="data_url";class ay{constructor(e,t){this.data=e,this.contentType=t||null}}function ly(e,t){switch(e){case ry:return new ay(cy(t));case iy:case sy:return new ay(uy(e,t));case oy:return new ay(function(e){const t=new hy(e);return t.base64?uy(iy,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw zg(oy,"Malformed data URL.")}return cy(t)}(t.rest)}(t),new hy(t).contentType)}throw Lg()}function cy(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function uy(e,t){switch(e){case iy:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw zg(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case sy:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw zg(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ny(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw zg(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class hy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw zg(oy,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class dy{constructor(e,t){let n=0,r="";Hg(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Hg(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new dy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new dy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Kg()){const e=t.map(e=>e instanceof dy?e.data_:e);return new dy(ty.apply(null,e))}{const e=t.map(e=>Wg(e)?ly(ry,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new dy(r,!0)}}uploadData(){return this.data_}}function py(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function fy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function my(e,t){return t}class gy{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||my}}let yy=null;function vy(){if(yy)return yy;const e=[];e.push(new gy("bucket")),e.push(new gy("generation")),e.push(new gy("metageneration")),e.push(new gy("name","fullPath",!0));const t=new gy("name");t.xform=function(e,t){return function(e){return!Wg(e)||e.length<2?e:fy(e)}(t)},e.push(t);const n=new gy("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new gy("timeCreated")),e.push(new gy("updated")),e.push(new gy("md5Hash",null,!0)),e.push(new gy("cacheControl",null,!0)),e.push(new gy("contentDisposition",null,!0)),e.push(new gy("contentEncoding",null,!0)),e.push(new gy("contentLanguage",null,!0)),e.push(new gy("contentType",null,!0)),e.push(new gy("metadata","customMetadata",!0)),yy=e,yy}function wy(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new qg(n,r);return t._makeStorageReference(i)}})}(r,e),r}function by(e,t,n){const r=py(t);if(null===r)return null;return wy(e,r,n)}function _y(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class xy{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ky(e){if(!e)throw Lg()}function Cy(e,t){return function(n,r){const i=by(e,r,t);return ky(null!==i),i}}function Ey(e,t){return function(n,r){const i=by(e,r,t);return ky(null!==i),function(e,t,n,r){const i=py(t);if(null===i)return null;if(!Wg(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.bucket,s=e.fullPath;return Qg("/b/"+o(i)+"/o/"+o(s),n,r)+Yg({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function Ny(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Rg(Ag.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Rg(Ag.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Rg(Ag.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Rg(Ag.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Ty(e){const t=Ny(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Rg(Ag.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Sy(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Iy(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=Sy(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+_y(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=dy.getBlob(c,r,u);if(null===h)throw Ug();const d={name:l.fullPath},p=Qg(s,e.host,e._protocol),f=e.maxUploadRetryTime,m=new xy(p,"POST",Cy(e,n),f);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=Ny(t),m}class Py{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw Bg("cannot .send() more than once");if(Ye(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Bg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ry extends Py{initXhr(){this.xhr_.responseType="text"}}function Ay(){return new Ry}class jy{constructor(e,t){this._service=e,this._location=t instanceof qg?t:qg.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jy(e,t)}get root(){const e=new qg(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new qg(this._location.bucket,e);return new jy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Rg(Ag.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Dy(e,t,n){e._throwIfRoot("uploadBytes");const r=Iy(e.storage,e._location,vy(),new dy(t,!0),n);return e.storage.makeRequestWithTokens(r,Ay).then(t=>({metadata:t,ref:e}))}function Ly(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Qg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new xy(r,"GET",Ey(e,n),i);return s.errorHandler=Ty(t),s}(e.storage,e._location,vy());return e.storage.makeRequestWithTokens(t,Ay).then(e=>{if(null===e)throw new Rg(Ag.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Oy(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new qg(e._location.bucket,n);return new jy(e.storage,r)}function My(e,t){if(e instanceof Vy){const n=e;if(null==n._bucket)throw new Rg(Ag.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Pg+"' property when initializing the app?");const r=new jy(n,n._bucket);return null!=t?My(r,t):r}return void 0!==t?Oy(e,t):e}function Uy(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Vy)return new jy(e,t);throw Fg("To use ref(service, url), the first argument must be a Storage instance.")}return My(e,t)}function Fy(e,t){const n=t?.[Pg];return null==n?null:qg.makeFromBucketSpec(n,e)}class Vy{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=Ig,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?qg.makeFromBucketSpec(r,this._host):Fy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=qg.makeFromBucketSpec(this._url,e):this._bucket=Fy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jy(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new $g(Vg());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=Yg(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Jg(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const zy="@firebase/storage",By="0.14.0",qy="storage";function $y(e,t,n){return Dy(e=It(e),t,n)}function Wy(e){return Ly(e=It(e))}function Hy(e,t){return Uy(e=It(e),t)}function Ky(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Vy(r,i,s,n,Wn)}Vn(new Pt(qy,Ky,"PUBLIC").setMultipleInstances(!0)),Gn(zy,By,""),Gn(zy,By,"esm2020");const Gy="@firebase/database",Qy="1.1.0";let Yy="";function Xy(e){Yy=e}class Jy{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:dt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Zy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return mt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ev=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Jy(t)}}catch(t){}return new Zy},tv=ev("localStorage"),nv=ev("sessionStorage"),rv=new Vt("@firebase/database"),iv=function(){let e=1;return function(){return e++}}(),sv=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Ae(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ct;n.update(t);const r=n.digest();return Le.encodeByteArray(r)},ov=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=ov.apply(null,n):e+="object"===typeof n?pt(n):n,e+=" "}return e};let av=null,lv=!0;const cv=function(e,t){Ae(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(rv.logLevel=Lt.VERBOSE,av=rv.log.bind(rv),t&&nv.set("logging_enabled",!0)):"function"===typeof e?av=e:(av=null,nv.remove("logging_enabled"))},uv=function(){if(!0===lv&&(lv=!1,null===av&&!0===nv.get("logging_enabled")&&cv(!0)),av){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ov.apply(null,t);av(r)}},hv=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];uv(e,...n)}},dv=function(){const e="FIREBASE INTERNAL ERROR: "+ov(...arguments);rv.error(e)},pv=function(){const e=`FIREBASE FATAL ERROR: ${ov(...arguments)}`;throw rv.error(e),new Error(e)},fv=function(){const e="FIREBASE WARNING: "+ov(...arguments);rv.warn(e)},mv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},gv="[MIN_NAME]",yv="[MAX_NAME]",vv=function(e,t){if(e===t)return 0;if(e===gv||t===yv)return-1;if(t===gv||e===yv)return 1;{const n=Nv(e),r=Nv(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},wv=function(e,t){return e===t?0:e<t?-1:1},bv=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+pt(t))},_v=function(e){if("object"!==typeof e||null===e)return pt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=pt(t[r]),n+=":",n+=_v(e[t[r]]);return n+="}",n},xv=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function kv(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Cv=function(e){Ae(!mv(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Ev=new RegExp("^-?(0*)\\d{1,10}$"),Nv=function(e){if(Ev.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Tv=function(e){try{e()}catch(t){setTimeout(()=>{const e=t.stack||"";throw fv("Exception was thrown by user callback.",e),t},Math.floor(0))}},Sv=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Iv{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Bn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){fv(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Pv{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(uv("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fv(e)}}class Rv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rv.OWNER="owner";const Av="5",jv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dv="ac",Lv="websocket",Ov="long_polling";class Mv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tv.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tv.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Uv(e,t,n){let r;if(Ae("string"===typeof t,"typeof type must == string"),Ae("object"===typeof n,"typeof params must == object"),t===Lv)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ov)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return kv(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class Fv{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;mt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ve(this.counters_)}}const Vv={},zv={};function Bv(e){const t=e.toString();return Vv[t]||(Vv[t]=new Fv),Vv[t]}class qv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Tv(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const $v="start";class Wv{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hv(e),this.stats_=Bv(t),this.urlFn=e=>(this.appCheckToken&&(e[Dv]=this.appCheckToken),Uv(t,Ov,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(ot()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Hv(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===$v)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[$v]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Av,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Dv]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&jv.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wv.forceAllow_=!0}static forceDisallow(){Wv.forceDisallow_=!0}static isAvailable(){return!ot()&&(!!Wv.forceAllow_||!Wv.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=pt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Me(t),r=xv(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ot())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=pt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Hv{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ot())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=iv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Hv.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){uv("frame writing exception"),i.stack&&uv(i.stack),uv(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||uv("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){ot()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{uv("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let Kv=null;"undefined"!==typeof MozWebSocket?Kv=MozWebSocket:"undefined"!==typeof WebSocket&&(Kv=WebSocket);class Gv{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hv(this.connId),this.stats_=Bv(t),this.connURL=Gv.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Av,!ot()&&"undefined"!==typeof location&&location.hostname&&jv.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Dv]=r),i&&(s.p=i),Uv(e,Lv,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tv.set("previous_websocket_failure",!0);try{let e;if(ot()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Av}/${Yy}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/Catcher",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Kv(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Gv.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Kv&&!Gv.forceDisallow_}static previouslyFailed(){return tv.isInMemoryStorage||!0===tv.get("previous_websocket_failure")}markConnectionHealthy(){tv.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=dt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=pt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=xv(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Gv.responsesRequiredToBeHealthy=2,Gv.healthyTimeout=3e4;class Qv{static get ALL_TRANSPORTS(){return[Wv,Gv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Gv&&Gv.isAvailable();let n=t&&!Gv.previouslyFailed();if(e.webSocketOnly&&(t||fv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Gv];else{const e=this.transports_=[];for(const t of Qv.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Qv.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Qv.globalTransportInitialized_=!1;class Yv{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hv("c:"+this.id+":"),this.transportManager_=new Qv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Sv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=bv("t",e),n=bv("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=bv("t",e),n=bv("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=bv("t",e);if("d"in e){const n=e.d;if("h"===t){const e={...n};this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?dv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Av!==n&&fv("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Sv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Sv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tv.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Xv{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Jv{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Ae(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Zv extends Jv{static getInstance(){return new Zv}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||rt()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ae("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ew{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function tw(){return new ew("")}function nw(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function rw(e){return e.pieces_.length-e.pieceNum_}function iw(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ew(e.pieces_,t)}function sw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function aw(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ew(t,0)}function lw(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ew)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ew(n,0)}function cw(e){return e.pieceNum_>=e.pieces_.length}function uw(e,t){const n=nw(e),r=nw(t);if(null===n)return t;if(n===r)return uw(iw(e),iw(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function hw(e,t){const n=ow(e,0),r=ow(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=vv(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function dw(e,t){if(rw(e)!==rw(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function pw(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(rw(e)>rw(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class fw{constructor(e,t){this.errorPrefix_=t,this.parts_=ow(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=St(this.parts_[n]);mw(this)}}function mw(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gw(e))}function gw(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class yw extends Jv{static getInstance(){return new yw}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return Ae("visible"===e,"Unknown event type: "+e),[this.visible_]}}const vw=1e3;class ww extends Xv{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=ww.nextPersistentConnectionId_++,this.log_=hv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ot())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yw.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Zv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(pt(i)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Qe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,o=i.s;ww.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&mt(e,"w")){const n=gt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();fv(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=ft(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=ft(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):dv("Unrecognized action received from server: "+pt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vw),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ww.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Ae(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?uv("getToken() completed but was canceled"):(uv("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Yv(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{fv(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(dv){this.log_("Failed to get token: "+dv),s||(this.repoInfo_.nodeAdmin&&fv(dv),a())}}}interrupt(e){uv("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){uv("Resuming connection for reason: "+e),delete this.interruptReasons_[e],yt(this.interruptReasons_)&&(this.reconnectDelay_=vw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>_v(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ew(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){uv("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){uv("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ot()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Yy.replace(/\./g,"-")]=1,rt()?e["framework.cordova"]=1:st()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Zv.getInstance().currentlyOnline();return yt(this.interruptReasons_)&&e}}ww.nextPersistentConnectionId_=0,ww.nextConnectionId_=0;class bw{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new bw(e,t)}}class _w{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new bw(gv,e),r=new bw(gv,t);return 0!==this.compare(n,r)}minPost(){return bw.MIN}}let xw;class kw extends _w{static get __EMPTY_NODE(){return xw}static set __EMPTY_NODE(e){xw=e}compare(e,t){return vv(e.name,t.name)}isDefinedOn(e){throw je("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return bw.MIN}maxPost(){return new bw(yv,xw)}makePost(e,t){return Ae("string"===typeof e,"KeyIndex indexValue must always be a string."),new bw(e,xw)}toString(){return".key"}}const Cw=new kw;class Ew{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Nw{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Nw.RED,this.left=null!=r?r:Tw.EMPTY_NODE,this.right=null!=i?i:Tw.EMPTY_NODE}copy(e,t,n,r,i){return new Nw(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tw.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Tw.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Nw.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Nw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Nw.RED=!0,Nw.BLACK=!1;class Tw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tw.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Tw(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Nw.BLACK,null,null))}remove(e){return new Tw(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nw.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ew(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ew(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ew(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ew(this.root_,null,this.comparator_,!0,e)}}function Sw(e,t){return vv(e.name,t.name)}function Iw(e,t){return vv(e,t)}let Pw;Tw.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Nw(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Rw=function(e){return"number"===typeof e?"number:"+Cv(e):"string:"+e},Aw=function(e){if(e.isLeafNode()){const t=e.val();Ae("string"===typeof t||"number"===typeof t||"object"===typeof t&&mt(t,".sv"),"Priority must be a string or number.")}else Ae(e===Pw||e.isEmpty(),"priority of unexpected type.");Ae(e===Pw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let jw,Dw,Lw;class Ow{static set __childrenNodeConstructor(e){jw=e}static get __childrenNodeConstructor(){return jw}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ow.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ae(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Aw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ow(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Ow.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return cw(e)?this:".priority"===nw(e)?this.priorityNode_:Ow.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ow.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=nw(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ae(".priority"!==n||1===rw(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Ow.__childrenNodeConstructor.EMPTY_NODE.updateChild(iw(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Rw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Cv(this.value_):this.value_,this.lazyHash_=sv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ow.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ow.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Ow.VALUE_TYPE_ORDER.indexOf(t),i=Ow.VALUE_TYPE_ORDER.indexOf(n);return Ae(r>=0,"Unknown leaf type: "+t),Ae(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Ow.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Mw=new class extends _w{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?vv(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return bw.MIN}maxPost(){return new bw(yv,new Ow("[PRIORITY-POST]",Lw))}makePost(e,t){const n=Dw(e);return new bw(t,new Ow("[PRIORITY-POST]",n))}toString(){return".priority"}},Uw=Math.log(2);class Fw{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Uw,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Vw=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Nw(a,o.node,Nw.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Nw(a,o.node,Nw.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Nw(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Nw.BLACK):(a(r,Nw.BLACK),a(r,Nw.RED))}return s}(new Fw(e.length));return new Tw(r||t,s)};let zw;const Bw={};class qw{static get Default(){return Ae(Bw&&Mw,"ChildrenNode.ts has not been loaded"),zw=zw||new qw({".priority":Bw},{".priority":Mw}),zw}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=gt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Tw?t:null}hasIndex(e){return mt(this.indexSet_,e.toString())}addIndex(e,t){Ae(e!==Cw,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(bw.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Vw(n,e.getCompare()):Bw;const a=e.toString(),l={...this.indexSet_};l[a]=e;const c={...this.indexes_};return c[a]=s,new qw(c,l)}addToIndexes(e,t){const n=vt(this.indexes_,(n,r)=>{const i=gt(this.indexSet_,r);if(Ae(i,"Missing index implementation for "+r),n===Bw){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(bw.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Vw(n,i.getCompare())}return Bw}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new bw(e.name,r))),i.insert(e,e.node)}});return new qw(n,this.indexSet_)}removeFromIndexes(e,t){const n=vt(this.indexes_,n=>{if(n===Bw)return n;{const r=t.get(e.name);return r?n.remove(new bw(e.name,r)):n}});return new qw(n,this.indexSet_)}}let $w;class Ww{static get EMPTY_NODE(){return $w||($w=new Ww(new Tw(Iw),null,qw.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Aw(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$w}updatePriority(e){return this.children_.isEmpty()?this:new Ww(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?$w:t}}getChild(e){const t=nw(e);return null===t?this:this.getImmediateChild(t).getChild(iw(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ae(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new bw(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?$w:this.priorityNode_;return new Ww(r,s,i)}}updateChild(e,t){const n=nw(e);if(null===n)return t;{Ae(".priority"!==nw(e)||1===rw(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(iw(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Mw,(s,o)=>{t[s]=o.val(e),n++,i&&Ww.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Rw(this.getPriority().val())+":"),this.forEachChild(Mw,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":sv(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new bw(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new bw(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new bw(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,bw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,bw.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Hw?-1:0}withIndex(e){if(e===Cw||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ww(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Cw||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Mw),n=t.getIterator(Mw);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Cw?null:this.indexMap_.get(e.toString())}}Ww.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Hw=new class extends Ww{constructor(){super(new Tw(Iw),Ww.EMPTY_NODE,qw.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ww.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(bw,{MIN:{value:new bw(gv,Ww.EMPTY_NODE)},MAX:{value:new bw(yv,Hw)}}),kw.__EMPTY_NODE=Ww.EMPTY_NODE,Ow.__childrenNodeConstructor=Ww,Pw=Hw,function(e){Lw=e}(Hw);function Kw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ww.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ae(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Ow(e,Kw(t))}if(e instanceof Array){let n=Ww.EMPTY_NODE;return kv(e,(t,r)=>{if(mt(e,t)&&"."!==t.substring(0,1)){const e=Kw(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Kw(t))}{const n=[];let r=!1;if(kv(e,(e,t)=>{if("."!==e.substring(0,1)){const i=Kw(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new bw(e,i)))}}),0===n.length)return Ww.EMPTY_NODE;const i=Vw(n,Sw,e=>e.name,Iw);if(r){const e=Vw(n,Mw.getCompare());return new Ww(i,Kw(t),new qw({".priority":e},{".priority":Mw}))}return new Ww(i,Kw(t),qw.Default)}}!function(e){Dw=e}(Kw);class Gw extends _w{constructor(e){super(),this.indexPath_=e,Ae(!cw(e)&&".priority"!==nw(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?vv(e.name,t.name):i}makePost(e,t){const n=Kw(e),r=Ww.EMPTY_NODE.updateChild(this.indexPath_,n);return new bw(t,r)}maxPost(){const e=Ww.EMPTY_NODE.updateChild(this.indexPath_,Hw);return new bw(yv,e)}toString(){return ow(this.indexPath_,0).join("/")}}const Qw=new class extends _w{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?vv(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return bw.MIN}maxPost(){return bw.MAX}makePost(e,t){const n=Kw(e);return new bw(t,n)}toString(){return".value"}};function Yw(e){return{type:"value",snapshotNode:e}}function Xw(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Jw(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Zw(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class eb{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Jw(t,o)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Xw(t,n)):s.trackChildChange(Zw(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Mw,(e,r)=>{t.hasChild(e)||n.trackChildChange(Jw(e,r))}),t.isLeafNode()||t.forEachChild(Mw,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Zw(t,r,i))}else n.trackChildChange(Xw(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ww.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class tb{constructor(e){this.indexedFilter_=new eb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tb.getStartPost_(e),this.endPost_=tb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new bw(t,n))||(n=Ww.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Ww.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Ww.EMPTY_NODE);const i=this;return t.forEachChild(Mw,(e,t)=>{i.matches(new bw(e,t))||(r=r.updateImmediateChild(e,Ww.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class nb{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new tb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new bw(t,n))||(n=Ww.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Ww.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Ww.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Ww.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Ww.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Ae(o.numChildren()===this.limit_,"");const a=new bw(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Zw(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Jw(t,e));const n=o.updateImmediateChild(t,Ww.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Xw(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Jw(l.name,l.node)),i.trackChildChange(Xw(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Ww.EMPTY_NODE)):e}}class rb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mw}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gv}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mw}copy(){const e=new rb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ib(e,t){const n=e.copy();return n.index_=t,n}function sb(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Mw?n="$priority":e.index_===Qw?n="$value":e.index_===Cw?n="$key":(Ae(e.index_ instanceof Gw,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=pt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=pt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+pt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=pt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+pt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function ob(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Mw&&(t.i=e.index_.toString()),t}class ab extends Xv{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=hv("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=ab.getListenId_(e,n),o={};this.listens_[s]=o;const a=sb(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),gt(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=ab.getListenId_(e,t);delete this.listens_[n]}get(e){const t=sb(e._queryParams),n=e._path.toString(),r=new Qe;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_t(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=dt(a.responseText)}catch(e){fv("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&fv("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class lb{constructor(){this.rootNode_=Ww.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cb(){return{value:null,children:new Map}}function ub(e,t,n){if(cw(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=nw(t);e.children.has(r)||e.children.set(r,cb());ub(e.children.get(r),t=iw(t),n)}}function hb(e,t){if(cw(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Mw,(t,n)=>{ub(e,new ew(t),n)}),hb(e,t)}}if(e.children.size>0){const n=nw(t);if(t=iw(t),e.children.has(n)){hb(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function db(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{db(r,new ew(t.toString()+"/"+e),n)})}class pb{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&kv(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class fb{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pb(e);const n=1e4+2e4*Math.random();Sv(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;kv(e,(e,r)=>{r>0&&mt(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Sv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var mb;function gb(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(mb||(mb={}));class yb{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=mb.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(cw(this.path)){if(null!=this.affectedTree.value)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ew(e));return new yb(tw(),t,this.revert)}}return Ae(nw(this.path)===e,"operationForChild called for unrelated child."),new yb(iw(this.path),this.affectedTree,this.revert)}}class vb{constructor(e,t){this.source=e,this.path=t,this.type=mb.LISTEN_COMPLETE}operationForChild(e){return cw(this.path)?new vb(this.source,tw()):new vb(this.source,iw(this.path))}}class wb{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=mb.OVERWRITE}operationForChild(e){return cw(this.path)?new wb(this.source,tw(),this.snap.getImmediateChild(e)):new wb(this.source,iw(this.path),this.snap)}}class bb{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=mb.MERGE}operationForChild(e){if(cw(this.path)){const t=this.children.subtree(new ew(e));return t.isEmpty()?null:t.value?new wb(this.source,tw(),t.value):new bb(this.source,tw(),t)}return Ae(nw(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bb(this.source,iw(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _b{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cw(e))return this.isFullyInitialized()&&!this.filtered_;const t=nw(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class xb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kb(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw je("Should only compare child_ events.");const r=new bw(t.childName,t.snapshotNode),i=new bw(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Cb(e,t){return{eventCache:e,serverCache:t}}function Eb(e,t,n,r){return Cb(new _b(t,n,r),e.serverCache)}function Nb(e,t,n,r){return Cb(e.eventCache,new _b(t,n,r))}function Tb(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Sb(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Ib;class Pb{static fromObject(e){let t=new Pb(null);return kv(e,(e,n)=>{t=t.set(new ew(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Ib||(Ib=new Tw(wv)),Ib);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:tw(),value:this.value};if(cw(e))return null;{const n=nw(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(iw(e),t);if(null!=i){return{path:lw(new ew(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(cw(e))return this;{const t=nw(e),n=this.children.get(t);return null!==n?n.subtree(iw(e)):new Pb(null)}}set(e,t){if(cw(e))return new Pb(t,this.children);{const n=nw(e),r=(this.children.get(n)||new Pb(null)).set(iw(e),t),i=this.children.insert(n,r);return new Pb(this.value,i)}}remove(e){if(cw(e))return this.children.isEmpty()?new Pb(null):new Pb(null,this.children);{const t=nw(e),n=this.children.get(t);if(n){const r=n.remove(iw(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Pb(null):new Pb(this.value,i)}return this}}get(e){if(cw(e))return this.value;{const t=nw(e),n=this.children.get(t);return n?n.get(iw(e)):null}}setTree(e,t){if(cw(e))return t;{const n=nw(e),r=(this.children.get(n)||new Pb(null)).setTree(iw(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Pb(this.value,i)}}fold(e){return this.fold_(tw(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(lw(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,tw(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(cw(e))return null;{const r=nw(e),i=this.children.get(r);return i?i.findOnPath_(iw(e),lw(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,tw(),t)}foreachOnPath_(e,t,n){if(cw(e))return this;{this.value&&n(t,this.value);const r=nw(e),i=this.children.get(r);return i?i.foreachOnPath_(iw(e),lw(t,r),n):new Pb(null)}}foreach(e){this.foreach_(tw(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(lw(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Rb{constructor(e){this.writeTree_=e}static empty(){return new Rb(new Pb(null))}}function Ab(e,t,n){if(cw(t))return new Rb(new Pb(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=uw(i,t);return s=s.updateChild(o,n),new Rb(e.writeTree_.set(i,s))}{const r=new Pb(n),i=e.writeTree_.setTree(t,r);return new Rb(i)}}}function jb(e,t,n){let r=e;return kv(n,(e,n)=>{r=Ab(r,lw(t,e),n)}),r}function Db(e,t){if(cw(t))return Rb.empty();{const n=e.writeTree_.setTree(t,new Pb(null));return new Rb(n)}}function Lb(e,t){return null!=Ob(e,t)}function Ob(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(uw(n.path,t)):null}function Mb(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Mw,(e,n)=>{t.push(new bw(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new bw(e,n.value))}),t}function Ub(e,t){if(cw(t))return e;{const n=Ob(e,t);return new Rb(null!=n?new Pb(n):e.writeTree_.subtree(t))}}function Fb(e){return e.writeTree_.isEmpty()}function Vb(e,t){return zb(tw(),e.writeTree_,t)}function zb(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?(Ae(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=zb(lw(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(lw(e,".priority"),r)),n}}function Bb(e,t){return t_(t,e)}function qb(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);Ae(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&$b(t,r.path)?i=!1:pw(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=Hb(e.allWrites,Wb,tw()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Db(e.visibleWrites,r.path);else{kv(r.children,t=>{e.visibleWrites=Db(e.visibleWrites,lw(r.path,t))})}return!0}return!1}function $b(e,t){if(e.snap)return pw(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&pw(lw(e.path,n),t))return!0;return!1}function Wb(e){return e.visible}function Hb(e,t,n){let r=Rb.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)pw(n,e)?(t=uw(n,e),r=Ab(r,t,s.snap)):pw(e,n)&&(t=uw(e,n),r=Ab(r,tw(),s.snap.getChild(t)));else{if(!s.children)throw je("WriteRecord should have .snap or .children");if(pw(n,e))t=uw(n,e),r=jb(r,t,s.children);else if(pw(e,n))if(t=uw(e,n),cw(t))r=jb(r,tw(),s.children);else{const e=gt(s.children,nw(t));if(e){const n=e.getChild(iw(t));r=Ab(r,tw(),n)}}}}}return r}function Kb(e,t,n,r,i){if(r||i){const s=Ub(e.visibleWrites,t);if(!i&&Fb(s))return n;if(i||null!=n||Lb(s,tw())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(pw(e.path,t)||pw(t,e.path))};return Vb(Hb(e.allWrites,s,t),n||Ww.EMPTY_NODE)}return null}{const r=Ob(e.visibleWrites,t);if(null!=r)return r;{const r=Ub(e.visibleWrites,t);if(Fb(r))return n;if(null!=n||Lb(r,tw())){return Vb(r,n||Ww.EMPTY_NODE)}return null}}}function Gb(e,t,n,r){return Kb(e.writeTree,e.treePath,t,n,r)}function Qb(e,t){return function(e,t,n){let r=Ww.EMPTY_NODE;const i=Ob(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Mw,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=Ub(e.visibleWrites,t);return n.forEachChild(Mw,(e,t)=>{const n=Vb(Ub(i,new ew(e)),t);r=r.updateImmediateChild(e,n)}),Mb(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return Mb(Ub(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function Yb(e,t,n,r){return function(e,t,n,r,i){Ae(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=lw(t,n);if(Lb(e.visibleWrites,s))return null;{const t=Ub(e.visibleWrites,s);return Fb(t)?i.getChild(n):Vb(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Xb(e,t){return function(e,t){return Ob(e.visibleWrites,t)}(e.writeTree,lw(e.treePath,t))}function Jb(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Ub(e.visibleWrites,t),c=Ob(l,tw());if(null!=c)a=c;else{if(null==n)return[];a=Vb(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Zb(e,t,n){return function(e,t,n,r){const i=lw(t,n),s=Ob(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Vb(Ub(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function e_(e,t){return t_(lw(e.treePath,t),e.writeTree)}function t_(e,t){return{treePath:e,writeTree:t}}class n_{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ae("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ae(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Zw(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Jw(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Xw(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw je("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Zw(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const r_=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class i_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new _b(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zb(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sb(this.viewCache_),i=Jb(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function s_(e,t,n,r,i){const s=new n_;let o,a;if(n.type===mb.OVERWRITE){const l=n;l.source.fromUser?o=l_(e,t,l.path,l.snap,r,i,s):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!cw(l.path),o=a_(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===mb.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=lw(n,r);c_(t,nw(c))&&(a=l_(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=lw(n,r);c_(t,nw(c))||(a=l_(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=h_(e,t,l.path,l.children,r,i,a,s))}else if(n.type===mb.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Xb(r,n))return t;{const a=new i_(r,t,i),l=t.eventCache.getNode();let c;if(cw(n)||".priority"===nw(n)){let n;if(t.serverCache.isFullyInitialized())n=Gb(r,Sb(t));else{const e=t.serverCache.getNode();Ae(e instanceof Ww,"serverChildren would be complete if leaf node"),n=Qb(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=nw(n);let u=Zb(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,iw(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Ww.EMPTY_NODE,iw(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Gb(r,Sb(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Xb(r,tw()),Eb(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Xb(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(cw(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return a_(e,t,n,l.getNode().getChild(n),i,s,a,o);if(cw(n)){let r=new Pb(null);return l.getNode().forEachChild(Cw,(e,t)=>{r=r.set(new ew(e),t)}),h_(e,t,n,r,i,s,a,o)}return t}{let c=new Pb(null);return r.foreach((e,t)=>{const r=lw(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),h_(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==mb.LISTEN_COMPLETE)throw je("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Nb(t,s.getNode(),s.isFullyInitialized()||cw(n),s.isFiltered());return o_(e,o,n,r,r_,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Tb(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Yw(Tb(t)))}}(t,o,l),{viewCache:o,changes:l}}function o_(e,t,n,r,i,s){const o=t.eventCache;if(null!=Xb(r,n))return t;{let a,l;if(cw(n))if(Ae(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Sb(t),i=Qb(r,n instanceof Ww?n:Ww.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Gb(r,Sb(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=nw(n);if(".priority"===c){Ae(1===rw(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Yb(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=iw(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Yb(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=Zb(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Eb(t,a,o.isFullyInitialized()||cw(n),e.filter.filtersNodes())}}function a_(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(cw(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=nw(n);if(!l.isCompleteForPath(n)&&rw(n)>1)return t;const i=iw(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,r_,null)}const h=Nb(t,c,l.isFullyInitialized()||cw(n),u.filtersNodes());return o_(e,h,n,i,new i_(i,h,s),a)}function l_(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new i_(i,t,s);if(cw(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Eb(t,c,!0,e.filter.filtersNodes());else{const i=nw(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Eb(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=iw(n),c=a.getNode().getImmediateChild(i);let h;if(cw(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===sw(s)&&e.getChild(aw(s)).isEmpty()?e:e.updateChild(s,r):Ww.EMPTY_NODE}if(c.equals(h))l=t;else{l=Eb(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function c_(e,t){return e.eventCache.isCompleteForChild(t)}function u_(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function h_(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=cw(n)?r:new Pb(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=u_(0,t.serverCache.getNode().getImmediateChild(n),r);c=a_(e,c,new ew(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=u_(0,t.serverCache.getNode().getImmediateChild(n),r);c=a_(e,c,new ew(n),l,i,s,o,a)}}),c}class d_{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new eb(n.getIndex()),i=(s=n).loadsAllData()?new eb(s.getIndex()):s.hasLimit()?new nb(s):new tb(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Ww.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Ww.EMPTY_NODE,a.getNode(),null),u=new _b(l,o.isFullyInitialized(),r.filtersNodes()),h=new _b(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Cb(h,u),this.eventGenerator_=new xb(this.query_)}get query(){return this.query_}}function p_(e,t){const n=Sb(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!cw(t)&&!n.getImmediateChild(nw(t)).isEmpty())?n.getChild(t):null}function f_(e){return 0===e.eventRegistrations_.length}function m_(e,t,n){const r=[];if(n){Ae(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function g_(e,t,n,r){t.type===mb.MERGE&&null!==t.source.queryId&&(Ae(Sb(e.viewCache_),"We should always have a full cache before handling merges"),Ae(Tb(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=s_(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Ae(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Ae(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Ae(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,y_(e,s.changes,s.viewCache.eventCache.getNode(),null)}function y_(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),kb(e,i,"child_removed",t,r,n),kb(e,i,"child_added",t,r,n),kb(e,i,"child_moved",s,r,n),kb(e,i,"child_changed",t,r,n),kb(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let v_,w_;class b_{constructor(){this.views=new Map}}function __(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Ae(null!=s,"SyncTree gave us an op for an invalid query."),g_(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(g_(s,t,n,r));return i}}function x_(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Gb(n,i?r:null),s=!1;e?s=!0:r instanceof Ww?(e=Qb(n,r),s=!1):(e=Ww.EMPTY_NODE,s=!1);const o=Cb(new _b(e,s,!1),new _b(r,i,!1));return new d_(t,o)}return o}function k_(e,t,n,r,i,s){const o=x_(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Mw,(e,t)=>{r.push(Xw(e,t))});return n.isFullyInitialized()&&r.push(Yw(n.getNode())),y_(e,r,n.getNode(),t)}(o,n)}function C_(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=I_(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(m_(c,n,r)),f_(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(m_(t,n,r)),f_(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!I_(e)&&s.push(new(Ae(v_,"Reference.ts has not been loaded"),v_)(t._repo,t._path)),{removed:s,events:o}}function E_(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function N_(e,t){let n=null;for(const r of e.views.values())n=n||p_(r,t);return n}function T_(e,t){if(t._queryParams.loadsAllData())return P_(e);{const n=t._queryIdentifier;return e.views.get(n)}}function S_(e,t){return null!=T_(e,t)}function I_(e){return null!=P_(e)}function P_(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let R_=1;class A_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pb(null),this.pendingWriteTree_={visibleWrites:Rb.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function j_(e,t,n,r,i){return function(e,t,n,r,i){Ae(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ab(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?B_(e,new wb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function D_(e,t,n,r){!function(e,t,n,r){Ae(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=jb(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Pb.fromObject(n);return B_(e,new bb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function L_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(qb(e.pendingWriteTree_,t)){let t=new Pb(null);return null!=r.snap?t=t.set(tw(),!0):kv(r.children,e=>{t=t.set(new ew(e),!0)}),B_(e,new yb(r.path,t,n))}return[]}function O_(e,t,n){return B_(e,new wb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function M_(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||S_(o,t))){const l=C_(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>I_(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&I_(t)){return[P_(t)]}{let e=[];return t&&(e=E_(t)),kv(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=W_(e,r);e.listenProvider_.startListening(X_(i),H_(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(X_(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(K_(t));e.listenProvider_.stopListening(X_(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=K_(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function U_(e,t,n,r){const i=G_(e,r);if(null!=i){const r=Q_(i),s=r.path,o=r.queryId,a=uw(s,t);return Y_(e,s,new wb(gb(o),a,n))}return[]}function F_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=uw(e,i);s=s||N_(t,n),o=o||I_(t)});let a,l=e.syncPointTree_.get(i);if(l?(o=o||I_(l),s=s||N_(l,tw())):(l=new b_,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=Ww.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=N_(t,tw());n&&(s=s.updateImmediateChild(e,n))})}const c=S_(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=K_(t);Ae(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=R_++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=k_(l,t,n,Bb(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=T_(l,t);u=u.concat(function(e,t,n){const r=t._path,i=H_(e,t),s=W_(e,n),o=e.listenProvider_.startListening(X_(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Ae(!I_(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!cw(e)&&t&&I_(t))return[P_(t).query];{let e=[];return t&&(e=e.concat(E_(t).map(e=>e.query))),kv(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(X_(r),H_(e,r))}}return o}(e,t,n))}return u}function V_(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=N_(n,uw(e,t));if(r)return r});return Kb(r,t,i,n,!0)}function z_(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=uw(e,n);r=r||N_(t,i)});let i=e.syncPointTree_.get(n);i?r=r||N_(i,tw()):(i=new b_,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new _b(r,!0,!1):null;return function(e){return Tb(e.viewCache_)}(x_(i,t,Bb(e.pendingWriteTree_,t._path),s?o.getNode():Ww.EMPTY_NODE,s))}function B_(e,t){return q_(t,e.syncPointTree_,null,Bb(e.pendingWriteTree_,tw()))}function q_(e,t,n,r){if(cw(e.path))return $_(e,t,n,r);{const i=t.get(tw());null==n&&null!=i&&(n=N_(i,tw()));let s=[];const o=nw(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=e_(r,o);s=s.concat(q_(a,l,e,t))}return i&&(s=s.concat(__(i,e,r,n))),s}}function $_(e,t,n,r){const i=t.get(tw());null==n&&null!=i&&(n=N_(i,tw()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=e_(r,t),l=e.operationForChild(t);l&&(s=s.concat($_(l,i,o,a)))}),i&&(s=s.concat(__(i,e,r,n))),s}function W_(e,t){const n=t.query,r=H_(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ww.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=G_(e,n);if(r){const n=Q_(r),i=n.path,s=n.queryId,o=uw(i,t);return Y_(e,i,new vb(gb(s),o))}return[]}(e,n._path,r):function(e,t){return B_(e,new vb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return M_(e,n,null,r)}}}}function H_(e,t){const n=K_(t);return e.queryToTagMap.get(n)}function K_(e){return e._path.toString()+"$"+e._queryIdentifier}function G_(e,t){return e.tagToQueryMap.get(t)}function Q_(e){const t=e.indexOf("$");return Ae(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ew(e.substr(0,t))}}function Y_(e,t,n){const r=e.syncPointTree_.get(t);Ae(r,"Missing sync point for query tag that we're tracking");return __(r,n,Bb(e.pendingWriteTree_,t),null)}function X_(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ae(w_,"Reference.ts has not been loaded"),w_)(e._repo,e._path):e}class J_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new J_(t)}node(){return this.node_}}class Z_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lw(this.path_,e);return new Z_(this.syncTree_,t)}node(){return V_(this.syncTree_,this.path_)}}const ex=function(e,t,n){return e&&"object"===typeof e?(Ae(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?tx(e[".sv"],t,n):"object"===typeof e[".sv"]?nx(e[".sv"],t):void Ae(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},tx=function(e,t,n){if("timestamp"===e)return n.timestamp;Ae(!1,"Unexpected server value: "+e)},nx=function(e,t,n){e.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Ae(!1,"Unexpected increment value: "+r);const i=t.node();if(Ae(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},rx=function(e,t,n,r){return sx(t,new Z_(n,e),r)},ix=function(e,t,n){return sx(e,new J_(t),n)};function sx(e,t,n){const r=e.getPriority().val(),i=ex(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=ex(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Ow(s,Kw(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Ow(i))),r.forEachChild(Mw,(e,r)=>{const i=sx(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function ax(e,t){let n=t instanceof ew?t:new ew(t),r=e,i=nw(n);for(;null!==i;){const e=gt(r.node.children,i)||{children:{},childCount:0};r=new ox(i,r,e),n=iw(n),i=nw(n)}return r}function lx(e){return e.node.value}function cx(e,t){e.node.value=t,fx(e)}function ux(e){return e.node.childCount>0}function hx(e,t){kv(e.node.children,(n,r)=>{t(new ox(n,e,r))})}function dx(e,t,n,r){n&&!r&&t(e),hx(e,e=>{dx(e,t,!0,r)}),n&&r&&t(e)}function px(e){return new ew(null===e.parent?e.name:px(e.parent)+"/"+e.name)}function fx(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===lx(e)&&!ux(e)}(n),i=mt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,fx(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,fx(e))}(e.parent,e.name,e)}const mx=/[\[\].#$\/\u0000-\u001F\u007F]/,gx=/[\[\].#$\u0000-\u001F\u007F]/,yx=10485760,vx=function(e){return"string"===typeof e&&0!==e.length&&!mx.test(e)},wx=function(e){return"string"===typeof e&&0!==e.length&&!gx.test(e)},bx=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!mv(e)||e&&"object"===typeof e&&mt(e,".sv")},_x=function(e,t,n,r){r&&void 0===t||xx(Tt(e,"value"),t,n)},xx=function(e,t,n){const r=n instanceof ew?new fw(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+gw(r));if("function"===typeof t)throw new Error(e+"contains a function "+gw(r)+" with contents = "+t.toString());if(mv(t))throw new Error(e+"contains "+t.toString()+" "+gw(r));if("string"===typeof t&&t.length>yx/3&&St(t)>yx)throw new Error(e+"contains a string greater than "+yx+" utf8 bytes "+gw(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(kv(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!vx(t)))throw new Error(e+" contains an invalid key ("+t+") "+gw(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=St(t),mw(e)}(r,t),xx(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=St(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+gw(r)+" in addition to actual children.")}},kx=function(e,t,n,r){if(r&&void 0===t)return;const i=Tt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];kv(t,(e,t)=>{const r=new ew(e);if(xx(i,t,lw(n,r)),".priority"===sw(r)&&!bx(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=ow(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!vx(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(hw);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&pw(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Cx=function(e,t,n){if(!n||void 0!==t){if(mv(t))throw new Error(Tt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!bx(t))throw new Error(Tt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ex=function(e,t,n,r){if((!r||void 0!==n)&&!wx(n))throw new Error(Tt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nx=function(e,t){if(".info"===nw(t))throw new Error(e+" failed = Can't modify data under /.info/")},Tx=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!vx(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),wx(e)}(n))throw new Error(Tt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Sx{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ix(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||dw(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Px(e,t,n){Ix(e,n),Ax(e,e=>dw(e,t))}function Rx(e,t,n){Ix(e,n),Ax(e,e=>pw(e,t)||pw(t,e))}function Ax(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(jx(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function jx(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();av&&uv("event: "+n.toString()),Tv(r)}}}const Dx="repo_interrupt";class Lx{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cb(),this.transactionQueueTree_=new ox,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ox(e,t,n){if(e.stats_=Bv(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ab(e.repoInfo_,(t,n,r,i)=>{Fx(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Vx(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ww(e.repoInfo_,t,(t,n,r,i)=>{Fx(e,t,n,r,i)},t=>{Vx(e,t)},t=>{!function(e,t){kv(t,(t,n)=>{zx(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return zv[n]||(zv[n]=t()),zv[n]}(e.repoInfo_,()=>new fb(e.stats_,e.server_)),e.infoData_=new lb,e.infoSyncTree_=new A_({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=O_(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),zx(e,"connected",!1),e.serverSyncTree_=new A_({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);Rx(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Mx(e){const t=e.infoData_.getNode(new ew(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ux(e){return(t=(t={timestamp:Mx(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Fx(e,t,n,r,i){e.dataUpdateCount++;const s=new ew(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=vt(n,e=>Kw(e));o=function(e,t,n,r){const i=G_(e,r);if(i){const r=Q_(i),s=r.path,o=r.queryId,a=uw(s,t),l=Pb.fromObject(n);return Y_(e,s,new bb(gb(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Kw(n);o=U_(e.serverSyncTree_,s,t,i)}else if(r){const t=vt(n,e=>Kw(e));o=function(e,t,n){const r=Pb.fromObject(n);return B_(e,new bb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Kw(n);o=O_(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=Jx(e,s)),Rx(e.eventQueue_,a,o)}function Vx(e,t){zx(e,"connected",t),!1===t&&function(e){Gx(e,"onDisconnectEvents");const t=Ux(e),n=cb();db(e.onDisconnect_,tw(),(r,i)=>{const s=rx(r,i,e.serverSyncTree_,t);ub(n,r,s)});let r=[];db(n,tw(),(t,n)=>{r=r.concat(O_(e.serverSyncTree_,t,n));const i=rk(e,t);Jx(e,i)}),e.onDisconnect_=cb(),Rx(e.eventQueue_,tw(),r)}(e)}function zx(e,t,n){const r=new ew("/.info/"+t),i=Kw(n);e.infoData_.updateSnapshot(r,i);const s=O_(e.infoSyncTree_,r,i);Rx(e.eventQueue_,r,s)}function Bx(e){return e.nextWriteId_++}function qx(e,t,n,r,i){Gx(e,"set",{path:t.toString(),value:n,priority:r});const s=Ux(e),o=Kw(n,r),a=V_(e.serverSyncTree_,t),l=ix(o,a,s),c=Bx(e),u=j_(e.serverSyncTree_,t,l,c,!0);Ix(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||fv("set at "+t+" failed: "+n);const o=L_(e.serverSyncTree_,c,!s);Rx(e.eventQueue_,t,o),Qx(e,i,n,r)});const h=rk(e,t);Jx(e,h),Rx(e.eventQueue_,h,[])}function $x(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&hb(e.onDisconnect_,t),Qx(e,n,r,i)})}function Wx(e,t,n,r){const i=Kw(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,s)=>{"ok"===n&&ub(e.onDisconnect_,t,i),Qx(e,r,n,s)})}function Hx(e,t,n){let r;r=".info"===nw(t._path)?M_(e.infoSyncTree_,t,n):M_(e.serverSyncTree_,t,n),Px(e.eventQueue_,t._path,r)}function Kx(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Dx)}function Gx(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];uv(t,...r)}function Qx(e,t,n,r){t&&Tv(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function Yx(e,t,n){return V_(e.serverSyncTree_,t,n)||Ww.EMPTY_NODE}function Xx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||nk(e,t),lx(t)){const n=ek(e,t);Ae(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=Yx(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Ae(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=uw(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{Gx(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(L_(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();nk(e,ax(e.transactionQueueTree_,t)),Xx(e,e.transactionQueueTree_),Rx(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Tv(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{fv("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Jx(e,t)}},o)}(e,px(t),n)}else ux(t)&&hx(t,t=>{Xx(e,t)})}function Jx(e,t){const n=Zx(e,t),r=px(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=uw(n,s.path);let c,u=!1;if(Ae(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,i=i.concat(L_(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",i=i.concat(L_(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Yx(e,s.path,o);s.currentInputSnapshot=n;const r=t[a].update(n.val());if(void 0!==r){xx("transaction failed: Data returned ",r,s.path);let t=Kw(r);"object"===typeof r&&null!=r&&mt(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=Ux(e),c=ix(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Bx(e),o.splice(o.indexOf(a),1),i=i.concat(j_(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(L_(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",i=i.concat(L_(e.serverSyncTree_,s.currentWriteId,!0))}Rx(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(c),!1,null))))}nk(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Tv(r[a]);Xx(e,e.transactionQueueTree_)}(e,ek(e,n),r),r}function Zx(e,t){let n,r=e.transactionQueueTree_;for(n=nw(t);null!==n&&void 0===lx(r);)r=ax(r,n),n=nw(t=iw(t));return r}function ek(e,t){const n=[];return tk(e,t,n),n.sort((e,t)=>e.order-t.order),n}function tk(e,t,n){const r=lx(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);hx(t,t=>{tk(e,t,n)})}function nk(e,t){const n=lx(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,cx(t,n.length>0?n:void 0)}hx(t,t=>{nk(e,t)})}function rk(e,t){const n=px(Zx(e,t)),r=ax(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{ik(e,t)}),ik(e,r),dx(r,t=>{ik(e,t)}),n}function ik(e,t){const n=lx(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ae(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Ae(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(L_(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?cx(t,void 0):n.length=s+1,Rx(e.eventQueue_,px(t),i);for(let e=0;e<r.length;e++)Tv(r[e])}}const sk=function(e,t){const n=ok(e),r=n.namespace;"firebase.com"===n.domain&&pv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||pv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Mv(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ew(n.pathString)}},ok=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fv(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},ak="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lk=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ak.charAt(n%64),n=Math.floor(n/64);Ae(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=ak.charAt(t[i]);return Ae(20===o.length,"nextPushId: Length should be 20."),o}}();class ck{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pt(this.snapshot.exportVal())}}class uk{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class hk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class dk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Qe;return $x(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Nx("OnDisconnect.remove",this._path);const e=new Qe;return Wx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Nx("OnDisconnect.set",this._path),_x("OnDisconnect.set",e,this._path,!1);const t=new Qe;return Wx(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Nx("OnDisconnect.setWithPriority",this._path),_x("OnDisconnect.setWithPriority",e,this._path,!1),Cx("OnDisconnect.setWithPriority",t,!1);const n=new Qe;return function(e,t,n,r,i){const s=Kw(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,r)=>{"ok"===n&&ub(e.onDisconnect_,t,s),Qx(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){Nx("OnDisconnect.update",this._path),kx("OnDisconnect.update",e,this._path,!1);const t=new Qe;return function(e,t,n,r){if(yt(n))return uv("onDisconnect().update() called with empty data.  Don't do anything."),void Qx(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&kv(n,(n,r)=>{const i=Kw(r);ub(e.onDisconnect_,lw(t,n),i)}),Qx(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class pk{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return cw(this._path)?null:sw(this._path)}get ref(){return new gk(this._repo,this._path)}get _queryIdentifier(){const e=ob(this._queryParams),t=_v(e);return"{}"===t?"default":t}get _queryObject(){return ob(this._queryParams)}isEqual(e){if(!((e=It(e))instanceof pk))return!1;const t=this._repo===e._repo,n=dw(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function fk(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function mk(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Cw){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==gv)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==yv)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Mw){if(null!=t&&!bx(t)||null!=n&&!bx(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ae(e.getIndex()instanceof Gw||e.getIndex()===Qw,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class gk extends pk{constructor(e,t){super(e,t,new rb,!1)}get parent(){const e=aw(this._path);return null===e?null:new gk(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class yk{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ew(e),n=wk(this.ref,e);return new yk(this._node.getChild(t),n,Mw)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new yk(n,wk(this.ref,t),Mw)))}hasChild(e){const t=new ew(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vk(e,t){return(e=It(e))._checkNotDeleted("ref"),void 0!==t?wk(e._root,t):e._root}function wk(e,t){var n,r,i,s;return null===nw((e=It(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ex(n,r,i,s)):Ex("child","path",t,!1),new gk(e._repo,lw(e._path,t))}function bk(e){return e=It(e),new dk(e._repo,e._path)}function _k(e,t){e=It(e),Nx("push",e._path),_x("push",t,e._path,!0);const n=Mx(e._repo),r=lk(n),i=wk(e,r),s=wk(e,r);let o;return o=null!=t?xk(s,t).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function xk(e,t){e=It(e),Nx("set",e._path),_x("set",t,e._path,!1);const n=new Qe;return qx(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function kk(e,t){kx("update",t,e._path,!1);const n=new Qe;return function(e,t,n,r){Gx(e,"update",{path:t.toString(),value:n});let i=!0;const s=Ux(e),o={};if(kv(n,(n,r)=>{i=!1,o[n]=rx(lw(t,n),Kw(r),e.serverSyncTree_,s)}),i)uv("update() called with empty data.  Don't do anything."),Qx(0,r,"ok",void 0);else{const i=Bx(e),s=D_(e.serverSyncTree_,t,o,i);Ix(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||fv("update at "+t+" failed: "+n);const a=L_(e.serverSyncTree_,i,!o),l=a.length>0?Jx(e,t):t;Rx(e.eventQueue_,l,a),Qx(0,r,n,s)}),kv(n,n=>{const r=rk(e,lw(t,n));Jx(e,r)}),Rx(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function Ck(e){e=It(e);const t=new hk(()=>{}),n=new Ek(t);return function(e,t,n){const r=z_(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(r=>{const i=Kw(r).withIndex(t._queryParams.getIndex());let s;if(F_(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=O_(e.serverSyncTree_,t._path,i);else{const n=H_(e.serverSyncTree_,t);s=U_(e.serverSyncTree_,t._path,i,n)}return Rx(e.eventQueue_,t._path,s),M_(e.serverSyncTree_,t,n,null,!0),i},n=>(Gx(e,"get for query "+pt(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new yk(t,new gk(e._repo,e._path),e._queryParams.getIndex()))}class Ek{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new ck("value",this,new yk(e.snapshotNode,new gk(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uk(this,e,t):null}matches(e){return e instanceof Ek&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Nk{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uk(this,e,t):null}createEvent(e,t){Ae(null!=e.childName,"Child events should have a childName.");const n=wk(new gk(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new ck(e.type,this,new yk(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Nk&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Tk(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Hx(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new hk(n,s||void 0),a="value"===t?new Ek(o):new Nk(t,o);return function(e,t,n){let r;r=".info"===nw(t._path)?F_(e.infoSyncTree_,t,n):F_(e.serverSyncTree_,t,n),Px(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>Hx(e._repo,e,a)}function Sk(e,t,n,r){return Tk(e,"value",t,n,r)}function Ik(e,t,n){let r=null;const i=n?new hk(n):null;"value"===t?r=new Ek(i):t&&(r=new Nk(t,i)),Hx(e._repo,e,r)}class Pk{}class Rk extends Pk{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pk(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class Ak extends Pk{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){fk(e,"orderByChild");const t=new ew(this._path);if(cw(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Gw(t),r=ib(e._queryParams,n);return mk(r),new pk(e._repo,e._path,r,!0)}}!function(e){Ae(!v_,"__referenceConstructor has already been defined"),v_=e}(gk),function(e){Ae(!w_,"__referenceConstructor has already been defined"),w_=e}(gk);const jk={};let Dk=!1;function Lk(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||pv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),uv("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=sk(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/Catcher",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=sk(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Rv(Rv.OWNER):new Pv(e.name,e.options,t);Tx("Invalid Firebase Database URL",l),cw(l.path)||pv("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=jk[t.name];i||(i={},jk[t.name]=i);let s=i[e.toURLString()];s&&pv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Lx(e,Dk,n,r),i[e.toURLString()]=s,s}(c,e,u,new Iv(e,n));return new Ok(h,e)}class Ok{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Ox(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gk(this._repo,tw())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=jk[t];n&&n[e.key]===e||pv(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Kx(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pv("Cannot call "+e+" on a deleted database.")}}const Mk={".sv":"timestamp"};function Uk(){return Mk}ww.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ww.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Xy(Wn),Vn(new Pt("database",(e,t)=>{let{instanceIdentifier:n}=t;return Lk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),Gn(Gy,Qy,e),Gn(Gy,Qy,"esm2020")}();const Fk=Hn({apiKey:"AIzaSyAZmVR8uK8qkHlnJ8FU6BFRW4V-vxXSS6I",authDomain:"catcher-26e1d.firebaseapp.com",databaseURL:"https://catcher-26e1d-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"catcher-26e1d",storageBucket:"catcher-26e1d.firebasestorage.app",messagingSenderId:"483645051805",appId:"1:483645051805:web:571cfa24ef6ceba1601574",measurementId:"G-5E3LM7QF00"}),Vk=function(e,t){const n="object"==typeof e?e:Kn(),r="string"==typeof e?e:t||tc,i=zn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=He("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=La(e,ym);const i=Ye(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&(Xe(`https://${a}`),tt("Firestore",!0)),s.host!==fm&&s.host!==a&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!wt(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ko.MOCK_USER;else{t=Je(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new oa(sa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ko(i)}e._authCredentials=new ua(new la(t,n))}}(i,...e)}return i}(Fk),zk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn(),t=arguments.length>1?arguments[1]:void 0;const n=zn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=He("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=It(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&wt(r,s.repoInfo_.emulatorOptions))return;pv("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&pv('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Rv(Rv.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Je(r.mockUserToken,e.app.options.projectId);o=new Rv(t)}Ye(t)&&(Xe(t),tt("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=Ye(t.substring(0,i));e.repoInfo_=new Mv(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}(n,...e)}return n}(Fk),Bk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn();const t=zn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=zn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(wt(n.getOptions(),t??{}))return e;ur(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ko,persistence:[As,ds,ys]}),r=Ge("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>To)return;const r=t?.token;So!==r&&(So=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){It(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){It(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=We("auth");return s&&Ri(n,`http://${s}`),n}(Fk),qk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn(),t=arguments.length>1?arguments[1]:void 0;e=It(e);const n=zn(e,qy).getImmediate({identifier:t}),r=He("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`;const i=Ye(t);i&&(Xe(`https://${e.host}/b`),tt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:Je(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Fk);var $k=n(579);const Wk=(0,i.createContext)(),Hk=()=>{const e=(0,i.useContext)(Wk);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Kk=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{console.log("AuthProvider: \u521d\u59cb\u5316 Firebase \u8a8d\u8b49\u76e3\u807d\u5668");let e=!0;const t=setTimeout(()=>{console.warn("AuthProvider: \u8a8d\u8b49\u8f09\u5165\u8d85\u6642\uff0c\u8a2d\u7f6e\u9810\u8a2d\u7528\u6236"),e&&(r({uid:"temp_user_"+Date.now(),displayName:"\u81e8\u6642\u7528\u6236",email:null,isAnonymous:!0,isTemporary:!0}),o(!1))},5e3),n=function(e,t,n,r){return It(e).onAuthStateChanged(t,n,r)}(Bk,n=>{console.log("AuthProvider: \u8a8d\u8b49\u72c0\u614b\u8b8a\u66f4:",n),e&&(clearTimeout(t),n?(console.log("AuthProvider: \u7528\u6236\u5df2\u767b\u5165:",n.uid),r({uid:n.uid,displayName:n.displayName||`\u7528\u6236 ${n.uid.slice(0,6)}`,email:n.email,isAnonymous:n.isAnonymous,isTemporary:!1}),o(!1)):(console.log("AuthProvider: \u6c92\u6709\u7528\u6236\uff0c\u5617\u8a66\u533f\u540d\u767b\u5165..."),async function(e){if(Bn(e.app))return Promise.reject(pr(e));const t=wi(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Ji({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await Xi(t,{returnSecureToken:!0}),r=await Ji._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(r.user),r}(Bk).then(e=>{console.log("AuthProvider: \u533f\u540d\u767b\u5165\u6210\u529f:",e.user.uid)}).catch(t=>{console.error("AuthProvider: \u533f\u540d\u767b\u5165\u5931\u6557:",t),e&&(r({uid:"fallback_user_"+Date.now(),displayName:"\u8a2a\u5ba2\u7528\u6236",email:null,isAnonymous:!0,isTemporary:!0}),o(!1))})))});return()=>{e=!1,clearTimeout(t),n()}},[]);const a={user:n,loading:s,updateUser:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{console.log("AuthProvider: \u66f4\u65b0\u7528\u6236\u8cc7\u6599",e,t),r({uid:e.uid,displayName:t.nickname||e.displayName||`\u7528\u6236 ${e.uid.slice(0,6)}`,email:e.email,isAnonymous:e.isAnonymous,isTemporary:!1,...t})}catch(dv){console.error("AuthProvider: \u66f4\u65b0\u7528\u6236\u8cc7\u6599\u5931\u6557:",dv),r({uid:e.uid,displayName:e.displayName||`\u7528\u6236 ${e.uid.slice(0,6)}`,email:e.email,isAnonymous:e.isAnonymous,isTemporary:!1})}}};return(0,$k.jsx)(Wk.Provider,{value:a,children:t})},Gk=e=>{let{isOpen:t,onClick:n}=e;return(0,$k.jsx)("button",{onClick:n,className:"md:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Toggle menu",children:(0,$k.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t?(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})},Qk=e=>{var t;let{user:n,userProfile:r,onClick:i,className:s="w-8 h-8"}=e;const o=(null===r||void 0===r?void 0:r.nickname)||(null===r||void 0===r?void 0:r.displayName)||(null===n||void 0===n?void 0:n.displayName)||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t.split("@")[0])||"\u8a2a\u5ba2",a=(null===r||void 0===r?void 0:r.avatar)||(null===r||void 0===r?void 0:r.photoURL)||(null===n||void 0===n?void 0:n.photoURL);return(0,$k.jsxs)("div",{className:"flex items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:i,children:[(0,$k.jsxs)("div",{className:`${s} rounded-full overflow-hidden mr-2 border-2 border-gray-200 flex-shrink-0`,children:[a?(0,$k.jsx)("img",{src:a,alt:o,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,$k.jsx)("div",{className:`w-full h-full flex items-center justify-center text-white text-sm font-medium ${(e=>{const t=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-orange-500","bg-teal-500","bg-cyan-500"];if(!e)return t[0];const n=e.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0);return t[Math.abs(n)%t.length]})(null===n||void 0===n?void 0:n.uid)} ${a?"hidden":"flex"}`,children:(e=>{var t;if(!e)return"?";const n=e.trim().split(" ");return n.length>=2?(n[0][0]+n[1][0]).toUpperCase():(null===(t=e[0])||void 0===t?void 0:t.toUpperCase())||"?"})(o)})]}),(0,$k.jsx)("span",{className:"text-gray-700 font-medium max-w-24 truncate hidden sm:block",children:o})]})},Yk=e=>{let{isOpen:t,onClose:n,user:r,userProfile:s,onProfileUpdate:o}=e;const[a,l]=(0,i.useState)({nickname:"",avatar:"",bio:""}),[c,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t&&s&&l({nickname:s.nickname||(null===r||void 0===r?void 0:r.displayName)||"",avatar:s.avatar||"",bio:s.bio||""})},[t,s,r]);return t?(0,$k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,$k.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,$k.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u7de8\u8f2f\u500b\u4eba\u8cc7\u6599"}),(0,$k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==r&&void 0!==r&&r.uid){u(!0);try{const e=xm(Vk,"users",r.uid),t={...a,updatedAt:new Date};await function(e,t,n){e=La(e,wm);const r=La(e.firestore,Nm),i=Vm(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=It(t))||t instanceof Pm?$m(i,"updateDoc",e._key,t,n,a):qm(i,"updateDoc",e._key,t),Tg(r,[s.toMutation(e._key,Qu.exists(!0))])}(e,t),o(t),n()}catch(dv){console.error("\u66f4\u65b0\u500b\u4eba\u8cc7\u6599\u5931\u6557:",dv),alert("\u66f4\u65b0\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}finally{u(!1)}}},children:[(0,$k.jsxs)("div",{className:"mb-4",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u66b1\u7a31"}),(0,$k.jsx)("input",{type:"text",value:a.nickname,onChange:e=>l({...a,nickname:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"\u8acb\u8f38\u5165\u66b1\u7a31"})]}),(0,$k.jsxs)("div",{className:"mb-4",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u982d\u50cf\u7db2\u5740"}),(0,$k.jsx)("input",{type:"url",value:a.avatar,onChange:e=>l({...a,avatar:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"\u8acb\u8f38\u5165\u982d\u50cf\u5716\u7247\u7db2\u5740"})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u500b\u4eba\u7c21\u4ecb"}),(0,$k.jsx)("textarea",{value:a.bio,onChange:e=>l({...a,bio:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"\u8acb\u8f38\u5165\u500b\u4eba\u7c21\u4ecb"})]}),(0,$k.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,$k.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:c,children:"\u53d6\u6d88"}),(0,$k.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors disabled:opacity-50",children:c?"\u4fdd\u5b58\u4e2d...":"\u4fdd\u5b58"})]})]})]})}):null},Xk=()=>{const{user:e,loading:t}=Hk(),n=re(),[r,s]=(0,i.useState)(null),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),d=(0,i.useRef)(null),p=e&&!e.isAnonymous&&!e.isTemporary&&e.email;(0,i.useEffect)(()=>{t||(async()=>{if(p&&e.uid)try{const n=await kg(xm(Vk,"users",e.uid));var t;n.exists()?s(n.data()):s({nickname:e.displayName||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"\u7528\u6236",email:e.email,avatar:e.photoURL||"",bio:""})}catch(dv){var n;console.error("\u7372\u53d6\u7528\u6236\u8cc7\u6599\u5931\u6557:",dv),s({nickname:e.displayName||(null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||"\u7528\u6236",email:e.email,avatar:e.photoURL||"",bio:""})}else s(null)})()},[e,t,p]),(0,i.useEffect)(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const f=async()=>{try{await function(e){return It(e).signOut()}(Bk),s(null),a(!1),h(!1),n("/")}catch(dv){console.error("\u767b\u51fa\u5931\u6557:",dv)}},m=()=>{h(!1)},g=t&&!e;return(0,$k.jsxs)("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:[(0,$k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,$k.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,$k.jsx)("div",{className:"flex items-center",children:(0,$k.jsx)(Ee,{to:"/",className:"flex items-center",onClick:m,children:(0,$k.jsx)("img",{src:"/Catcher/logo.png",alt:"Catcher",className:"h-15 w-auto mr-2",onError:e=>{e.target.src="/Catcher/images/logo.png",e.target.onerror=()=>{e.target.src="/Catcher/logo.png"}}})})}),(0,$k.jsxs)("nav",{className:"hidden md:flex space-x-8 flex-1 justify-start ml-8",children:[(0,$k.jsx)(Ee,{to:"/search",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"\u5c0b\u627e\u5275\u4f5c\u8005"}),(0,$k.jsx)(Ee,{to:"/become-creator",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"\u6210\u70ba\u5275\u4f5c\u8005"}),(0,$k.jsx)(Ee,{to:"/about",className:"text-gray-700 hover:text-primary-600 font-medium transition-colors",children:"\u95dc\u65bc\u6211\u5011"})]}),(0,$k.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:g?(0,$k.jsx)("div",{className:"flex items-center",children:(0,$k.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):p?(0,$k.jsxs)("div",{className:"relative",ref:d,children:[(0,$k.jsx)(Qk,{user:e,userProfile:r,onClick:()=>a(!o)}),o&&(0,$k.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 border border-gray-200",children:[(0,$k.jsx)("button",{onClick:()=>{c(!0),a(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"\u7de8\u8f2f\u500b\u4eba\u8cc7\u6599"}),(0,$k.jsx)(Ee,{to:"/upload-service",className:"block px-4 py-2 text-sm text-primary-600 hover:bg-gray-100 transition-colors",onClick:()=>a(!1),children:"\u4e0a\u67b6\u670d\u52d9"}),(0,$k.jsx)(Ee,{to:"/chat",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>a(!1),children:"\u79c1\u8a0a\u804a\u5929"}),(0,$k.jsx)("hr",{className:"my-1"}),(0,$k.jsx)("button",{onClick:f,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 transition-colors",children:"\u767b\u51fa"})]})]}):(0,$k.jsxs)($k.Fragment,{children:[(0,$k.jsx)(Ee,{to:"/login",className:"text-primary-600 hover:text-primary-800 font-medium transition-colors",children:"\u767b\u5165"}),(0,$k.jsx)(Ee,{to:"/register",className:"btn-primary",children:"\u514d\u8cbb\u8a3b\u518a"})]})}),(0,$k.jsxs)("div",{className:"flex items-center space-x-3 md:hidden",children:[g?(0,$k.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}):p?(0,$k.jsx)(Qk,{user:e,userProfile:r,onClick:()=>a(!o),className:"w-8 h-8"}):null,(0,$k.jsx)(Gk,{isOpen:u,onClick:()=>h(!u)})]})]}),u&&(0,$k.jsx)("div",{className:"md:hidden",children:(0,$k.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-white border-t border-gray-200",children:[(0,$k.jsx)(Ee,{to:"/search",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors",onClick:m,children:"\u5c0b\u627e\u5275\u4f5c\u8005"}),(0,$k.jsx)(Ee,{to:"/become-creator",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors",onClick:m,children:"\u6210\u70ba\u5275\u4f5c\u8005"}),(0,$k.jsx)(Ee,{to:"/about",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors",onClick:m,children:"\u95dc\u65bc\u6211\u5011"}),(0,$k.jsx)("div",{className:"border-t border-gray-200 pt-3 mt-3",children:p?(0,$k.jsxs)($k.Fragment,{children:[(0,$k.jsx)("div",{className:"px-3 py-2",children:(0,$k.jsx)("div",{className:"flex items-center space-x-3",children:(0,$k.jsx)(Qk,{user:e,userProfile:r,className:"w-10 h-10"})})}),(0,$k.jsx)("button",{onClick:()=>{c(!0),m()},className:"block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors",children:"\u7de8\u8f2f\u500b\u4eba\u8cc7\u6599"}),(0,$k.jsx)(Ee,{to:"/chat",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-primary-600 hover:bg-gray-50 rounded-md transition-colors",onClick:m,children:"\u79c1\u8a0a\u804a\u5929"}),(0,$k.jsx)("button",{onClick:f,className:"block w-full text-left px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50 rounded-md transition-colors",children:"\u767b\u51fa"})]}):(0,$k.jsxs)($k.Fragment,{children:[(0,$k.jsx)(Ee,{to:"/login",className:"block px-3 py-2 text-base font-medium text-primary-600 hover:text-primary-800 hover:bg-primary-50 rounded-md transition-colors",onClick:m,children:"\u767b\u5165"}),(0,$k.jsx)(Ee,{to:"/register",className:"block px-3 py-2 text-base font-medium bg-primary-600 text-white hover:bg-primary-700 rounded-md transition-colors text-center",onClick:m,children:"\u514d\u8cbb\u8a3b\u518a"})]})})]})})]}),o&&p&&(0,$k.jsxs)("div",{className:"md:hidden absolute top-20 right-4 w-64 bg-white rounded-md shadow-lg py-1 border border-gray-200 z-50",children:[(0,$k.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:(0,$k.jsx)(Qk,{user:e,userProfile:r,className:"w-12 h-12"})}),(0,$k.jsx)("button",{onClick:()=>{c(!0),a(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"\u7de8\u8f2f\u500b\u4eba\u8cc7\u6599"}),(0,$k.jsx)(Ee,{to:"/upload-service",className:"block px-4 py-2 text-sm text-primary-600 hover:bg-gray-100 transition-colors",onClick:()=>a(!1),children:"\u4e0a\u67b6\u670d\u52d9"}),(0,$k.jsx)(Ee,{to:"/chat",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>a(!1),children:"\u79c1\u8a0a\u804a\u5929"}),(0,$k.jsx)("hr",{className:"my-1"}),(0,$k.jsx)("button",{onClick:f,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 transition-colors",children:"\u767b\u51fa"})]}),(0,$k.jsx)(Yk,{isOpen:l,onClose:()=>c(!1),user:e,userProfile:r,onProfileUpdate:e=>{s(t=>({...t,...e}))}})]})},Jk=()=>{const e=re(),[t,n]=(0,i.useState)(""),[r,s]=(0,i.useState)([]),o=e=>{r.includes(e)?s(r.filter(t=>t!==e)):r.length<3&&s([...r,e])};return(0,$k.jsx)("section",{className:"bg-amber-50 py-12 md:py-16",children:(0,$k.jsxs)("div",{className:"container-xs px-4 sm:px-6 lg:px-8 text-center",children:[(0,$k.jsx)("h2",{className:"text-lg md:text-xl lg:text-2xl font-bold text-primary-800 mb-4 md:mb-5",children:"\u5c0b\u627e\u6700\u9069\u5408\u7684\u5c08\u696d\u670d\u52d9"}),(0,$k.jsx)("p",{className:"text-primary-600 mb-6 md:mb-8 text-sm md:text-base",children:"\u9023\u63a5\u512a\u79c0\u7684\u5c08\u696d\u4eba\u624d\uff0c\u5be6\u73fe\u60a8\u7684\u5c08\u6848\u5922\u60f3"}),(0,$k.jsxs)("form",{onSubmit:n=>{n.preventDefault();const i=new URLSearchParams;t&&i.set("q",t),r.length>0&&i.set("tags",r.join(",")),e(`/search?${i.toString()}`)},className:"max-w-2xl mx-auto",children:[(0,$k.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-6 md:mb-8",children:[(0,$k.jsx)("input",{type:"text",placeholder:"\u641c\u5c0b\u670d\u52d9\uff08\u4f8b\u5982\uff1a\u7db2\u9801\u8a2d\u8a08\u3001\u6587\u6848\u64b0\u5beb\u3001\u7ffb\u8b6f...\uff09",value:t,onChange:e=>n(e.target.value),className:"flex-1 input-mobile px-4 py-3 rounded-md text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-300 text-sm md:text-base"}),(0,$k.jsx)("button",{type:"submit",className:"btn-mobile btn-accent px-6 py-3 font-medium rounded-md text-white hover:bg-accent-600 transition-colors",children:"\u641c\u5c0b"})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$k.jsx)("span",{className:"text-sm text-primary-600",children:"\u9078\u64c7\u6a19\u7c64\uff08\u6700\u591a3\u500b\uff09\uff1a"}),r.length>0&&(0,$k.jsx)("button",{type:"button",onClick:()=>{s([])},className:"text-xs text-primary-500 hover:text-primary-700 transition-colors",children:"\u6e05\u9664\u6240\u6709"})]}),(0,$k.jsx)("div",{className:"flex flex-wrap gap-1 md:gap-2 justify-center search-tags-mobile",children:["\u8a2d\u8a08","\u958b\u767c","\u6587\u6848","\u884c\u92b7","\u7ffb\u8b6f","\u5f71\u97f3","\u651d\u5f71","\u63d2\u756b","UI/UX","\u793e\u7fa4","\u54c1\u724c"].map(e=>(0,$k.jsx)("button",{type:"button",onClick:()=>o(e),disabled:!r.includes(e)&&r.length>=3,className:"px-2 md:px-3 py-1 text-[10px] md:text-xs rounded-full border transition-all duration-200 "+(r.includes(e)?"bg-accent-500 text-white border-accent-500 shadow-sm":r.length>=3?"bg-primary-400 text-primary-200 border-primary-400 cursor-not-allowed opacity-50":"bg-primary-400 text-primary-100 border-primary-300 hover:bg-accent-500 hover:text-white hover:border-accent-500"),children:e},e))}),r.length>0&&(0,$k.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,$k.jsx)("span",{className:"text-xs text-primary-600",children:"\u5df2\u9078\u64c7\uff1a"}),(0,$k.jsx)("div",{className:"flex gap-1",children:r.map(e=>(0,$k.jsxs)("span",{className:"px-2 py-1 text-xs bg-accent-600 text-white rounded-full flex items-center gap-1",children:[e,(0,$k.jsx)("button",{type:"button",onClick:()=>o(e),className:"ml-1 text-accent-200 hover:text-white",children:"\xd7"})]},e))})]})]})]})]})})};let Zk={},eC={};let tC=null,nC=null;const rC=async()=>{try{const e=Date.now();if(tC&&nC&&e-nC<3e5)return tC;const t=ag(_m(Vk,"services"),dg("rating","desc")),n=(await Eg(t)).docs.map(e=>({id:e.id,...e.data()}));return tC=n,nC=e,n}catch(dv){throw console.error("\u7372\u53d6\u6240\u6709\u670d\u52d9\u5931\u6557:",dv),dv}};const iC=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let r=_m(Vk,"services");if(t.length>0&&(r=ag(r,cg("tags","array-contains-any",t))),n.priceRange&&"all"!==n.priceRange)switch(n.priceRange){case"low":r=ag(r,cg("price","<",1e4));break;case"mid":r=ag(r,cg("price",">=",1e4),cg("price","<",2e4));break;case"high":r=ag(r,cg("price",">=",2e4))}if(n.sortBy)switch(n.sortBy){case"price-low":r=ag(r,dg("price","asc"));break;case"price-high":r=ag(r,dg("price","desc"));break;case"rating":r=ag(r,dg("rating","desc"));break;default:r=ag(r,dg("createdAt","desc"))}let i=(await Eg(r)).docs.map(e=>({id:e.id,...e.data()}));if(e){const t=e.toLowerCase();i=i.filter(e=>{var n,r,i;return(null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(i=e.creatorName)||void 0===i?void 0:i.toLowerCase().includes(t))})}return i}catch(dv){throw console.error("\u641c\u5c0b\u670d\u52d9\u5931\u6557:",dv),dv}},sC=()=>{const[e,t]=(0,i.useState)({}),[n,r]=(0,i.useState)(!1),s=[{id:1,title:"\u5e73\u9762\u8a2d\u8a08",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})}),description:"LOGO\u3001\u6d77\u5831\u8a2d\u8a08"},{id:2,title:"\u7db2\u9801\u8a2d\u8a08",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),description:"\u5ba2\u88fd\u5316\u7db2\u7ad9\u8a2d\u8a08"},{id:3,title:"\u7a0b\u5f0f\u958b\u767c",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),description:"\u8edf\u9ad4\u61c9\u7528\u958b\u767c"},{id:4,title:"\u884c\u92b7\u4f01\u5283",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),description:"SEO\u3001\u793e\u7fa4\u884c\u92b7"},{id:5,title:"\u6587\u6848\u64b0\u5beb",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),description:"\u5ee3\u544a\u6587\u6848\u3001\u5167\u5bb9\u5275\u4f5c"},{id:6,title:"\u5f71\u97f3\u88fd\u4f5c",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),description:"\u5f71\u7247\u88fd\u4f5c\u3001\u526a\u8f2f"},{id:9,title:"\u7ffb\u8b6f\u670d\u52d9",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),description:"\u591a\u8a9e\u8a00\u7ffb\u8b6f"},{id:7,title:"\u5f71\u97f3\u526a\u8f2f",icon:(0,$k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),description:"\u5f71\u7247\u88fd\u4f5c\u3001\u526a\u8f2f"},{id:8,title:"\u651d\u5f71\u670d\u52d9",icon:(0,$k.jsxs)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),description:"\u5546\u696d\u651d\u5f71\u3001\u6d3b\u52d5\u7d00\u9304"}];return(0,i.useEffect)(()=>{(async()=>{try{const e=await(async()=>{try{const e=await rC(),t={};return e.forEach(e=>{const n=e.category;t[n]=(t[n]||0)+1}),t}catch(dv){throw console.error("\u7372\u53d6\u5206\u985e\u6578\u91cf\u5931\u6557:",dv),dv}})();t(e)}catch(dv){console.error("\u8f09\u5165\u5206\u985e\u6578\u64da\u5931\u6557:",dv)}finally{r(!1)}})()},[]),(0,$k.jsx)("section",{className:"py-6 md:py-8 bg-cream-50",children:(0,$k.jsxs)("div",{className:"container-sm",children:[(0,$k.jsxs)("div",{className:"text-center mb-6",children:[(0,$k.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-primary-800 mb-2",children:"\u670d\u52d9\u985e\u578b"}),(0,$k.jsx)("p",{className:"text-primary-600 text-sm",children:"\u63a2\u7d22\u5404\u7a2e\u5c08\u696d\u670d\u52d9\u985e\u5225"})]}),(0,$k.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4 justify-items-center max-w-6xl mx-auto",children:s.map(t=>(0,$k.jsxs)(Ee,{to:`/services/${encodeURIComponent(t.title)}`,className:"service-card-mobile group flex flex-col items-center justify-center text-center p-2 md:p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300 w-full aspect-square max-w-[80px] md:max-w-[140px]",children:[(0,$k.jsx)("div",{className:"text-primary-600 mb-1 md:mb-2 group-hover:text-primary-700 transition-all duration-300 flex-shrink-0",children:(0,$k.jsx)("div",{className:"w-6 h-6 md:w-8 md:h-8 flex items-center justify-center",children:i.cloneElement(t.icon,{className:"w-4 h-4 md:w-8 md:h-8"})})}),(0,$k.jsx)("h3",{className:"text-[10px] md:text-sm font-medium text-gray-800 mb-1 leading-tight",children:t.title}),(0,$k.jsx)("p",{className:"text-[8px] md:text-xs text-gray-600 leading-tight hidden md:block",children:t.description}),!n&&(0,$k.jsxs)("p",{className:"text-[7px] md:text-[10px] text-primary-500 mt-1",children:[e[t.title]||0," \u500b\u670d\u52d9"]})]},t.id))})]})})},oC=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{const e=Sk(vk(zk,"services"),e=>{try{r(!0);const n=e.val();if(n){const e=Object.keys(n).map(e=>({id:e,...n[e]})).filter(e=>e.featured&&e.published).sort((e,t)=>(t.rating||0)-(e.rating||0)).slice(0,6);t(e)}else t([]);o(null)}catch(n){console.error("\u8f09\u5165\u7cbe\u9078\u670d\u52d9\u5931\u6557:",n),o("\u8f09\u5165\u670d\u52d9\u5931\u6557")}finally{r(!1)}});return()=>e()},[]),(0,$k.jsx)("section",{className:"py-8 md:py-10 bg-white",children:(0,$k.jsxs)("div",{className:"container-sm",children:[(0,$k.jsxs)("div",{className:"text-center mb-6 md:mb-8",children:[(0,$k.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-primary-800 mb-2",children:"\u7cbe\u9078\u670d\u52d9"}),(0,$k.jsx)("p",{className:"text-base md:text-lg text-primary-600",children:"\u71b1\u9580\u63a8\u85a6\u7684\u9ad8\u54c1\u8cea\u670d\u52d9"})]}),(0,$k.jsx)("div",{className:"relative",children:(0,$k.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide snap-x snap-mandatory",children:e.map(e=>{var t;return(0,$k.jsxs)(Ee,{to:`/services/${encodeURIComponent(e.category||"general")}/${e.id}`,className:"flex-none w-52 bg-white border border-primary-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-3 cursor-pointer snap-start block no-underline",children:[(0,$k.jsx)("div",{className:"w-full h-32 bg-primary-50 rounded-lg mb-3 overflow-hidden",children:e.images&&e.images.length>0?(0,$k.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"}):(0,$k.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,$k.jsx)("svg",{className:"w-10 h-10 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,$k.jsx)("h3",{className:"text-base font-semibold text-primary-800 mb-2 line-clamp-2",children:e.title}),(0,$k.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["by ",e.creatorName]}),(0,$k.jsxs)("div",{className:"flex items-center mb-2",children:[(0,$k.jsx)("span",{className:"text-yellow-400 text-sm",children:"\u2605"}),(0,$k.jsx)("span",{className:"text-sm text-gray-600 ml-1",children:e.rating}),(0,$k.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["(",e.reviewCount,")"]})]}),(0,$k.jsxs)("div",{className:"text-lg font-bold text-accent-600",children:["TWD"===e.currency?"NT$ ":"$",null===(t=e.price)||void 0===t?void 0:t.toLocaleString()]})]},e.id)})})})]})})},aC=()=>(0,$k.jsx)("footer",{className:"bg-primary-800 text-white",children:(0,$k.jsxs)("div",{className:"container-sm py-10",children:[(0,$k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,$k.jsxs)("div",{className:"md:col-span-2",children:[(0,$k.jsx)("h3",{className:"text-lg font-bold mb-3",children:"\u7b46\u58a8\u7d19\u786f\u5de5\u4f5c\u5ba4"}),(0,$k.jsx)("p",{className:"text-primary-200 mb-3 text-sm",children:"\u5c08\u6ce8\u65bc\u6587\u5275\u8a2d\u8a08\u8207\u6578\u4f4d\u670d\u52d9\u7684\u5c08\u696d\u5de5\u4f5c\u5ba4\uff0c\u81f4\u529b\u65bc\u70ba\u5ba2\u6236\u63d0\u4f9b\u6700\u512a\u8cea\u7684\u5275\u610f\u89e3\u6c7a\u65b9\u6848\u3002"}),(0,$k.jsxs)("div",{className:"space-y-1 text-primary-200 text-sm",children:[(0,$k.jsx)("p",{children:"\ud83d\udccd \u5730\u5740\uff1a\u53f0\u5317\u5e02\u4e2d\u6b63\u5340\u91cd\u6176\u5357\u8def\u4e00\u6bb5XX\u865f"}),(0,$k.jsx)("p",{children:"\ud83d\udcde \u96fb\u8a71\uff1a02-XXXX-XXXX"}),(0,$k.jsx)("p",{children:"\ud83d\udce7 \u4fe1\u7bb1\uff1acontact@inkstudio.tw"})]})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsx)("h4",{className:"text-base font-semibold mb-3",children:"\u670d\u52d9\u9805\u76ee"}),(0,$k.jsxs)("ul",{className:"space-y-1 text-primary-200 text-sm",children:[(0,$k.jsx)("li",{children:"\u54c1\u724c\u8a2d\u8a08"}),(0,$k.jsx)("li",{children:"\u7db2\u7ad9\u958b\u767c"}),(0,$k.jsx)("li",{children:"\u6587\u6848\u64b0\u5beb"}),(0,$k.jsx)("li",{children:"\u6578\u4f4d\u884c\u92b7"}),(0,$k.jsx)("li",{children:"\u5370\u5237\u8a2d\u8a08"})]})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsx)("h4",{className:"text-base font-semibold mb-3",children:"\u95dc\u6ce8\u6211\u5011"}),(0,$k.jsxs)("div",{className:"space-y-1",children:[(0,$k.jsx)("a",{href:"#",className:"flex items-center text-primary-200 hover:text-white transition-colors text-sm",children:"\ud83d\udcd8 Facebook"}),(0,$k.jsx)("a",{href:"#",className:"flex items-center text-primary-200 hover:text-white transition-colors text-sm",children:"\ud83d\udcf7 Instagram"}),(0,$k.jsx)("a",{href:"#",className:"flex items-center text-primary-200 hover:text-white transition-colors text-sm",children:"\ud83d\udcbc LinkedIn"}),(0,$k.jsx)("a",{href:"#",className:"flex items-center text-primary-200 hover:text-white transition-colors text-sm",children:"\ud83d\udc26 Twitter"})]})]})]}),(0,$k.jsx)("hr",{className:"border-primary-700 my-6"}),(0,$k.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,$k.jsx)("div",{className:"text-primary-300 text-xs",children:"\xa9 2025 \u7b46\u58a8\u7d19\u786f\u5de5\u4f5c\u5ba4 \u7248\u6b0a\u6240\u6709"}),(0,$k.jsxs)("div",{className:"flex space-x-4 text-xs text-primary-300 mt-2 md:mt-0",children:[(0,$k.jsx)("a",{href:"#",className:"hover:text-white transition-colors",children:"\u96b1\u79c1\u653f\u7b56"}),(0,$k.jsx)("a",{href:"#",className:"hover:text-white transition-colors",children:"\u670d\u52d9\u689d\u6b3e"}),(0,$k.jsx)("a",{href:"#",className:"hover:text-white transition-colors",children:"\u806f\u7d61\u6211\u5011"})]})]})]})}),lC=()=>{const{category:e}=ie(),[t,n]=(0,i.useState)(decodeURIComponent(e||"\u5e73\u9762\u8a2d\u8a08")),[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)([0,2e5]),[l,c]=(0,i.useState)([]),[u,h]=(0,i.useState)("card"),[d,p]=(0,i.useState)(!1),[f,m]=(0,i.useState)([]),[g,y]=(0,i.useState)(!1),[v,w]=(0,i.useState)(null),[b,_]=(0,i.useState)([]);(0,i.useEffect)(()=>{e&&n(decodeURIComponent(e))},[e]),(0,i.useEffect)(()=>{(async()=>{try{y(!0),w(null);let e=[];if(e="\u5168\u90e8"===t?await rC():await(async e=>{try{const t=Date.now();if(Zk[e]&&eC[e]&&t-eC[e]<18e4)return Zk[e];const n=ag(_m(Vk,"services"),cg("category","==",e),dg("rating","desc")),r=(await Eg(n)).docs.map(e=>({id:e.id,...e.data()}));return Zk[e]=r,eC[e]=t,r}catch(v){throw console.error("\u7372\u53d6\u5206\u985e\u670d\u52d9\u5931\u6557:",v),v}})(t),e&&e.length>0){m(e);const t=new Set;e.forEach(e=>{var n;null===(n=e.tags)||void 0===n||n.forEach(e=>t.add(e))}),_(Array.from(t))}else m([]),_([])}catch(e){console.error("\u8f09\u5165\u670d\u52d9\u5931\u6557:",e),w("\u8f09\u5165\u670d\u52d9\u5931\u6557")}finally{y(!1)}})()},[t]);const x=["\u5e73\u9762\u8a2d\u8a08","\u7db2\u9801\u8a2d\u8a08","\u7a0b\u5f0f\u958b\u767c","\u884c\u92b7\u4f01\u5283","\u6587\u6848\u64b0\u5beb","\u5f71\u97f3\u88fd\u4f5c","\u7ffb\u8b6f\u670d\u52d9","\u5f71\u97f3\u526a\u8f2f","\u651d\u5f71\u670d\u52d9"],k=e=>{let{isMobile:n=!1}=e;return(0,$k.jsxs)("div",{className:""+(n?"p-4":"p-6"),children:[n&&(0,$k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$k.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\u7be9\u9078\u670d\u52d9"}),(0,$k.jsx)("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,$k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"\u641c\u5c0b\u670d\u52d9"}),(0,$k.jsxs)("div",{className:"relative",children:[(0,$k.jsx)("input",{type:"text",placeholder:"\u8f38\u5165\u95dc\u9375\u5b57\u641c\u5c0b...",value:r,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent input-mobile"}),(0,$k.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsx)("h3",{className:"text-sm font-medium text-primary-700 mb-3",children:"\u670d\u52d9\u5206\u985e"}),(0,$k.jsx)("div",{className:"space-y-2",children:x.map(e=>(0,$k.jsx)(Ee,{to:`/services/${encodeURIComponent(e)}`,onClick:()=>n&&p(!1),className:"block w-full text-left px-3 py-2 rounded-lg transition-colors touch-feedback "+(t===e?"bg-primary-100 text-primary-800 font-medium":"text-primary-600 hover:bg-primary-50"),children:e},e))})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsx)("h3",{className:"text-sm font-medium text-primary-700 mb-3",children:"\u50f9\u683c\u7bc4\u570d"}),(0,$k.jsxs)("div",{className:"space-y-4",children:[(0,$k.jsxs)("div",{className:"flex justify-between text-sm text-primary-600",children:[(0,$k.jsxs)("span",{children:["NT$ ",o[0].toLocaleString()]}),(0,$k.jsxs)("span",{children:["NT$ ",o[1].toLocaleString()]})]}),(0,$k.jsxs)("div",{className:"relative",children:[(0,$k.jsx)("div",{className:"h-2 bg-primary-100 rounded-full"}),(0,$k.jsx)("div",{className:"absolute h-2 bg-primary-500 rounded-full top-0",style:{left:o[0]/2e5*100+"%",width:(o[1]-o[0])/2e5*100+"%"}}),(0,$k.jsx)("input",{type:"range",min:"0",max:"200000",step:"1000",value:o[0],onChange:e=>{const t=parseInt(e.target.value);t<=o[1]&&a([t,o[1]])},className:"absolute w-full h-2 bg-transparent appearance-none cursor-pointer top-0 slider-thumb"}),(0,$k.jsx)("input",{type:"range",min:"0",max:"200000",step:"1000",value:o[1],onChange:e=>{const t=parseInt(e.target.value);t>=o[0]&&a([o[0],t])},className:"absolute w-full h-2 bg-transparent appearance-none cursor-pointer top-0 slider-thumb"})]}),(0,$k.jsx)("div",{className:"flex flex-wrap gap-2",children:[{label:"5000\u4ee5\u4e0b",range:[0,5e3]},{label:"5000-20000",range:[5e3,2e4]},{label:"20000-50000",range:[2e4,5e4]},{label:"50000\u4ee5\u4e0a",range:[5e4,2e5]}].map(e=>(0,$k.jsx)("button",{onClick:()=>a(e.range),className:"px-3 py-1 text-xs border border-primary-200 rounded-full hover:bg-primary-50 transition-colors btn-mobile",children:e.label},e.label))})]})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsxs)("h3",{className:"text-sm font-medium text-primary-700 mb-3",children:["\u670d\u52d9\u6a19\u7c64 (",l.length,"/3)"]}),(0,$k.jsx)("div",{className:"flex flex-wrap gap-2",children:b.map(e=>(0,$k.jsx)("button",{onClick:()=>C(e),disabled:!l.includes(e)&&l.length>=3,className:"px-3 py-1 text-xs rounded-full transition-colors btn-mobile "+(l.includes(e)?"bg-accent-100 text-accent-800 border border-accent-200":"bg-white border border-primary-200 text-primary-600 hover:bg-primary-50 disabled:opacity-50 disabled:cursor-not-allowed"),children:e},e))}),l.length>0&&(0,$k.jsx)("button",{onClick:()=>c([]),className:"mt-2 text-xs text-accent-600 hover:text-accent-800",children:"\u6e05\u9664\u6240\u6709\u6a19\u7c64"})]}),n&&(0,$k.jsx)("div",{className:"mt-6",children:(0,$k.jsxs)("button",{onClick:()=>p(!1),className:"w-full btn-mobile bg-primary-600 text-white py-3 rounded-lg hover:bg-primary-700 transition-colors",children:["\u67e5\u770b ",E.length," \u500b\u7d50\u679c"]})})]})},C=e=>{l.includes(e)?c(l.filter(t=>t!==e)):l.length<3&&c([...l,e])},E=f.filter(e=>{const t=e.title.toLowerCase().includes(r.toLowerCase())||e.description.toLowerCase().includes(r.toLowerCase()),n=e.price>=o[0]&&e.price<=o[1],i=0===l.length||l.some(t=>e.tags.includes(t));return t&&n&&i});return(0,$k.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,$k.jsx)("div",{className:"relative h-48 md:h-64 bg-cover bg-center",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${{"\u5e73\u9762\u8a2d\u8a08":"https://images.unsplash.com/photo-1561070791-2526d30994b5?w=1200&h=300&fit=crop","\u7db2\u9801\u8a2d\u8a08":"https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=1200&h=300&fit=crop","\u7a0b\u5f0f\u958b\u767c":"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=1200&h=300&fit=crop","\u884c\u92b7\u4f01\u5283":"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1200&h=300&fit=crop","\u6587\u6848\u64b0\u5beb":"https://images.unsplash.com/photo-1455390582262-044cdead277a?w=1200&h=300&fit=crop","\u5f71\u97f3\u88fd\u4f5c":"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=1200&h=300&fit=crop","\u5546\u696d\u8aee\u8a62":"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=1200&h=300&fit=crop","\u6559\u80b2\u57f9\u8a13":"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=1200&h=300&fit=crop","\u7ffb\u8b6f\u670d\u52d9":"https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=1200&h=300&fit=crop"}[t]})`},children:(0,$k.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center text-white px-4",children:[(0,$k.jsx)("h1",{className:"text-2xl md:text-4xl font-bold mb-2 md:mb-4",children:t}),(0,$k.jsxs)("p",{className:"text-sm md:text-lg text-gray-100",children:["\u5e73\u9762\u8a2d\u8a08"===t&&"\u5c08\u696d\u8a2d\u8a08\u670d\u52d9\uff0c\u8b93\u60a8\u7684\u54c1\u724c\u5f62\u8c61\u66f4\u52a0\u51fa\u8272","\u7db2\u9801\u8a2d\u8a08"===t&&"\u73fe\u4ee3\u5316\u7db2\u9801\u8a2d\u8a08\uff0c\u63d0\u5347\u60a8\u7684\u7dda\u4e0a\u5f62\u8c61","\u7a0b\u5f0f\u958b\u767c"===t&&"\u5c08\u696d\u7a0b\u5f0f\u958b\u767c\uff0c\u6253\u9020\u9ad8\u6548\u80fd\u7684\u6578\u4f4d\u89e3\u6c7a\u65b9\u6848","\u884c\u92b7\u4f01\u5283"===t&&"\u5168\u65b9\u4f4d\u884c\u92b7\u7b56\u7565\uff0c\u52a9\u60a8\u62d3\u5c55\u696d\u52d9\u7248\u5716","\u6587\u6848\u64b0\u5beb"===t&&"\u5275\u610f\u6587\u6848\u64b0\u5beb\uff0c\u7528\u6587\u5b57\u6253\u52d5\u60a8\u7684\u5ba2\u6236","\u5f71\u97f3\u88fd\u4f5c"===t&&"\u5c08\u696d\u5f71\u97f3\u88fd\u4f5c\uff0c\u50b3\u9054\u60a8\u7684\u54c1\u724c\u6545\u4e8b","\u5546\u696d\u8aee\u8a62"===t&&"\u5c08\u696d\u5546\u696d\u9867\u554f\uff0c\u5354\u52a9\u60a8\u505a\u51fa\u6700\u4f73\u6c7a\u7b56","\u6559\u80b2\u57f9\u8a13"===t&&"\u5c08\u696d\u6559\u80b2\u57f9\u8a13\uff0c\u63d0\u5347\u60a8\u7684\u6280\u80fd\u8207\u7af6\u722d\u529b","\u7ffb\u8b6f\u670d\u52d9"===t&&"\u7cbe\u6e96\u7ffb\u8b6f\u670d\u52d9\uff0c\u8de8\u8d8a\u8a9e\u8a00\u969c\u7919"]})]})})}),(0,$k.jsx)("nav",{className:"py-3 md:py-4",children:(0,$k.jsx)("div",{className:"container-sm px-4",children:(0,$k.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-primary-600",children:[(0,$k.jsx)(Ee,{to:"/",className:"hover:text-primary-800 transition-colors",children:"\u9996\u9801"}),(0,$k.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,$k.jsx)("span",{className:"text-primary-800 font-medium",children:t})]})})}),(0,$k.jsx)("div",{className:"px-4",children:(0,$k.jsxs)("div",{className:"flex gap-0 md:gap-8 pb-8",children:[(0,$k.jsx)("aside",{className:"hidden md:block w-64 bg-white rounded-xl shadow-sm h-fit ml-0 md:ml-16",children:(0,$k.jsx)(k,{})}),(0,$k.jsxs)("main",{className:"flex-1 max-w-none md:max-w-6xl mr-0 md:mr-8",children:[(0,$k.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,$k.jsxs)("div",{className:"flex items-center gap-3",children:[(0,$k.jsxs)("button",{onClick:()=>p(!0),className:"md:hidden btn-mobile px-3 py-2 bg-white border border-gray-300 rounded-lg flex items-center gap-2 text-sm",children:[(0,$k.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})}),"\u7be9\u9078"]}),(0,$k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$k.jsxs)("p",{className:"text-primary-600 text-sm md:text-base",children:["\u627e\u5230 ",E.length," \u500b",t,"\u670d\u52d9"]}),g&&(0,$k.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"})]})]}),(0,$k.jsxs)("div",{className:"flex bg-primary-100 rounded-lg p-1",children:[(0,$k.jsxs)("button",{onClick:()=>h("card"),className:"px-2 md:px-4 py-2 rounded-md text-xs md:text-sm font-medium transition-colors "+("card"===u?"bg-white text-primary-800 shadow-sm":"text-primary-600 hover:text-primary-800"),children:[(0,$k.jsx)("svg",{className:"w-3 h-3 md:w-4 md:h-4 inline mr-1 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"\u5361\u7247"]}),(0,$k.jsxs)("button",{onClick:()=>h("list"),className:"px-2 md:px-4 py-2 rounded-md text-xs md:text-sm font-medium transition-colors "+("list"===u?"bg-white text-primary-800 shadow-sm":"text-primary-600 hover:text-primary-800"),children:[(0,$k.jsx)("svg",{className:"w-3 h-3 md:w-4 md:h-4 inline mr-1 md:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"\u5217\u8868"]})]})]}),"card"===u?(0,$k.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4",children:E.map(e=>(0,$k.jsxs)(Ee,{to:`/services/${encodeURIComponent(t)}/${e.id}`,className:"creator-card-mobile bg-white border border-primary-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-3 md:p-4 cursor-pointer block",children:[(0,$k.jsx)("div",{className:"w-full h-24 md:h-28 bg-primary-50 rounded-lg mb-3 overflow-hidden",children:e.image?(0,$k.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"}):e.media&&e.media.length>0?(0,$k.jsx)("img",{src:e.media[0].thumbnail||e.media[0].url,alt:e.media[0].alt||e.title,className:"w-full h-full object-cover"}):(0,$k.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,$k.jsx)("svg",{className:"w-6 h-6 md:w-8 md:h-8 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,$k.jsx)("h3",{className:"text-xs md:text-sm font-semibold text-primary-800 mb-2 line-clamp-2",children:e.title}),(0,$k.jsx)("p",{className:"text-[10px] md:text-xs text-primary-600 mb-2 line-clamp-2",children:e.description}),(0,$k.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.tags.slice(0,1).map(e=>(0,$k.jsx)("span",{className:"px-2 py-1 text-[10px] md:text-xs bg-accent-100 text-accent-700 rounded-full",children:e},e)),e.tags.length>1&&(0,$k.jsxs)("span",{className:"px-2 py-1 text-[10px] md:text-xs bg-primary-100 text-primary-600 rounded-full",children:["+",e.tags.length-1]})]}),(0,$k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,$k.jsxs)("div",{className:"text-sm md:text-base font-bold text-accent-600",children:["NT$ ",e.price.toLocaleString()]}),(0,$k.jsxs)("div",{className:"flex items-center text-[10px] md:text-xs text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-3 h-3 text-warning-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,$k.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.rating]})]})]},e.id))}):(0,$k.jsx)("div",{className:"space-y-3 md:space-y-4",children:E.map(e=>(0,$k.jsx)(Ee,{to:`/services/${encodeURIComponent(t)}/${e.id}`,className:"bg-white border border-primary-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-4 md:p-6 cursor-pointer block",children:(0,$k.jsxs)("div",{className:"flex gap-3 md:gap-6",children:[(0,$k.jsx)("div",{className:"w-20 h-16 md:w-32 md:h-24 bg-primary-50 rounded-lg flex-shrink-0 overflow-hidden",children:e.image?(0,$k.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"}):e.media&&e.media.length>0?(0,$k.jsx)("img",{src:e.media[0].thumbnail||e.media[0].url,alt:e.media[0].alt||e.title,className:"w-full h-full object-cover"}):(0,$k.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,$k.jsx)("svg",{className:"w-6 h-6 md:w-8 md:h-8 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,$k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$k.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start mb-2",children:[(0,$k.jsx)("h3",{className:"text-sm md:text-lg font-semibold text-primary-800 mb-1 md:mb-0",children:e.title}),(0,$k.jsxs)("div",{className:"text-base md:text-xl font-bold text-accent-600 flex-shrink-0",children:["NT$ ",e.price.toLocaleString()]})]}),(0,$k.jsx)("p",{className:"text-xs md:text-sm text-primary-600 mb-2 md:mb-3 line-clamp-2",children:e.description}),(0,$k.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[(0,$k.jsxs)("div",{className:"flex flex-wrap gap-1 md:gap-2",children:[e.tags.slice(0,3).map(e=>(0,$k.jsx)("span",{className:"px-2 py-1 text-[10px] md:text-xs bg-accent-100 text-accent-700 rounded-full",children:e},e)),e.tags.length>3&&(0,$k.jsxs)("span",{className:"px-2 py-1 text-[10px] md:text-xs bg-primary-100 text-primary-600 rounded-full",children:["+",e.tags.length-3]})]}),(0,$k.jsxs)("div",{className:"flex items-center gap-4 text-[10px] md:text-xs text-primary-600",children:[(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-warning-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,$k.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.rating," (",e.reviews,")"]}),(0,$k.jsx)("span",{className:"hidden md:inline",children:e.seller}),(0,$k.jsx)("span",{className:"hidden md:inline",children:e.deliveryTime})]})]})]})]})},e.id))}),0===E.length&&(0,$k.jsxs)("div",{className:"text-center py-8 md:py-12",children:[(0,$k.jsx)("svg",{className:"w-12 h-12 md:w-16 md:h-16 text-primary-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,$k.jsx)("h3",{className:"text-base md:text-lg font-medium text-primary-700 mb-2",children:v?"\u8f09\u5165\u670d\u52d9\u6642\u767c\u751f\u932f\u8aa4":"\u627e\u4e0d\u5230\u7b26\u5408\u689d\u4ef6\u7684\u670d\u52d9"}),(0,$k.jsx)("p",{className:"text-sm text-primary-500 mb-4",children:v||"\u8acb\u5617\u8a66\u8abf\u6574\u641c\u5c0b\u689d\u4ef6\u6216\u7be9\u9078\u5668"}),v&&(0,$k.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"\u91cd\u65b0\u8f09\u5165"})]})]})]})}),d&&(0,$k.jsxs)($k.Fragment,{children:[(0,$k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 mobile-backdrop show",onClick:()=>p(!1)}),(0,$k.jsx)("div",{className:"fixed top-0 left-0 h-full w-80 max-w-[85vw] bg-white z-50 mobile-drawer open overflow-y-auto",children:(0,$k.jsx)(k,{isMobile:!0})})]})]})},cC=()=>{const{category:e,serviceId:t}=ie(),n=re(),{user:r}=Hk(),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(0);if((0,i.useEffect)(()=>{if(!t)return;const e=Sk(vk(zk,`services/${t}`),e=>{const n=e.val();if(n){var r,i;const e={id:t,...n,media:n.media||[{type:"image",url:(null===(r=n.images)||void 0===r?void 0:r[0])||"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=600&h=400&fit=crop",thumbnail:(null===(i=n.images)||void 0===i?void 0:i[0])||"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=150&h=100&fit=crop",alt:"\u670d\u52d9\u5c55\u793a\u5716\u7247",link:null}],detailedDescription:n.detailedDescription||`\n            <h3>\u670d\u52d9\u8aaa\u660e\uff1a</h3>\n            <p>${n.description}</p>\n            \n            <h3>\u670d\u52d9\u5167\u5bb9\uff1a</h3>\n            <ul>\n              <li>\u5c08\u696d\u670d\u52d9\u63d0\u4f9b</li>\n              <li>\u9ad8\u54c1\u8cea\u4ea4\u4ed8</li>\n              <li>\u5b8c\u6574\u552e\u5f8c\u670d\u52d9</li>\n            </ul>\n          `,seller:n.seller&&"object"===typeof n.seller?n.seller:{name:n.creatorName||"\u5c08\u696d\u670d\u52d9\u8005",avatar:n.creatorAvatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face",rating:n.rating,reviews:n.reviewCount,responseTime:"2\u5c0f\u6642\u5167",completedProjects:Math.floor(100*Math.random())+50,memberSince:"2021\u5e74",verified:!0}};o(e)}else o(null)});return()=>e()},[t]),!s)return(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center",children:[(0,$k.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto mb-4"}),(0,$k.jsx)("p",{className:"text-primary-600",children:"\u8f09\u5165\u4e2d..."})]})});const c=s.media[a],u=e=>{e&&window.open(e,"_blank")};return(0,$k.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,$k.jsx)("nav",{className:"py-4",children:(0,$k.jsx)("div",{className:"container-sm",children:(0,$k.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-primary-600",children:[(0,$k.jsx)(Ee,{to:"/",className:"hover:text-primary-800 transition-colors",children:"\u9996\u9801"}),(0,$k.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,$k.jsx)(Ee,{to:`/services/${encodeURIComponent(e)}`,className:"hover:text-primary-800 transition-colors",children:decodeURIComponent(e)}),(0,$k.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,$k.jsx)("span",{className:"text-primary-800 font-medium",children:s.title})]})})}),(0,$k.jsxs)("div",{className:"container-sm pb-12",children:[(0,$k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,$k.jsxs)("div",{className:"lg:col-span-2",children:[(0,$k.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-4",children:(0,$k.jsxs)("div",{className:"relative aspect-video",children:[(0,$k.jsx)("img",{src:c.url,alt:c.alt,className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>u(c.link)}),"video"===c.type&&(0,$k.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30",children:(0,$k.jsx)("button",{onClick:()=>u(c.link),className:"bg-white bg-opacity-90 rounded-full p-4 hover:bg-opacity-100 transition-all",children:(0,$k.jsx)("svg",{className:"w-8 h-8 text-primary-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{d:"M8 5v14l11-7z"})})})}),c.link&&(0,$k.jsx)("div",{className:"absolute top-4 right-4",children:(0,$k.jsx)("span",{className:"bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:"\u9ede\u64ca\u67e5\u770b\u66f4\u591a"})})]})}),(0,$k.jsx)("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:s.media.map((e,t)=>(0,$k.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,$k.jsx)("img",{src:e.thumbnail,alt:e.alt,className:"w-20 h-14 object-cover rounded-lg cursor-pointer border-2 transition-all "+(a===t?"border-primary-500 opacity-100":"border-transparent opacity-70 hover:opacity-100"),onClick:()=>l(t)}),"video"===e.type&&(0,$k.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,$k.jsx)("svg",{className:"w-4 h-4 text-white drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{d:"M8 5v14l11-7z"})})})]},t))})]}),(0,$k.jsx)("div",{className:"lg:col-span-1",children:(0,$k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-4",children:[(0,$k.jsx)("h1",{className:"text-2xl font-bold text-primary-800 mb-4",children:s.title}),(0,$k.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map((e,t)=>(0,$k.jsx)("span",{className:"px-3 py-1 bg-accent-100 text-accent-700 rounded-full text-sm",children:e},t))}),(0,$k.jsxs)("div",{className:"flex items-center mb-4",children:[(0,$k.jsx)("div",{className:"flex items-center mr-3",children:[...Array(5)].map((e,t)=>(0,$k.jsx)("svg",{className:"w-5 h-5 "+(t<Math.floor(s.rating)?"text-warning-500":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,$k.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),(0,$k.jsxs)("span",{className:"text-sm text-primary-600",children:[s.rating," (",s.reviews," \u8a55\u50f9)"]})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsxs)("div",{className:"text-3xl font-bold text-accent-600 mb-2",children:["NT$ ",s.price.toLocaleString()]}),(0,$k.jsxs)("div",{className:"text-sm text-primary-500",children:["\u9810\u8a08\u5b8c\u6210\u6642\u9593\uff1a",s.deliveryTime]})]}),(0,$k.jsx)("button",{className:"w-full btn-primary mb-4",children:"\u7acb\u5373\u4e0b\u55ae"}),(0,$k.jsxs)("button",{onClick:()=>{if(!(r&&!r.isAnonymous&&!r.isTemporary&&r.email))return alert("\u8acb\u5148\u767b\u5165\u4ee5\u4f7f\u7528\u79c1\u8a0a\u529f\u80fd"),void n("/login");n(`/chat?creatorId=${s.seller.name.replace(/\s+/g,"-").toLowerCase()}&creatorName=${encodeURIComponent(s.seller.name)}`)},className:"w-full border border-primary-200 text-primary-600 py-3 rounded-lg hover:bg-primary-50 transition-colors flex items-center justify-center",children:[(0,$k.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"\u806f\u7d61\u5275\u4f5c\u8005"]})]})})]}),(0,$k.jsxs)("div",{className:"mt-12 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,$k.jsx)("div",{className:"lg:col-span-2",children:(0,$k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-8",children:[(0,$k.jsx)("h2",{className:"text-xl font-bold text-primary-800 mb-6",children:"\u670d\u52d9\u8aaa\u660e"}),(0,$k.jsx)("div",{className:"prose prose-primary max-w-none",dangerouslySetInnerHTML:{__html:s.detailedDescription}})]})}),(0,$k.jsx)("div",{className:"lg:col-span-1",children:(0,$k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,$k.jsx)("h3",{className:"text-lg font-bold text-primary-800 mb-4",children:"\u95dc\u65bc\u5275\u4f5c\u8005"}),(0,$k.jsx)("div",{className:"flex items-center mb-4",children:(0,$k.jsxs)(Ee,{to:`/creator/${s.seller.name.replace(/\s+/g,"-").toLowerCase()}`,className:"flex items-center hover:opacity-80 transition-opacity",children:[(0,$k.jsx)("img",{src:s.seller.avatar,alt:s.seller.name,className:"w-16 h-16 rounded-full object-cover mr-4"}),(0,$k.jsxs)("div",{children:[(0,$k.jsx)("h4",{className:"font-semibold text-primary-800 hover:text-accent-600 transition-colors",children:s.seller.name}),(0,$k.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 text-warning-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,$k.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),s.seller.rating," (",s.seller.reviews,")"]})]})]})}),(0,$k.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[(0,$k.jsxs)("div",{className:"text-center p-3 bg-cream-50 rounded-lg",children:[(0,$k.jsx)("div",{className:"font-semibold text-primary-800",children:s.seller.completedProjects}),(0,$k.jsx)("div",{className:"text-primary-600",children:"\u5b8c\u6210\u9805\u76ee"})]}),(0,$k.jsxs)("div",{className:"text-center p-3 bg-cream-50 rounded-lg",children:[(0,$k.jsx)("div",{className:"font-semibold text-primary-800",children:s.seller.responseTime}),(0,$k.jsx)("div",{className:"text-primary-600",children:"\u56de\u61c9\u6642\u9593"})]})]}),(0,$k.jsxs)("div",{className:"mb-4",children:[(0,$k.jsx)("h5",{className:"text-sm font-semibold text-primary-700 mb-2",children:"\u5c08\u696d\u6280\u80fd"}),(0,$k.jsx)("div",{className:"flex flex-wrap gap-2",children:s.seller.skills.map((e,t)=>(0,$k.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded text-xs",children:e},t))})]}),(0,$k.jsxs)("div",{className:"mb-4",children:[(0,$k.jsx)("h5",{className:"text-sm font-semibold text-primary-700 mb-2",children:"\u5275\u4f5c\u8005\u7c21\u4ecb"}),(0,$k.jsx)("p",{className:"text-sm text-primary-600 leading-relaxed",children:s.seller.bio})]}),(0,$k.jsxs)("div",{className:"text-xs text-primary-500 mb-4",children:["\u52a0\u5165\u6642\u9593\uff1a",s.seller.memberSince]}),(0,$k.jsx)(Ee,{to:`/creator/${s.seller.name.replace(/\s+/g,"-").toLowerCase()}`,className:"block w-full bg-accent-500 hover:bg-accent-600 text-white text-center py-2 px-4 rounded-lg transition-colors font-medium",children:"\u67e5\u770b\u5b8c\u6574\u6a94\u6848"})]})})]})]})]})},uC={"\u5e73\u9762\u8a2d\u8a08":[{id:1,title:"\u4f01\u696d\u54c1\u724cLOGO\u8a2d\u8a08",description:"\u63d0\u4f9b\u5b8c\u6574\u7684\u54c1\u724c\u8b58\u5225\u7cfb\u7d71\u8a2d\u8a08\uff0c\u5305\u542bLOGO\u3001\u540d\u7247\u3001\u4fe1\u7d19\u7b49\u57fa\u790e\u61c9\u7528",price:8e3,rating:4.8,reviews:156,deliveryTime:"7\u5929",tags:["LOGO\u8a2d\u8a08","\u54c1\u724c\u8b58\u5225","\u5305\u542b\u539f\u59cb\u6a94"],image:"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=150&h=100&fit=crop",alt:"LOGO\u8a2d\u8a08\u4f5c\u54c1\u5c55\u793a",link:"https://dribbble.com/shots/logo-design"},{type:"image",url:"https://images.unsplash.com/photo-1549082984-1323b94df9a6?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1549082984-1323b94df9a6?w=150&h=100&fit=crop",alt:"\u54c1\u724c\u8b58\u5225\u7cfb\u7d71",link:"https://behance.net/gallery/brand-identity"},{type:"image",url:"https://images.unsplash.com/photo-1561070791-2526d30994b5?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1561070791-2526d30994b5?w=150&h=100&fit=crop",alt:"\u540d\u7247\u8a2d\u8a08\u7bc4\u4f8b",link:"https://pinterest.com/pin/business-card-design"}],detailedDescription:"\n        <h3>\u670d\u52d9\u5167\u5bb9\u5305\u542b\uff1a</h3>\n        <ul>\n          <li>\u5c08\u696dLOGO\u8a2d\u8a08 (3-5\u500b\u521d\u7a3f)</li>\n          <li>\u5b8c\u6574\u54c1\u724c\u8272\u5f69\u898f\u7bc4</li>\n          <li>\u5b57\u9ad4\u642d\u914d\u5efa\u8b70</li>\n          <li>\u540d\u7247\u8a2d\u8a08\u6a21\u677f</li>\n          <li>\u4fe1\u7d19\u8a2d\u8a08\u6a21\u677f</li>\n          <li>\u793e\u7fa4\u5a92\u9ad4\u982d\u50cf\u8a2d\u8a08</li>\n        </ul>\n        \n        <h3>\u8a2d\u8a08\u6d41\u7a0b\uff1a</h3>\n        <ol>\n          <li>\u9700\u6c42\u6e9d\u901a\u8207\u54c1\u724c\u5b9a\u4f4d\u8a0e\u8ad6 (1-2\u5929)</li>\n          <li>\u6982\u5ff5\u767c\u60f3\u8207\u521d\u7a3f\u8a2d\u8a08 (2-3\u5929)</li>\n          <li>\u5ba2\u6236\u56de\u994b\u8207\u4fee\u6539\u8abf\u6574 (1-2\u5929)</li>\n          <li>\u6700\u7d42\u5b8c\u7a3f\u8207\u6a94\u6848\u4ea4\u4ed8 (1\u5929)</li>\n        </ol>\n        \n        <h3>\u4ea4\u4ed8\u6a94\u6848\uff1a</h3>\n        <ul>\n          <li>AI/EPS\u5411\u91cf\u6a94\u6848 (\u53ef\u7121\u9650\u653e\u5927)</li>\n          <li>PNG\u900f\u660e\u80cc\u666f\u6a94</li>\n          <li>JPG\u9ad8\u89e3\u6790\u5ea6\u6a94\u6848</li>\n          <li>\u54c1\u724c\u8272\u5f69\u8272\u78bc\u8868</li>\n          <li>\u4f7f\u7528\u898f\u7bc4\u8aaa\u660e\u66f8</li>\n        </ul>\n      ",seller:{name:"\u8a2d\u8a08\u5e2b\u5c0f\u738b",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face",rating:4.8,reviews:156,responseTime:"1\u5c0f\u6642\u5167",completedProjects:89,memberSince:"2022\u5e743\u6708",skills:["LOGO\u8a2d\u8a08","\u54c1\u724c\u8b58\u5225","UI\u8a2d\u8a08","\u5305\u88dd\u8a2d\u8a08"],bio:"\u64c1\u67095\u5e74\u4ee5\u4e0a\u54c1\u724c\u8a2d\u8a08\u7d93\u9a57\uff0c\u5c08\u7cbe\u65bc\u4f01\u696d\u8b58\u5225\u7cfb\u7d71\u8a2d\u8a08\u3002\u66fe\u670d\u52d9\u904e\u591a\u5bb6\u77e5\u540d\u4f01\u696d\uff0c\u5305\u62ec\u79d1\u6280\u516c\u53f8\u3001\u9910\u98f2\u54c1\u724c\u3001\u6642\u5c1a\u54c1\u724c\u7b49\u3002\u6ce8\u91cd\u54c1\u724c\u6545\u4e8b\u7684\u8996\u89ba\u5316\u5448\u73fe\uff0c\u5584\u65bc\u5c07\u62bd\u8c61\u6982\u5ff5\u8f49\u5316\u70ba\u5177\u9ad4\u7684\u8a2d\u8a08\u5143\u7d20\u3002",contact:{email:"designer.wang@email.com",phone:"0912-345-678",website:"https://portfolio.wang-design.com",line:"@wangdesign",instagram:"@wang_designer"}}},{id:2,title:"\u7cbe\u7f8e\u6d77\u5831\u8a2d\u8a08\u88fd\u4f5c",description:"\u5c08\u696d\u6d77\u5831\u8a2d\u8a08\uff0c\u9069\u7528\u65bc\u6d3b\u52d5\u5ba3\u50b3\u3001\u5546\u54c1\u63a8\u5ee3\u7b49\u7528\u9014",price:3500,rating:4.9,reviews:89,deliveryTime:"3\u5929",tags:["\u6d77\u5831\u8a2d\u8a08","\u5370\u5237\u54c1","\u6025\u4ef6"],image:"https://images.unsplash.com/photo-1558655146-d09347e92766?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1558655146-d09347e92766?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1558655146-d09347e92766?w=150&h=100&fit=crop",alt:"\u6d3b\u52d5\u6d77\u5831\u8a2d\u8a08",link:"https://dribbble.com/shots/poster-design"},{type:"image",url:"https://images.unsplash.com/photo-1493612276216-ee3925520721?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1493612276216-ee3925520721?w=150&h=100&fit=crop",alt:"\u97f3\u6a02\u6703\u6d77\u5831",link:"https://behance.net/gallery/music-poster"},{type:"image",url:"https://images.unsplash.com/photo-1561070791-36a0d2ef8bd2?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1561070791-36a0d2ef8bd2?w=150&h=100&fit=crop",alt:"\u5546\u696d\u6d77\u5831\u5c55\u793a",link:"https://pinterest.com/pin/poster-design"}],detailedDescription:"\n        <h3>\u6d77\u5831\u8a2d\u8a08\u670d\u52d9\uff1a</h3>\n        <ul>\n          <li>\u6d3b\u52d5\u5ba3\u50b3\u6d77\u5831\u8a2d\u8a08</li>\n          <li>\u5546\u54c1\u63a8\u5ee3\u6d77\u5831</li>\n          <li>\u5c55\u89bd\u5ba3\u50b3\u8a2d\u8a08</li>\n          <li>\u97f3\u6a02\u6703/\u6f14\u5531\u6703\u6d77\u5831</li>\n          <li>\u4f01\u696d\u5f62\u8c61\u6d77\u5831</li>\n        </ul>\n        \n        <h3>\u8a2d\u8a08\u7279\u8272\uff1a</h3>\n        <ul>\n          <li>\u8996\u89ba\u885d\u64ca\u529b\u5f37</li>\n          <li>\u8cc7\u8a0a\u5c64\u6b21\u6e05\u6670</li>\n          <li>\u7b26\u5408\u5370\u5237\u898f\u7bc4</li>\n          <li>\u591a\u7a2e\u5c3a\u5bf8\u9069\u914d</li>\n        </ul>\n      ",seller:{name:"\u5275\u610f\u5de5\u4f5c\u5ba4",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=80&h=80&fit=crop&crop=face",rating:4.9,reviews:89,responseTime:"2\u5c0f\u6642\u5167",completedProjects:156,memberSince:"2021\u5e748\u6708",skills:["\u6d77\u5831\u8a2d\u8a08","\u8996\u89ba\u8a2d\u8a08","\u5370\u5237\u8a2d\u8a08","\u63d2\u756b"],bio:"\u5c08\u696d\u8996\u89ba\u8a2d\u8a08\u5718\u968a\uff0c\u64c5\u9577\u5404\u985e\u6d77\u5831\u8207\u5ba3\u50b3\u7269\u8a2d\u8a08\u3002\u6ce8\u91cd\u8996\u89ba\u885d\u64ca\u529b\u8207\u8cc7\u8a0a\u50b3\u9054\u7684\u5e73\u8861\uff0c\u70ba\u5ba2\u6236\u6253\u9020\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u5ba3\u50b3\u4f5c\u54c1\u3002",contact:{email:"creative.studio@email.com",phone:"02-2345-6789",website:"https://creative-studio.tw",line:"@creativestudio",instagram:"@creative_studio_tw"}}},{id:3,title:"\u5546\u54c1\u5305\u88dd\u8a2d\u8a08",description:"\u5275\u65b0\u5305\u88dd\u8a2d\u8a08\uff0c\u63d0\u5347\u7522\u54c1\u50f9\u503c\u8207\u5e02\u5834\u7af6\u722d\u529b",price:12e3,rating:4.7,reviews:234,deliveryTime:"10\u5929",tags:["\u5305\u88dd\u8a2d\u8a08","\u5546\u7528\u6388\u6b0a","\u4fee\u6539\u6b21\u6578\u591a"],image:"https://images.unsplash.com/photo-1550009158-9ebf69173e03?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1550009158-9ebf69173e03?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1550009158-9ebf69173e03?w=150&h=100&fit=crop",alt:"\u7522\u54c1\u5305\u88dd\u8a2d\u8a08",link:"https://packageinspirations.com"},{type:"image",url:"https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=150&h=100&fit=crop",alt:"\u98df\u54c1\u5305\u88dd\u6848\u4f8b",link:"https://thedieline.com"}],detailedDescription:"\n        <h3>\u5305\u88dd\u8a2d\u8a08\u7bc4\u570d\uff1a</h3>\n        <ul>\n          <li>\u98df\u54c1\u5305\u88dd\u8a2d\u8a08</li>\n          <li>\u5316\u599d\u54c1\u5305\u88dd</li>\n          <li>\u96fb\u5b50\u7522\u54c1\u5305\u88dd</li>\n          <li>\u79ae\u54c1\u5305\u88dd\u8a2d\u8a08</li>\n        </ul>\n        \n        <h3>\u8a2d\u8a08\u8003\u91cf\uff1a</h3>\n        <ul>\n          <li>\u6750\u8cea\u8207\u5de5\u85dd\u9078\u64c7</li>\n          <li>\u6210\u672c\u63a7\u5236\u5efa\u8b70</li>\n          <li>\u5e02\u5834\u7af6\u722d\u5206\u6790</li>\n          <li>\u74b0\u4fdd\u6750\u8cea\u61c9\u7528</li>\n        </ul>\n      ",seller:{name:"\u5305\u88dd\u9054\u4eba",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b734?w=80&h=80&fit=crop&crop=face",rating:4.7,reviews:234,responseTime:"3\u5c0f\u6642\u5167",completedProjects:67,memberSince:"2020\u5e7412\u6708",skills:["\u5305\u88dd\u8a2d\u8a08","\u7522\u54c1\u8a2d\u8a08","3D\u5efa\u6a21","\u5370\u5237\u5de5\u85dd"],bio:"\u5c08\u7cbe\u65bc\u7522\u54c1\u5305\u88dd\u8a2d\u8a08\uff0c\u64c1\u6709\u8c50\u5bcc\u7684\u5305\u88dd\u5de5\u85dd\u8207\u6750\u8cea\u77e5\u8b58\u3002\u81f4\u529b\u65bc\u70ba\u7522\u54c1\u5275\u9020\u7368\u7279\u7684\u8996\u89ba\u8eab\u4efd\uff0c\u63d0\u5347\u54c1\u724c\u50f9\u503c\u8207\u5e02\u5834\u7af6\u722d\u529b\u3002",contact:{email:"package.master@email.com",phone:"0955-123-456",website:"https://package-design.studio",line:"@packagemaster",instagram:"@package_design_studio"}}},{id:4,title:"\u624b\u7e6a\u98a8\u683c\u63d2\u756b\u8a2d\u8a08",description:"\u5ba2\u88fd\u5316\u63d2\u756b\u8a2d\u8a08\uff0c\u9069\u7528\u65bc\u66f8\u7c4d\u3001\u7db2\u7ad9\u3001\u5ba3\u50b3\u7b49\u591a\u7a2e\u7528\u9014",price:5500,rating:4.6,reviews:67,deliveryTime:"5\u5929",tags:["\u63d2\u756b","\u5305\u542b\u539f\u59cb\u6a94"],image:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=150&h=100&fit=crop",alt:"\u624b\u7e6a\u63d2\u756b\u4f5c\u54c1",link:"https://dribbble.com/shots/illustration"},{type:"image",url:"https://images.unsplash.com/photo-1452860606245-08befc0ff44b?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1452860606245-08befc0ff44b?w=150&h=100&fit=crop",alt:"\u7e6a\u756b\u5de5\u5177\u8207\u4f5c\u54c1",link:"https://behance.net/gallery/illustration"}],detailedDescription:"\n        <h3>\u63d2\u756b\u985e\u578b\uff1a</h3>\n        <ul>\n          <li>\u66f8\u7c4d\u63d2\u756b</li>\n          <li>\u7db2\u7ad9\u63d2\u5716</li>\n          <li>\u89d2\u8272\u8a2d\u8a08</li>\n          <li>\u5834\u666f\u63d2\u756b</li>\n          <li>\u5546\u696d\u63d2\u5716</li>\n        </ul>\n        \n        <h3>\u98a8\u683c\u7279\u8272\uff1a</h3>\n        <ul>\n          <li>\u624b\u7e6a\u8cea\u611f</li>\n          <li>\u6eab\u6696\u8272\u8abf</li>\n          <li>\u7d30\u81a9\u7b46\u89f8</li>\n          <li>\u6545\u4e8b\u6027\u5f37</li>\n        </ul>\n      ",seller:{name:"\u63d2\u756b\u5e2b\u5c0f\u7f8e",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=80&h=80&fit=crop&crop=face",rating:4.6,reviews:67,responseTime:"4\u5c0f\u6642\u5167",completedProjects:123,memberSince:"2021\u5e745\u6708",skills:["\u624b\u7e6a\u63d2\u756b","\u6578\u4f4d\u63d2\u756b","\u89d2\u8272\u8a2d\u8a08","\u6545\u4e8b\u677f"],bio:"\u5c08\u696d\u63d2\u756b\u5e2b\uff0c\u64c5\u9577\u624b\u7e6a\u98a8\u683c\u63d2\u756b\u5275\u4f5c\u3002\u4f5c\u54c1\u5145\u6eff\u6eab\u6696\u8207\u6545\u4e8b\u6027\uff0c\u9069\u5408\u5404\u7a2e\u5546\u696d\u8207\u85dd\u8853\u7528\u9014\u3002\u6ce8\u91cd\u8207\u5ba2\u6236\u7684\u6e9d\u901a\uff0c\u78ba\u4fdd\u4f5c\u54c1\u7b26\u5408\u9700\u6c42\u3002",contact:{email:"meimei.illustration@email.com",phone:"0988-567-890",website:"https://meimei-illustration.com",line:"@meimeiart",instagram:"@meimei_illustration"}}},{id:5,title:"DM\u50b3\u55ae\u8a2d\u8a08",description:"\u5438\u775b\u7684DM\u8a2d\u8a08\uff0c\u6709\u6548\u50b3\u9054\u8a0a\u606f\u4e26\u63d0\u5347\u5ba3\u50b3\u6548\u679c",price:2500,rating:4.5,reviews:123,deliveryTime:"2\u5929",tags:["DM\u8a2d\u8a08","\u50b3\u55ae\u8a2d\u8a08","\u6025\u4ef6"],image:"https://images.unsplash.com/photo-1541414779316-956a5084c0d4?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=150&h=100&fit=crop",alt:"DM\u50b3\u55ae\u8a2d\u8a08",link:"https://canva.com/templates/flyers"}],detailedDescription:"\n        <h3>DM\u8a2d\u8a08\u670d\u52d9\uff1a</h3>\n        <ul>\n          <li>\u4fc3\u92b7\u6d3b\u52d5DM</li>\n          <li>\u9910\u5ef3\u83dc\u55ae\u8a2d\u8a08</li>\n          <li>\u5e97\u9762\u5ba3\u50b3\u55ae</li>\n          <li>\u670d\u52d9\u4ecb\u7d39\u647a\u9801</li>\n        </ul>\n      ",seller:{name:"\u5ee3\u544a\u5c0f\u7d44",avatar:"https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=80&h=80&fit=crop&crop=face",rating:4.5,reviews:123,responseTime:"1\u5c0f\u6642\u5167",completedProjects:234,memberSince:"2022\u5e741\u6708",skills:["DM\u8a2d\u8a08","\u5ee3\u544a\u8a2d\u8a08","\u5370\u5237\u8a2d\u8a08","\u7248\u9762\u8a2d\u8a08"],bio:"\u5c08\u696d\u5ee3\u544a\u8a2d\u8a08\u5718\u968a\uff0c\u5c08\u7cbe\u65bc\u5404\u985e\u5ba3\u50b3\u7269\u8a2d\u8a08\u3002\u5feb\u901f\u56de\u61c9\uff0c\u9ad8\u6548\u88fd\u4f5c\uff0c\u70ba\u5ba2\u6236\u63d0\u4f9b\u6700\u5177\u5ba3\u50b3\u6548\u679c\u7684\u8a2d\u8a08\u65b9\u6848\u3002",contact:{email:"ad.team@email.com",phone:"02-8888-9999",website:"https://ad-design-team.com",line:"@adteam",instagram:"@ad_design_group"}}},{id:6,title:"\u4f01\u696d\u578b\u9304\u8a2d\u8a08",description:"\u5c08\u696d\u578b\u9304\u8a2d\u8a08\uff0c\u5b8c\u6574\u5448\u73fe\u4f01\u696d\u5f62\u8c61\u8207\u7522\u54c1\u8cc7\u8a0a",price:15e3,rating:4.8,reviews:45,deliveryTime:"14\u5929",tags:["\u578b\u9304\u8a2d\u8a08","\u5370\u5237\u54c1","\u5546\u7528\u6388\u6b0a"],image:"https://images.unsplash.com/photo-1542744094-3a31f272c490?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=150&h=100&fit=crop",alt:"\u4f01\u696d\u578b\u9304\u8a2d\u8a08",link:"https://dribbble.com/shots/catalog-design"}],detailedDescription:"\n        <h3>\u578b\u9304\u8a2d\u8a08\u5167\u5bb9\uff1a</h3>\n        <ul>\n          <li>\u4f01\u696d\u5f62\u8c61\u5c55\u793a</li>\n          <li>\u7522\u54c1\u76ee\u9304\u8a2d\u8a08</li>\n          <li>\u670d\u52d9\u4ecb\u7d39\u7248\u9762</li>\n          <li>\u806f\u7d61\u8cc7\u8a0a\u6574\u5408</li>\n        </ul>\n      ",seller:{name:"\u4f01\u696d\u8a2d\u8a08\u5718\u968a",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=80&h=80&fit=crop&crop=face",rating:4.8,reviews:45,responseTime:"6\u5c0f\u6642\u5167",completedProjects:78,memberSince:"2020\u5e746\u6708",skills:["\u578b\u9304\u8a2d\u8a08","\u4f01\u696d\u5f62\u8c61","\u7248\u9762\u8a2d\u8a08","\u5370\u5237\u898f\u5283"],bio:"\u5c08\u696d\u4f01\u696d\u8a2d\u8a08\u5718\u968a\uff0c\u64c5\u9577\u5927\u578b\u578b\u9304\u8207\u4f01\u696d\u520a\u7269\u8a2d\u8a08\u3002\u6ce8\u91cd\u8cc7\u8a0a\u67b6\u69cb\u8207\u8996\u89ba\u5c64\u6b21\uff0c\u70ba\u4f01\u696d\u6253\u9020\u5c08\u696d\u5f62\u8c61\u3002",contact:{email:"corporate.design@email.com",phone:"02-7777-8888",website:"https://corporate-design.pro",line:"@corpdesign",instagram:"@corporate_design_team"}}}],"\u7db2\u9801\u8a2d\u8a08":[{id:7,title:"\u97ff\u61c9\u5f0f\u4f01\u696d\u5b98\u7db2\u8a2d\u8a08",description:"\u73fe\u4ee3\u5316\u4f01\u696d\u5b98\u7db2\u8a2d\u8a08\uff0c\u652f\u63f4\u684c\u9762\u3001\u5e73\u677f\u3001\u624b\u6a5f\u5b8c\u7f8e\u986f\u793a",price:25e3,rating:4.9,reviews:78,deliveryTime:"21\u5929",tags:["\u97ff\u61c9\u5f0f\u8a2d\u8a08","\u4f01\u696d\u5b98\u7db2","\u5305\u542b\u539f\u59cb\u6a94"],image:"https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=150&h=100&fit=crop",alt:"\u97ff\u61c9\u5f0f\u7db2\u7ad9\u8a2d\u8a08",link:"https://dribbble.com/shots/web-design"},{type:"image",url:"https://images.unsplash.com/photo-1555421689-491a97ff2040?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1555421689-491a97ff2040?w=150&h=100&fit=crop",alt:"\u4f01\u696d\u7db2\u7ad9\u6848\u4f8b",link:"https://awwwards.com"},{type:"video",url:"https://images.unsplash.com/photo-1581291518857-4e27b48ff24e?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1581291518857-4e27b48ff24e?w=150&h=100&fit=crop",alt:"\u7db2\u7ad9\u4e92\u52d5\u6548\u679c\u5c55\u793a",link:"https://youtube.com/watch?v=responsive-design"}],detailedDescription:"\n        <h3>\u7db2\u7ad9\u8a2d\u8a08\u670d\u52d9\uff1a</h3>\n        <ul>\n          <li>\u97ff\u61c9\u5f0f\u7db2\u9801\u8a2d\u8a08</li>\n          <li>\u4f7f\u7528\u8005\u9ad4\u9a57\u8a2d\u8a08 (UX)</li>\n          <li>\u4f7f\u7528\u8005\u4ecb\u9762\u8a2d\u8a08 (UI)</li>\n          <li>\u7db2\u7ad9\u67b6\u69cb\u898f\u5283</li>\n          <li>SEO\u512a\u5316\u5efa\u8b70</li>\n          <li>\u7db2\u7ad9\u6548\u80fd\u512a\u5316</li>\n        </ul>\n        \n        <h3>\u6280\u8853\u7279\u8272\uff1a</h3>\n        <ul>\n          <li>HTML5/CSS3/JavaScript</li>\n          <li>Bootstrap\u6846\u67b6</li>\n          <li>\u8de8\u700f\u89bd\u5668\u76f8\u5bb9</li>\n          <li>\u5feb\u901f\u8f09\u5165\u8a2d\u8a08</li>\n          <li>\u641c\u7d22\u5f15\u64ce\u53cb\u5584</li>\n        </ul>\n        \n        <h3>\u4ea4\u4ed8\u5167\u5bb9\uff1a</h3>\n        <ul>\n          <li>\u5b8c\u6574\u7db2\u7ad9\u8a2d\u8a08\u6a94</li>\n          <li>\u97ff\u61c9\u5f0f\u6e2c\u8a66\u5831\u544a</li>\n          <li>\u4f7f\u7528\u8aaa\u660e\u6587\u4ef6</li>\n          <li>\u5f8c\u53f0\u7ba1\u7406\u57f9\u8a13</li>\n        </ul>\n      ",seller:{name:"WebDesign Pro",avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=80&h=80&fit=crop&crop=face",rating:4.9,reviews:78,responseTime:"2\u5c0f\u6642\u5167",completedProjects:145,memberSince:"2019\u5e749\u6708",skills:["\u97ff\u61c9\u5f0f\u8a2d\u8a08","UI/UX","JavaScript","SEO\u512a\u5316"],bio:"\u5c08\u696d\u7db2\u9801\u8a2d\u8a08\u5e2b\uff0c\u64c1\u6709\u8c50\u5bcc\u7684\u4f01\u696d\u7db2\u7ad9\u8a2d\u8a08\u7d93\u9a57\u3002\u5c08\u7cbe\u65bc\u97ff\u61c9\u5f0f\u8a2d\u8a08\u8207\u4f7f\u7528\u8005\u9ad4\u9a57\u512a\u5316\uff0c\u81f4\u529b\u65bc\u5275\u9020\u7f8e\u89c0\u4e14\u5be6\u7528\u7684\u7db2\u7ad9\u3002",contact:{email:"webdesign.pro@email.com",phone:"0977-333-444",website:"https://webdesign-pro.tw",line:"@webdesignpro",instagram:"@webdesign_pro_tw"}}},{id:8,title:"Landing Page \u8a2d\u8a08",description:"\u9ad8\u8f49\u63db\u7387\u7684\u7522\u54c1\u8457\u9678\u9801\u8a2d\u8a08\uff0c\u5c08\u6ce8\u65bc\u4f7f\u7528\u8005\u9ad4\u9a57",price:8e3,rating:4.7,reviews:134,deliveryTime:"7\u5929",tags:["Landing Page","\u9ad8\u8f49\u63db\u7387","\u6025\u4ef6"],image:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=150&h=100&fit=crop",alt:"Landing Page\u8a2d\u8a08",link:"https://landingfolio.com"},{type:"image",url:"https://images.unsplash.com/photo-1551650975-87deedd944c3?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1551650975-87deedd944c3?w=150&h=100&fit=crop",alt:"\u8f49\u63db\u7387\u5206\u6790",link:"https://unbounce.com/landing-page-examples"}],detailedDescription:"\n        <h3>Landing Page \u7279\u8272\uff1a</h3>\n        <ul>\n          <li>\u9ad8\u8f49\u63db\u7387\u8a2d\u8a08</li>\n          <li>A/B\u6e2c\u8a66\u652f\u63f4</li>\n          <li>\u884c\u52d5\u547c\u7c72\u512a\u5316</li>\n          <li>\u8868\u55ae\u8a2d\u8a08\u512a\u5316</li>\n          <li>\u8f09\u5165\u901f\u5ea6\u512a\u5316</li>\n        </ul>\n        \n        <h3>\u5206\u6790\u5de5\u5177\u6574\u5408\uff1a</h3>\n        <ul>\n          <li>Google Analytics</li>\n          <li>Facebook Pixel</li>\n          <li>\u71b1\u9ede\u5206\u6790\u5de5\u5177</li>\n          <li>\u8f49\u63db\u8ffd\u8e64\u8a2d\u5b9a</li>\n        </ul>\n      ",seller:{name:"UX\u8a2d\u8a08\u5e2b",avatar:"https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=80&h=80&fit=crop&crop=face",rating:4.7,reviews:134,responseTime:"1\u5c0f\u6642\u5167",completedProjects:89,memberSince:"2021\u5e742\u6708",skills:["UX\u8a2d\u8a08","\u8f49\u63db\u7387\u512a\u5316","A/B\u6e2c\u8a66","\u6578\u64da\u5206\u6790"],bio:"\u5c08\u7cbe\u65bc\u8f49\u63db\u7387\u512a\u5316\u7684UX\u8a2d\u8a08\u5e2b\uff0c\u900f\u904e\u6578\u64da\u5206\u6790\u8207\u4f7f\u7528\u8005\u884c\u70ba\u7814\u7a76\uff0c\u8a2d\u8a08\u51fa\u9ad8\u8f49\u63db\u7387\u7684Landing Page\u3002",contact:{email:"ux.designer@email.com",phone:"0966-777-888",website:"https://ux-optimization.com",line:"@uxdesigner",instagram:"@ux_designer_tw"}}},{id:9,title:"E-commerce \u8cfc\u7269\u7db2\u7ad9",description:"\u5b8c\u6574\u7684\u96fb\u5546\u7db2\u7ad9\u8a2d\u8a08\uff0c\u5305\u542b\u8cfc\u7269\u8eca\u3001\u7d50\u5e33\u6d41\u7a0b",price:45e3,rating:4.8,reviews:56,deliveryTime:"30\u5929",tags:["\u96fb\u5546\u7db2\u7ad9","\u8cfc\u7269\u8eca","\u5546\u7528\u6388\u6b0a"],image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=150&h=100&fit=crop",alt:"\u96fb\u5546\u7db2\u7ad9\u8a2d\u8a08",link:"https://shopify.com/examples"},{type:"image",url:"https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=150&h=100&fit=crop",alt:"\u8cfc\u7269\u8eca\u6d41\u7a0b",link:"https://baymard.com/checkout-usability"}],detailedDescription:"\n        <h3>\u96fb\u5546\u529f\u80fd\uff1a</h3>\n        <ul>\n          <li>\u5546\u54c1\u76ee\u9304\u7ba1\u7406</li>\n          <li>\u8cfc\u7269\u8eca\u7cfb\u7d71</li>\n          <li>\u5b89\u5168\u7d50\u5e33\u6d41\u7a0b</li>\n          <li>\u6703\u54e1\u7cfb\u7d71</li>\n          <li>\u8a02\u55ae\u7ba1\u7406</li>\n          <li>\u5eab\u5b58\u7ba1\u7406</li>\n        </ul>\n        \n        <h3>\u91d1\u6d41\u6574\u5408\uff1a</h3>\n        <ul>\n          <li>\u4fe1\u7528\u5361\u652f\u4ed8</li>\n          <li>\u7b2c\u4e09\u65b9\u652f\u4ed8</li>\n          <li>\u8ca8\u5230\u4ed8\u6b3e</li>\n          <li>\u5206\u671f\u4ed8\u6b3e</li>\n        </ul>\n      ",seller:{name:"\u96fb\u5546\u5c08\u5bb6\u5718\u968a",avatar:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=80&h=80&fit=crop&crop=face",rating:4.8,reviews:56,responseTime:"4\u5c0f\u6642\u5167",completedProjects:34,memberSince:"2020\u5e743\u6708",skills:["\u96fb\u5546\u958b\u767c","\u91d1\u6d41\u6574\u5408","\u5f8c\u53f0\u7cfb\u7d71","\u8cc7\u6599\u5eab\u8a2d\u8a08"],bio:"\u5c08\u696d\u96fb\u5546\u958b\u767c\u5718\u968a\uff0c\u64c1\u6709\u8c50\u5bcc\u7684\u7dda\u4e0a\u8cfc\u7269\u7db2\u7ad9\u958b\u767c\u7d93\u9a57\u3002\u5f9e\u524d\u53f0\u8a2d\u8a08\u5230\u5f8c\u53f0\u7ba1\u7406\uff0c\u63d0\u4f9b\u5b8c\u6574\u7684\u96fb\u5546\u89e3\u6c7a\u65b9\u6848\u3002",contact:{email:"ecommerce.team@email.com",phone:"02-5555-6666",website:"https://ecommerce-experts.com",line:"@ecommerceteam",instagram:"@ecommerce_experts_tw"}}},{id:10,title:"WordPress \u4e3b\u984c\u5ba2\u88fd\u5316",description:"\u5c08\u696dWordPress\u4e3b\u984c\u5ba2\u88fd\u5316\uff0c\u7b26\u5408\u54c1\u724c\u5f62\u8c61",price:12e3,rating:4.6,reviews:89,deliveryTime:"14\u5929",tags:["WordPress","\u4e3b\u984c\u5ba2\u88fd","\u4fee\u6539\u6b21\u6578\u591a"],image:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=300&h=200&fit=crop",media:[{type:"image",url:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=150&h=100&fit=crop",alt:"WordPress\u4e3b\u984c\u8a2d\u8a08",link:"https://themeforest.net"}],detailedDescription:"\n        <h3>WordPress\u670d\u52d9\uff1a</h3>\n        <ul>\n          <li>\u4e3b\u984c\u5ba2\u88fd\u5316\u8a2d\u8a08</li>\n          <li>\u5916\u639b\u529f\u80fd\u958b\u767c</li>\n          <li>\u7db2\u7ad9\u6548\u80fd\u512a\u5316</li>\n          <li>\u5b89\u5168\u6027\u8a2d\u5b9a</li>\n          <li>SEO\u8a2d\u5b9a\u512a\u5316</li>\n        </ul>\n      ",seller:{name:"WP\u5c08\u5bb6",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face",rating:4.6,reviews:89,responseTime:"3\u5c0f\u6642\u5167",completedProjects:167,memberSince:"2019\u5e747\u6708",skills:["WordPress","PHP","\u4e3b\u984c\u958b\u767c","\u5916\u639b\u958b\u767c"],bio:"WordPress\u5c08\u5bb6\uff0c\u5c08\u7cbe\u65bc\u4e3b\u984c\u5ba2\u88fd\u5316\u8207\u5916\u639b\u958b\u767c\u3002\u64c1\u6709\u8c50\u5bcc\u7684WordPress\u7db2\u7ad9\u5efa\u7f6e\u7d93\u9a57\uff0c\u63d0\u4f9b\u5c08\u696d\u7684\u6280\u8853\u652f\u63f4\u3002",contact:{email:"wp.expert@email.com",phone:"0933-444-555",website:"https://wp-expert.tw",line:"@wpexpert",instagram:"@wp_expert_tw"}}}],"\u7a0b\u5f0f\u958b\u767c":[{id:11,title:"React \u524d\u7aef\u958b\u767c",description:"\u4f7f\u7528React\u6846\u67b6\u958b\u767c\u73fe\u4ee3\u5316\u7684\u524d\u7aef\u61c9\u7528\u7a0b\u5f0f",price:35e3,rating:4.9,reviews:67,deliveryTime:"21\u5929",tags:["React","\u524d\u7aef\u958b\u767c","\u5305\u542b\u539f\u59cb\u6a94"],image:"https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=300&h=200&fit=crop",seller:{name:"\u524d\u7aef\u5de5\u7a0b\u5e2b David",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=80&h=80&fit=crop&crop=face",rating:4.9,reviews:67,responseTime:"4\u5c0f\u6642\u5167",completedProjects:134,memberSince:"2019\u5e745\u6708",skills:["React","JavaScript","TypeScript","Next.js","\u524d\u7aef\u67b6\u69cb"],bio:"\u8cc7\u6df1\u524d\u7aef\u5de5\u7a0b\u5e2b\uff0c\u64c1\u67096\u5e74React\u958b\u767c\u7d93\u9a57\u3002\u5c08\u7cbe\u65bc\u73fe\u4ee3\u5316\u524d\u7aef\u67b6\u69cb\u8a2d\u8a08\uff0c\u66fe\u53c3\u8207\u591a\u500b\u5927\u578b\u5c08\u6848\u958b\u767c\uff0c\u6ce8\u91cd\u7a0b\u5f0f\u78bc\u54c1\u8cea\u8207\u4f7f\u7528\u8005\u9ad4\u9a57\u3002",contact:{email:"david.frontend@email.com",phone:"0987-654-321",website:"https://david-frontend.dev",line:"@daviddev",instagram:"@david_codes"}},media:[{type:"image",url:"https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=150&h=100&fit=crop",alt:"React\u61c9\u7528\u7a0b\u5f0f\u958b\u767c",link:"https://github.com/david-frontend"},{type:"image",url:"https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=150&h=100&fit=crop",alt:"\u524d\u7aef\u67b6\u69cb\u8a2d\u8a08",link:"https://codepen.io/david-frontend"}],detailedDescription:"\n        <h3>\u670d\u52d9\u5167\u5bb9\u5305\u542b\uff1a</h3>\n        <ul>\n          <li>React\u61c9\u7528\u7a0b\u5f0f\u958b\u767c</li>\n          <li>\u97ff\u61c9\u5f0f\u7db2\u9801\u8a2d\u8a08</li>\n          <li>\u524d\u7aef\u67b6\u69cb\u898f\u5283</li>\n          <li>\u7a0b\u5f0f\u78bc\u54c1\u8cea\u512a\u5316</li>\n          <li>\u6548\u80fd\u8abf\u512a</li>\n          <li>\u90e8\u7f72\u8207\u7dad\u8b77\u6307\u5c0e</li>\n        </ul>\n        \n        <h3>\u6280\u8853\u7279\u8272\uff1a</h3>\n        <ol>\n          <li>\u4f7f\u7528\u6700\u65b0React\u6846\u67b6\u8207Hook</li>\n          <li>TypeScript\u975c\u614b\u578b\u5225\u6aa2\u67e5</li>\n          <li>\u7d44\u4ef6\u5316\u958b\u767c\u6a21\u5f0f</li>\n          <li>\u97ff\u61c9\u5f0f\u8a2d\u8a08</li>\n          <li>SEO\u53cb\u5584\u8a2d\u8a08</li>\n        </ol>\n      "},{id:12,title:"Node.js \u5f8c\u7aefAPI\u958b\u767c",description:"\u5efa\u7acb\u7a69\u5b9a\u9ad8\u6548\u7684\u5f8c\u7aefAPI\u670d\u52d9\uff0c\u652f\u63f4RESTful\u67b6\u69cb",price:28e3,rating:4.8,reviews:45,deliveryTime:"18\u5929",tags:["Node.js","API\u958b\u767c","\u8cc7\u6599\u5eab\u8a2d\u8a08"],image:null},{id:13,title:"APP\u7a0b\u5f0f\u958b\u767c",description:"iOS/Android\u96d9\u5e73\u53f0\u539f\u751fAPP\u958b\u767c",price:8e4,rating:4.7,reviews:34,deliveryTime:"45\u5929",tags:["APP\u958b\u767c","\u96d9\u5e73\u53f0","\u5546\u7528\u6388\u6b0a"],image:null},{id:14,title:"\u7db2\u7ad9\u6548\u80fd\u512a\u5316",description:"\u63d0\u5347\u7db2\u7ad9\u8f09\u5165\u901f\u5ea6\uff0c\u6539\u5584\u4f7f\u7528\u8005\u9ad4\u9a57",price:15e3,rating:4.6,reviews:78,deliveryTime:"10\u5929",tags:["\u6548\u80fd\u512a\u5316","\u901f\u5ea6\u63d0\u5347","\u6025\u4ef6"],image:null}],"\u884c\u92b7\u4f01\u5283":[{id:15,title:"\u6578\u4f4d\u884c\u92b7\u7b56\u7565\u898f\u5283",description:"\u5b8c\u6574\u7684\u6578\u4f4d\u884c\u92b7\u7b56\u7565\u5236\u5b9a\uff0c\u5305\u542bSEO\u3001\u793e\u7fa4\u3001\u5ee3\u544a\u6295\u653e",price:2e4,rating:4.8,reviews:92,deliveryTime:"14\u5929",tags:["\u884c\u92b7\u7b56\u7565","SEO","\u793e\u7fa4\u7d93\u71df"],image:null},{id:16,title:"\u793e\u7fa4\u5a92\u9ad4\u7d93\u71df\u4f01\u5283",description:"Facebook\u3001Instagram\u7b49\u793e\u7fa4\u5e73\u53f0\u7d93\u71df\u7b56\u7565",price:12e3,rating:4.7,reviews:156,deliveryTime:"7\u5929",tags:["\u793e\u7fa4\u7d93\u71df","Facebook","Instagram"],image:null},{id:17,title:"Google Ads \u5ee3\u544a\u6295\u653e",description:"\u5c08\u696dGoogle\u5ee3\u544a\u6295\u653e\u7b56\u7565\uff0c\u63d0\u5347ROI",price:8e3,rating:4.9,reviews:67,deliveryTime:"5\u5929",tags:["Google Ads","\u5ee3\u544a\u6295\u653e","\u9ad8ROI"],image:null},{id:18,title:"\u54c1\u724c\u884c\u92b7\u4f01\u5283\u66f8",description:"\u5b8c\u6574\u7684\u54c1\u724c\u884c\u92b7\u4f01\u5283\u66f8\u64b0\u5beb\uff0c\u5f9e\u5b9a\u4f4d\u5230\u57f7\u884c",price:25e3,rating:4.6,reviews:45,deliveryTime:"21\u5929",tags:["\u54c1\u724c\u4f01\u5283","\u5e02\u5834\u5206\u6790","\u57f7\u884c\u7b56\u7565"],image:null}],"\u6587\u6848\u64b0\u5beb":[{id:19,title:"\u92b7\u552e\u6587\u6848\u64b0\u5beb",description:"\u9ad8\u8f49\u63db\u7387\u7684\u92b7\u552e\u6587\u6848\uff0c\u63d0\u5347\u7522\u54c1\u92b7\u552e\u529b",price:5e3,rating:4.8,reviews:123,deliveryTime:"3\u5929",tags:["\u92b7\u552e\u6587\u6848","\u9ad8\u8f49\u63db","\u6025\u4ef6"],image:null},{id:20,title:"SEO\u6587\u7ae0\u64b0\u5beb",description:"\u7b26\u5408SEO\u898f\u7bc4\u7684\u512a\u8cea\u6587\u7ae0\u5167\u5bb9\u64b0\u5beb",price:3e3,rating:4.7,reviews:89,deliveryTime:"5\u5929",tags:["SEO\u6587\u7ae0","\u95dc\u9375\u5b57\u512a\u5316","\u5305\u542b\u539f\u59cb\u6a94"],image:null},{id:21,title:"\u54c1\u724c\u6545\u4e8b\u64b0\u5beb",description:"\u6253\u9020\u611f\u4eba\u7684\u54c1\u724c\u6545\u4e8b\uff0c\u5efa\u7acb\u60c5\u611f\u9023\u7d50",price:8e3,rating:4.9,reviews:67,deliveryTime:"7\u5929",tags:["\u54c1\u724c\u6545\u4e8b","\u60c5\u611f\u9023\u7d50","\u4fee\u6539\u6b21\u6578\u591a"],image:null},{id:22,title:"\u7522\u54c1\u63cf\u8ff0\u6587\u6848",description:"\u5438\u5f15\u4eba\u7684\u7522\u54c1\u63cf\u8ff0\u6587\u6848\uff0c\u63d0\u5347\u8cfc\u8cb7\u610f\u9858",price:2500,rating:4.6,reviews:145,deliveryTime:"2\u5929",tags:["\u7522\u54c1\u6587\u6848","\u8cfc\u8cb7\u8a98\u5c0e","\u6025\u4ef6"],image:null}],"\u5f71\u97f3\u88fd\u4f5c":[{id:1,title:"\u4f01\u696d\u5f62\u8c61\u5f71\u7247\u88fd\u4f5c",price:35e3,rating:4.9,reviews:45,description:"\u5c08\u696d\u4f01\u696d\u5f62\u8c61\u5f71\u7247\u88fd\u4f5c\uff0c\u5f9e\u8173\u672c\u64b0\u5beb\u5230\u5f8c\u88fd\u5b8c\u6210\u4e00\u689d\u9f8d\u670d\u52d9",tags:["\u4f01\u696d\u5f71\u7247","\u8173\u672c\u64b0\u5beb","\u5c08\u696d\u651d\u5f71","\u5f8c\u88fd\u526a\u8f2f"],seller:{name:"\u5f71\u97f3\u5de5\u4f5c\u5ba4 Alex",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=80&h=80&fit=crop&crop=face",rating:4.9,reviews:45,responseTime:"6\u5c0f\u6642\u5167",completedProjects:78,memberSince:"2020\u5e74",skills:["\u5f71\u7247\u88fd\u4f5c","\u8173\u672c\u64b0\u5beb","\u5f8c\u88fd\u526a\u8f2f","\u52d5\u756b\u88fd\u4f5c"],bio:"\u5c08\u696d\u5f71\u97f3\u88fd\u4f5c\u5718\u968a\uff0c\u64c1\u67098\u5e74\u4f01\u696d\u5f71\u7247\u88fd\u4f5c\u7d93\u9a57\u3002\u66fe\u70ba\u591a\u5bb6\u4e0a\u5e02\u516c\u53f8\u88fd\u4f5c\u5f62\u8c61\u5f71\u7247\uff0c\u64c5\u9577\u5c07\u4f01\u696d\u7406\u5ff5\u8f49\u5316\u70ba\u52d5\u4eba\u7684\u8996\u89ba\u6545\u4e8b\u3002",contact:{email:"alex.videostudio@email.com",phone:"0922-888-999",website:"https://alex-video-studio.com",line:"@alexvideo",instagram:"@alex_video_studio"}},media:[{type:"image",url:"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=150&h=100&fit=crop",alt:"\u4f01\u696d\u5f71\u7247\u88fd\u4f5c\u73fe\u5834",link:"https://unsplash.com/@tvick"},{type:"image",url:"https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=150&h=100&fit=crop",alt:"\u5c08\u696d\u651d\u5f71\u8a2d\u5099",link:"https://unsplash.com/@jakobowens1"},{type:"video",url:"https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?w=150&h=100&fit=crop",alt:"\u5f71\u7247\u5f8c\u88fd\u5de5\u4f5c",link:"https://unsplash.com/@ale_s_bianchi"}],detailedDescription:"\n        <h3>\u670d\u52d9\u5167\u5bb9\u5305\u542b\uff1a</h3>\n        <ul>\n          <li>\u524d\u671f\u4f01\u5283\u8207\u8173\u672c\u64b0\u5beb</li>\n          <li>\u5c08\u696d\u651d\u5f71\u5718\u968a\u62cd\u651d</li>\n          <li>\u5f8c\u88fd\u526a\u8f2f\u8207\u7279\u6548\u88fd\u4f5c</li>\n          <li>\u914d\u97f3\u8207\u97f3\u6548\u8a2d\u8a08</li>\n          <li>\u5b57\u5e55\u88fd\u4f5c</li>\n          <li>\u591a\u7a2e\u683c\u5f0f\u6a94\u6848\u4ea4\u4ed8</li>\n        </ul>\n        \n        <h3>\u88fd\u4f5c\u6d41\u7a0b\uff1a</h3>\n        <ol>\n          <li>\u9700\u6c42\u8a0e\u8ad6\u8207\u4f01\u5283\u69cb\u601d (3-5\u5929)</li>\n          <li>\u8173\u672c\u64b0\u5beb\u8207\u5206\u93e1\u8a2d\u8a08 (3-5\u5929)</li>\n          <li>\u5be6\u5730\u62cd\u651d\u4f5c\u696d (1-3\u5929)</li>\n          <li>\u5f8c\u88fd\u526a\u8f2f\u8207\u7279\u6548\u88fd\u4f5c (7-10\u5929)</li>\n          <li>\u914d\u97f3\u914d\u6a02\u8207\u6700\u7d42\u5b8c\u7a3f (2-3\u5929)</li>\n        </ol>\n        \n        <h3>\u4ea4\u4ed8\u5167\u5bb9\uff1a</h3>\n        <ul>\n          <li>4K\u9ad8\u756b\u8cea\u5f71\u7247\u6a94\u6848</li>\n          <li>\u793e\u7fa4\u5a92\u9ad4\u9069\u7528\u7248\u672c</li>\n          <li>\u5b57\u5e55\u6a94\u6848 (\u4e2d\u82f1\u5c0d\u7167)</li>\n          <li>\u62cd\u651d\u82b1\u7d6e\u5f71\u7247</li>\n          <li>\u5c08\u6848\u7d20\u6750\u6a94\u6848</li>\n        </ul>\n      "},{id:2,title:"\u5546\u54c1\u651d\u5f71\u8207\u4fee\u5716",price:8e3,rating:4.7,reviews:89,description:"\u5c08\u696d\u5546\u54c1\u651d\u5f71\u670d\u52d9\uff0c\u63d0\u4f9b\u7cbe\u7f8e\u7684\u5546\u54c1\u7167\u7247\u7528\u65bc\u96fb\u5546\u5e73\u53f0",tags:["\u5546\u54c1\u651d\u5f71","\u4fee\u5716","\u96fb\u5546","\u53bb\u80cc"],seller:{name:"\u651d\u5f71\u5e2b Bella",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b494?w=80&h=80&fit=crop&crop=face",rating:4.7,reviews:89,responseTime:"4\u5c0f\u6642\u5167",completedProjects:156,memberSince:"2019\u5e74",skills:["\u5546\u54c1\u651d\u5f71","\u4fee\u5716\u5f8c\u88fd","\u71c8\u5149\u8a2d\u8a08","\u8272\u5f69\u8abf\u6574"],bio:"\u5c08\u696d\u5546\u54c1\u651d\u5f71\u5e2b\uff0c\u5c08\u7cbe\u65bc\u96fb\u5546\u7522\u54c1\u62cd\u651d\u3002\u64c5\u9577\u904b\u7528\u71c8\u5149\u8207\u69cb\u5716\u7a81\u51fa\u5546\u54c1\u7279\u8272\uff0c\u63d0\u5347\u5546\u54c1\u92b7\u552e\u529b\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=150&h=100&fit=crop",alt:"\u5546\u54c1\u651d\u5f71\u5de5\u4f5c\u5ba4",link:"https://unsplash.com/@nordwood"},{type:"image",url:"https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=150&h=100&fit=crop",alt:"\u7cbe\u7f8e\u5546\u54c1\u7167\u7247\u7bc4\u4f8b",link:"https://unsplash.com/@shaikhulud"}],detailedDescription:"\n        <h3>\u651d\u5f71\u670d\u52d9\u5305\u542b\uff1a</h3>\n        <ul>\n          <li>\u5c08\u696d\u5546\u54c1\u651d\u5f71 (10-30\u5f35)</li>\n          <li>\u591a\u89d2\u5ea6\u62cd\u651d</li>\n          <li>\u7d30\u7bc0\u7279\u5beb</li>\n          <li>\u60c5\u5883\u5f0f\u62cd\u651d</li>\n          <li>\u53bb\u80cc\u8655\u7406</li>\n          <li>\u8272\u5f69\u6821\u6b63\u8207\u4fee\u5716</li>\n        </ul>\n        \n        <h3>\u9069\u7528\u5546\u54c1\u985e\u578b\uff1a</h3>\n        <ul>\n          <li>\u670d\u98fe\u914d\u4ef6</li>\n          <li>3C\u96fb\u5b50\u7522\u54c1</li>\n          <li>\u7f8e\u599d\u4fdd\u990a\u54c1</li>\n          <li>\u751f\u6d3b\u7528\u54c1</li>\n          <li>\u98df\u54c1\u98f2\u6599</li>\n          <li>\u624b\u5de5\u85dd\u54c1</li>\n        </ul>\n      "},{id:3,title:"YouTube\u983b\u9053\u5f71\u7247\u526a\u8f2f",price:5e3,rating:4.6,reviews:67,description:"YouTube\u5f71\u7247\u5c08\u696d\u526a\u8f2f\u670d\u52d9\uff0c\u8b93\u4f60\u7684\u983b\u9053\u5167\u5bb9\u66f4\u52a0\u7cbe\u5f69",tags:["YouTube","\u5f71\u7247\u526a\u8f2f","\u5b57\u5e55","\u7e2e\u5716\u8a2d\u8a08"],seller:{name:"\u526a\u8f2f\u5e2b Kevin",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face",rating:4.6,reviews:67,responseTime:"12\u5c0f\u6642\u5167",completedProjects:234,memberSince:"2021\u5e74",skills:["\u5f71\u7247\u526a\u8f2f","\u5b57\u5e55\u88fd\u4f5c","\u97f3\u6548\u8655\u7406","\u7e2e\u5716\u8a2d\u8a08"],bio:"YouTube\u5f71\u7247\u526a\u8f2f\u5c08\u5bb6\uff0c\u719f\u6089\u5404\u7a2e\u985e\u578b\u983b\u9053\u7684\u526a\u8f2f\u98a8\u683c\u3002\u80fd\u5920\u6839\u64da\u983b\u9053\u7279\u8272\u8abf\u6574\u526a\u8f2f\u7bc0\u594f\uff0c\u63d0\u5347\u89c0\u770b\u9ad4\u9a57\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=150&h=100&fit=crop",alt:"\u5f71\u7247\u526a\u8f2f\u5de5\u4f5c\u756b\u9762",link:"https://unsplash.com/@jakobowens1"}],detailedDescription:"\n        <h3>\u526a\u8f2f\u670d\u52d9\u5305\u542b\uff1a</h3>\n        <ul>\n          <li>\u5f71\u7247\u526a\u8f2f\u8207\u7bc0\u594f\u8abf\u6574</li>\n          <li>\u8f49\u5834\u7279\u6548\u88fd\u4f5c</li>\n          <li>\u5b57\u5e55\u88fd\u4f5c\u8207\u540c\u6b65</li>\n          <li>\u80cc\u666f\u97f3\u6a02\u8207\u97f3\u6548</li>\n          <li>\u8272\u5f69\u8abf\u8272</li>\n          <li>\u7e2e\u5716\u8a2d\u8a08 (3\u6b3e\u9078\u64c7)</li>\n        </ul>\n      "}],"\u5546\u696d\u8aee\u8a62":[{id:1,title:"\u4f01\u696d\u6578\u4f4d\u8f49\u578b\u9867\u554f",price:5e4,rating:4.8,reviews:32,description:"\u5354\u52a9\u4f01\u696d\u9032\u884c\u6578\u4f4d\u8f49\u578b\uff0c\u63d0\u5347\u71df\u904b\u6548\u7387\u8207\u7af6\u722d\u529b",tags:["\u6578\u4f4d\u8f49\u578b","\u6d41\u7a0b\u512a\u5316","\u7b56\u7565\u898f\u5283","\u6280\u8853\u5c0e\u5165"],seller:{name:"\u9867\u554f Michael",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=80&h=80&fit=crop&crop=face",rating:4.8,reviews:32,responseTime:"24\u5c0f\u6642\u5167",completedProjects:45,memberSince:"2018\u5e74",skills:["\u6578\u4f4d\u7b56\u7565","\u6d41\u7a0b\u6539\u5584","\u8b8a\u9769\u7ba1\u7406","\u6280\u8853\u8a55\u4f30"],bio:"\u8cc7\u6df1\u4f01\u696d\u9867\u554f\uff0c\u64c1\u670915\u5e74\u7ba1\u7406\u8aee\u8a62\u7d93\u9a57\u3002\u5c08\u7cbe\u65bc\u5354\u52a9\u50b3\u7d71\u4f01\u696d\u9032\u884c\u6578\u4f4d\u8f49\u578b\uff0c\u66fe\u670d\u52d9\u904e\u591a\u5bb6\u77e5\u540d\u4f01\u696d\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=150&h=100&fit=crop",alt:"\u5546\u696d\u7b56\u7565\u8a0e\u8ad6",link:"https://unsplash.com/@scott_graham"},{type:"image",url:"https://images.unsplash.com/photo-1552664730-d307ca884978?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1552664730-d307ca884978?w=150&h=100&fit=crop",alt:"\u5718\u968a\u5354\u4f5c\u6703\u8b70",link:"https://unsplash.com/@cowomen"}],detailedDescription:"\n        <h3>\u9867\u554f\u670d\u52d9\u5167\u5bb9\uff1a</h3>\n        <ul>\n          <li>\u4f01\u696d\u73fe\u6cc1\u8a55\u4f30\u8207\u8a3a\u65b7</li>\n          <li>\u6578\u4f4d\u8f49\u578b\u7b56\u7565\u898f\u5283</li>\n          <li>\u6d41\u7a0b\u91cd\u65b0\u8a2d\u8a08</li>\n          <li>\u6280\u8853\u89e3\u6c7a\u65b9\u6848\u5efa\u8b70</li>\n          <li>\u8b8a\u9769\u7ba1\u7406\u6307\u5c0e</li>\n          <li>\u54e1\u5de5\u57f9\u8a13\u898f\u5283</li>\n        </ul>\n        \n        <h3>\u670d\u52d9\u6d41\u7a0b\uff1a</h3>\n        <ol>\n          <li>\u521d\u6b65\u8aee\u8a62\u8207\u9700\u6c42\u5206\u6790 (1\u9031)</li>\n          <li>\u4f01\u696d\u73fe\u6cc1\u6df1\u5ea6\u8a3a\u65b7 (2\u9031)</li>\n          <li>\u7b56\u7565\u65b9\u6848\u8a2d\u8a08 (2\u9031)</li>\n          <li>\u5be6\u65bd\u8a08\u756b\u5236\u5b9a (1\u9031)</li>\n          <li>\u57f7\u884c\u6307\u5c0e\u8207\u8ffd\u8e64 (\u6301\u7e8c)</li>\n        </ol>\n      "},{id:2,title:"\u65b0\u5275\u516c\u53f8\u5546\u696d\u8a08\u756b\u66f8",price:25e3,rating:4.7,reviews:28,description:"\u5c08\u696d\u5546\u696d\u8a08\u756b\u66f8\u64b0\u5beb\uff0c\u5354\u52a9\u65b0\u5275\u516c\u53f8\u7372\u5f97\u6295\u8cc7",tags:["\u5546\u696d\u8a08\u756b\u66f8","\u65b0\u5275","\u6295\u8cc7\u7c21\u5831","\u8ca1\u52d9\u898f\u5283"],seller:{name:"\u5275\u696d\u9867\u554f Sarah",avatar:"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=80&h=80&fit=crop&crop=face",rating:4.7,reviews:28,responseTime:"12\u5c0f\u6642\u5167",completedProjects:67,memberSince:"2019\u5e74",skills:["\u5546\u696d\u898f\u5283","\u8ca1\u52d9\u5206\u6790","\u5e02\u5834\u7814\u7a76","Pitch\u8a2d\u8a08"],bio:"\u65b0\u5275\u751f\u614b\u5708\u8cc7\u6df1\u9867\u554f\uff0c\u66fe\u5354\u52a9\u591a\u5bb6\u65b0\u5275\u516c\u53f8\u6210\u529f\u7372\u5f97\u5929\u4f7f\u8f2a\u8207A\u8f2a\u6295\u8cc7\u3002\u64c5\u9577\u5546\u696d\u6a21\u5f0f\u8a2d\u8a08\u8207\u6295\u8cc7\u4eba\u6e9d\u901a\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=100&fit=crop",alt:"\u5546\u696d\u63d0\u6848\u7c21\u5831",link:"https://unsplash.com/@felipepelaquim"}],detailedDescription:"\n        <h3>\u5546\u696d\u8a08\u756b\u66f8\u5167\u5bb9\uff1a</h3>\n        <ul>\n          <li>\u57f7\u884c\u6458\u8981</li>\n          <li>\u5e02\u5834\u5206\u6790\u8207\u7af6\u722d\u5c0d\u624b\u7814\u7a76</li>\n          <li>\u5546\u696d\u6a21\u5f0f\u8a2d\u8a08</li>\n          <li>\u884c\u92b7\u7b56\u7565\u898f\u5283</li>\n          <li>\u71df\u904b\u8a08\u756b</li>\n          <li>\u8ca1\u52d9\u9810\u6e2c\u8207\u8cc7\u91d1\u9700\u6c42</li>\n          <li>\u98a8\u96aa\u8a55\u4f30</li>\n          <li>\u6295\u8cc7\u4eba\u7c21\u5831\u6a94</li>\n        </ul>\n      "},{id:3,title:"\u54c1\u724c\u7b56\u7565\u898f\u5283",price:18e3,rating:4.9,reviews:41,description:"\u5b8c\u6574\u54c1\u724c\u7b56\u7565\u898f\u5283\uff0c\u5efa\u7acb\u7368\u7279\u7684\u54c1\u724c\u5b9a\u4f4d\u8207\u5f62\u8c61",tags:["\u54c1\u724c\u7b56\u7565","\u54c1\u724c\u5b9a\u4f4d","\u884c\u92b7\u898f\u5283","\u54c1\u724c\u5f62\u8c61"],seller:{name:"\u54c1\u724c\u9867\u554f David",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face",rating:4.9,reviews:41,responseTime:"8\u5c0f\u6642\u5167",completedProjects:89,memberSince:"2020\u5e74",skills:["\u54c1\u724c\u7b56\u7565","\u5e02\u5834\u5b9a\u4f4d","\u6d88\u8cbb\u8005\u6d1e\u5bdf","\u54c1\u724c\u7ba1\u7406"],bio:"\u54c1\u724c\u7b56\u7565\u5c08\u5bb6\uff0c\u5354\u52a9\u4f01\u696d\u5efa\u7acb\u5f37\u52e2\u54c1\u724c\u3002\u64c5\u9577\u5f9e\u6d88\u8cbb\u8005\u6d1e\u5bdf\u51fa\u767c\uff0c\u6253\u9020\u5177\u6709\u5dee\u7570\u5316\u7af6\u722d\u512a\u52e2\u7684\u54c1\u724c\u7b56\u7565\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1553484771-371a605b060b?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1553484771-371a605b060b?w=150&h=100&fit=crop",alt:"\u54c1\u724c\u7b56\u7565\u898f\u5283",link:"https://unsplash.com/@brunovdkraan"}],detailedDescription:"\n        <h3>\u54c1\u724c\u7b56\u7565\u670d\u52d9\uff1a</h3>\n        <ul>\n          <li>\u54c1\u724c\u73fe\u6cc1\u8a3a\u65b7</li>\n          <li>\u76ee\u6a19\u5ba2\u7fa4\u5206\u6790</li>\n          <li>\u7af6\u722d\u74b0\u5883\u7814\u7a76</li>\n          <li>\u54c1\u724c\u5b9a\u4f4d\u8a2d\u8a08</li>\n          <li>\u54c1\u724c\u500b\u6027\u8207\u8abf\u6027</li>\n          <li>\u54c1\u724c\u6e9d\u901a\u7b56\u7565</li>\n          <li>\u54c1\u724c\u57f7\u884c\u6307\u5357</li>\n        </ul>\n      "}],"\u6559\u80b2\u57f9\u8a13":[{id:1,title:"\u4f01\u696d\u6578\u4f4d\u884c\u92b7\u57f9\u8a13",price:25e3,rating:4.8,reviews:56,description:"\u5168\u65b9\u4f4d\u6578\u4f4d\u884c\u92b7\u57f9\u8a13\u8ab2\u7a0b\uff0c\u5f9e\u57fa\u790e\u5230\u9032\u968e\u5be6\u6230\u6280\u5de7",tags:["\u6578\u4f4d\u884c\u92b7","\u4f01\u696d\u57f9\u8a13","SEO","\u793e\u7fa4\u7d93\u71df"],seller:{name:"\u884c\u92b7\u8b1b\u5e2b Lisa",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b494?w=80&h=80&fit=crop&crop=face",rating:4.8,reviews:56,responseTime:"6\u5c0f\u6642\u5167",completedProjects:89,memberSince:"2020\u5e74",skills:["\u6578\u4f4d\u884c\u92b7","Google Ads","\u793e\u7fa4\u5a92\u9ad4","SEO"],bio:"\u8cc7\u6df1\u6578\u4f4d\u884c\u92b7\u5c08\u5bb6\uff0c\u64c1\u670910\u5e74\u884c\u92b7\u5be6\u6230\u7d93\u9a57\u3002\u66fe\u5354\u52a9\u591a\u5bb6\u4f01\u696d\u5efa\u7acb\u5b8c\u6574\u7684\u6578\u4f4d\u884c\u92b7\u9ad4\u7cfb\uff0c\u63d0\u5347\u54c1\u724c\u77e5\u540d\u5ea6\u8207\u92b7\u552e\u696d\u7e3e\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1552664730-d307ca884978?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1552664730-d307ca884978?w=150&h=100&fit=crop",alt:"\u4f01\u696d\u57f9\u8a13\u73fe\u5834",link:"https://unsplash.com/@cowomen"},{type:"image",url:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=150&h=100&fit=crop",alt:"\u6559\u5b78\u6750\u6599\u6e96\u5099",link:"https://unsplash.com/@homajob"}],detailedDescription:"\n        <h3>\u57f9\u8a13\u8ab2\u7a0b\u5167\u5bb9\uff1a</h3>\n        <ul>\n          <li>\u6578\u4f4d\u884c\u92b7\u7b56\u7565\u898f\u5283</li>\n          <li>Google Ads \u5ee3\u544a\u6295\u653e</li>\n          <li>Facebook & Instagram \u884c\u92b7</li>\n          <li>SEO \u641c\u5c0b\u5f15\u64ce\u512a\u5316</li>\n          <li>\u5167\u5bb9\u884c\u92b7\u7b56\u7565</li>\n          <li>\u6578\u64da\u5206\u6790\u8207\u6210\u6548\u8ffd\u8e64</li>\n        </ul>\n        \n        <h3>\u57f9\u8a13\u65b9\u5f0f\uff1a</h3>\n        <ul>\n          <li>\u5be6\u9ad4\u8ab2\u7a0b + \u7dda\u4e0a\u8f14\u5c0e</li>\n          <li>\u5c0f\u73ed\u5236\u6559\u5b78 (8-12\u4eba)</li>\n          <li>\u5be6\u4f5c\u6f14\u7df4\u8207\u6848\u4f8b\u5206\u6790</li>\n          <li>\u8ab2\u5f8c\u4f5c\u696d\u8207\u500b\u5225\u6307\u5c0e</li>\n        </ul>\n      "},{id:2,title:"Python\u7a0b\u5f0f\u8a2d\u8a08\u8ab2\u7a0b",price:15e3,rating:4.9,reviews:78,description:"\u5f9e\u96f6\u57fa\u790e\u5230\u5be6\u6230\u61c9\u7528\u7684Python\u7a0b\u5f0f\u8a2d\u8a08\u5b8c\u6574\u8ab2\u7a0b",tags:["Python","\u7a0b\u5f0f\u8a2d\u8a08","\u8cc7\u6599\u5206\u6790","\u6a5f\u5668\u5b78\u7fd2"],seller:{name:"\u7a0b\u5f0f\u8b1b\u5e2b Alex",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=80&h=80&fit=crop&crop=face",rating:4.9,reviews:78,responseTime:"4\u5c0f\u6642\u5167",completedProjects:134,memberSince:"2019\u5e74",skills:["Python","JavaScript","\u8cc7\u6599\u79d1\u5b78","\u6a5f\u5668\u5b78\u7fd2"],bio:"\u8cc7\u6df1\u8edf\u9ad4\u5de5\u7a0b\u5e2b\uff0c\u5c08\u7cbe\u65bcPython\u958b\u767c\u8207\u6559\u5b78\u3002\u66fe\u5728\u79d1\u6280\u516c\u53f8\u64d4\u4efb\u6280\u8853\u4e3b\u7ba1\uff0c\u73fe\u5c08\u6ce8\u65bc\u7a0b\u5f0f\u6559\u80b2\u63a8\u5ee3\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=150&h=100&fit=crop",alt:"\u7a0b\u5f0f\u8a2d\u8a08\u6559\u5b78",link:"https://unsplash.com/@ffstop"}],detailedDescription:"\n        <h3>\u8ab2\u7a0b\u5927\u7db1\uff1a</h3>\n        <ul>\n          <li>Python\u57fa\u790e\u8a9e\u6cd5</li>\n          <li>\u8cc7\u6599\u7d50\u69cb\u8207\u6f14\u7b97\u6cd5</li>\n          <li>\u7db2\u9801\u722c\u87f2\u5be6\u4f5c</li>\n          <li>\u8cc7\u6599\u5206\u6790\u8207\u8996\u89ba\u5316</li>\n          <li>\u6a5f\u5668\u5b78\u7fd2\u5165\u9580</li>\n          <li>\u5c08\u6848\u5be6\u4f5c</li>\n        </ul>\n      "},{id:3,title:"\u82f1\u8a9e\u5546\u52d9\u7c21\u5831\u6280\u5de7",price:8e3,rating:4.7,reviews:45,description:"\u63d0\u5347\u82f1\u8a9e\u5546\u52d9\u7c21\u5831\u80fd\u529b\uff0c\u589e\u5f37\u570b\u969b\u5546\u52d9\u6e9d\u901a\u6280\u5de7",tags:["\u82f1\u8a9e\u7c21\u5831","\u5546\u52d9\u6e9d\u901a","\u7c21\u5831\u6280\u5de7","\u82f1\u8a9e\u8868\u9054"],seller:{name:"\u82f1\u8a9e\u8b1b\u5e2b Emily",avatar:"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=80&h=80&fit=crop&crop=face",rating:4.7,reviews:45,responseTime:"2\u5c0f\u6642\u5167",completedProjects:123,memberSince:"2021\u5e74",skills:["\u5546\u52d9\u82f1\u8a9e","\u7c21\u5831\u6280\u5de7","\u8de8\u6587\u5316\u6e9d\u901a","\u82f1\u8a9e\u6559\u5b78"],bio:"\u570b\u969b\u5546\u52d9\u82f1\u8a9e\u5c08\u5bb6\uff0c\u64c1\u6709\u8c50\u5bcc\u7684\u8de8\u570b\u4f01\u696d\u57f9\u8a13\u7d93\u9a57\u3002\u5c08\u7cbe\u65bc\u5546\u52d9\u6e9d\u901a\u8207\u7c21\u5831\u6280\u5de7\u8a13\u7df4\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1551836022-d5d88e9218df?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1551836022-d5d88e9218df?w=150&h=100&fit=crop",alt:"\u5546\u52d9\u7c21\u5831\u57f9\u8a13",link:"https://unsplash.com/@austindistel"}],detailedDescription:"\n        <h3>\u57f9\u8a13\u91cd\u9ede\uff1a</h3>\n        <ul>\n          <li>\u7c21\u5831\u7d50\u69cb\u8a2d\u8a08</li>\n          <li>\u82f1\u8a9e\u8868\u9054\u6280\u5de7</li>\n          <li>\u80a2\u9ad4\u8a9e\u8a00\u904b\u7528</li>\n          <li>Q&A\u61c9\u7b54\u6280\u5de7</li>\n          <li>\u6587\u5316\u5dee\u7570\u7406\u89e3</li>\n        </ul>\n      "}],"\u7ffb\u8b6f\u670d\u52d9":[{id:1,title:"\u5c08\u696d\u82f1\u4e2d\u7ffb\u8b6f",price:8e3,rating:4.9,reviews:123,description:"\u9ad8\u54c1\u8cea\u82f1\u4e2d\u6587\u7ffb\u8b6f\u670d\u52d9\uff0c\u5c08\u696d\u8853\u8a9e\u6e96\u78ba\uff0c\u8a9e\u8a00\u6d41\u66a2\u81ea\u7136",tags:["\u82f1\u4e2d\u7ffb\u8b6f","\u5546\u696d\u6587\u4ef6","\u5b78\u8853\u7ffb\u8b6f","\u6280\u8853\u6587\u4ef6"],seller:{name:"\u7ffb\u8b6f\u5e2b Jennifer",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b494?w=80&h=80&fit=crop&crop=face",rating:4.9,reviews:123,responseTime:"2\u5c0f\u6642\u5167",completedProjects:267,memberSince:"2018\u5e74",skills:["\u82f1\u4e2d\u7ffb\u8b6f","\u5546\u696d\u7ffb\u8b6f","\u6280\u8853\u7ffb\u8b6f","\u6821\u5c0d"],bio:"\u8cc7\u6df1\u82f1\u4e2d\u7ffb\u8b6f\u5e2b\uff0c\u64c1\u6709\u78a9\u58eb\u5b78\u4f4d\u820710\u5e74\u7ffb\u8b6f\u7d93\u9a57\u3002\u5c08\u7cbe\u5546\u696d\u3001\u6280\u8853\u3001\u5b78\u8853\u9818\u57df\u7ffb\u8b6f\uff0c\u54c1\u8cea\u7cbe\u6e96\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=150&h=100&fit=crop",alt:"\u7ffb\u8b6f\u5de5\u4f5c\u74b0\u5883",link:"https://unsplash.com/@edulauton"},{type:"image",url:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=150&h=100&fit=crop",alt:"\u591a\u8a9e\u8a00\u5b57\u5178",link:"https://unsplash.com/@webaroo"}],detailedDescription:"\n        <h3>\u7ffb\u8b6f\u670d\u52d9\u5305\u542b\uff1a</h3>\n        <ul>\n          <li>\u82f1\u6587\u7ffb\u4e2d\u6587 (\u6b63\u9ad4/\u7c21\u9ad4)</li>\n          <li>\u4e2d\u6587\u7ffb\u82f1\u6587</li>\n          <li>\u5c08\u696d\u8853\u8a9e\u8655\u7406</li>\n          <li>\u683c\u5f0f\u6392\u7248\u8abf\u6574</li>\n          <li>\u4e00\u6b21\u514d\u8cbb\u4fee\u6539</li>\n          <li>24\u5c0f\u6642\u5167\u4ea4\u4ed8</li>\n        </ul>\n        \n        <h3>\u5c08\u7cbe\u9818\u57df\uff1a</h3>\n        <ul>\n          <li>\u5546\u696d\u5408\u7d04\u6587\u4ef6</li>\n          <li>\u6280\u8853\u8aaa\u660e\u66f8</li>\n          <li>\u5b78\u8853\u8ad6\u6587</li>\n          <li>\u884c\u92b7\u6587\u6848</li>\n          <li>\u7db2\u7ad9\u5167\u5bb9</li>\n        </ul>\n      "},{id:2,title:"\u65e5\u6587\u5546\u52d9\u7ffb\u8b6f",price:1e4,rating:4.8,reviews:67,description:"\u5c08\u696d\u65e5\u4e2d\u7ffb\u8b6f\u670d\u52d9\uff0c\u719f\u6089\u65e5\u672c\u5546\u52d9\u6587\u5316\u8207\u656c\u8a9e\u4f7f\u7528",tags:["\u65e5\u4e2d\u7ffb\u8b6f","\u5546\u52d9\u656c\u8a9e","\u5408\u7d04\u7ffb\u8b6f","\u6703\u8b70\u8cc7\u6599"],seller:{name:"\u65e5\u8a9e\u7ffb\u8b6f\u5e2b Yuki",avatar:"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=80&h=80&fit=crop&crop=face",rating:4.8,reviews:67,responseTime:"4\u5c0f\u6642\u5167",completedProjects:156,memberSince:"2019\u5e74",skills:["\u65e5\u4e2d\u7ffb\u8b6f","\u5546\u52d9\u65e5\u8a9e","\u656c\u8a9e\u61c9\u7528","\u6587\u5316\u8aee\u8a62"],bio:"\u65e5\u8a9e\u7cfb\u7562\u696d\uff0c\u66fe\u5728\u65e5\u5546\u4f01\u696d\u5de5\u4f5c5\u5e74\u3002\u6df1\u5ea6\u7406\u89e3\u65e5\u672c\u5546\u52d9\u6587\u5316\uff0c\u7ffb\u8b6f\u6e96\u78ba\u4e14\u7b26\u5408\u7576\u5730\u8a9e\u8a00\u7fd2\u6163\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1528164344705-47542687000d?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1528164344705-47542687000d?w=150&h=100&fit=crop",alt:"\u65e5\u8a9e\u5b78\u7fd2\u74b0\u5883",link:"https://unsplash.com/@jareddrice"}],detailedDescription:"\n        <h3>\u65e5\u8a9e\u7ffb\u8b6f\u5c08\u9577\uff1a</h3>\n        <ul>\n          <li>\u5546\u52d9\u6703\u8b70\u8cc7\u6599</li>\n          <li>\u5408\u7d04\u5354\u8b70\u66f8</li>\n          <li>\u7522\u54c1\u8aaa\u660e\u66f8</li>\n          <li>\u884c\u92b7\u5ba3\u50b3\u6587\u6848</li>\n          <li>\u6280\u8853\u6587\u4ef6</li>\n        </ul>\n      "},{id:3,title:"\u5373\u6642\u8996\u8a0a\u53e3\u8b6f",price:5e3,rating:4.7,reviews:89,description:"\u7dda\u4e0a\u8996\u8a0a\u6703\u8b70\u5373\u6642\u53e3\u8b6f\u670d\u52d9\uff0c\u652f\u63f4\u591a\u7a2e\u8a9e\u8a00",tags:["\u5373\u6642\u53e3\u8b6f","\u8996\u8a0a\u6703\u8b70","\u591a\u8a9e\u8a00","\u5546\u52d9\u6e9d\u901a"],seller:{name:"\u53e3\u8b6f\u5e2b Michael",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face",rating:4.7,reviews:89,responseTime:"1\u5c0f\u6642\u5167",completedProjects:234,memberSince:"2020\u5e74",skills:["\u540c\u6b65\u53e3\u8b6f","\u5546\u52d9\u6e9d\u901a","\u6703\u8b70\u4e3b\u6301","\u591a\u8a9e\u5207\u63db"],bio:"\u5c08\u696d\u540c\u6b65\u53e3\u8b6f\u5e2b\uff0c\u64c1\u6709\u8c50\u5bcc\u7684\u570b\u969b\u6703\u8b70\u53e3\u8b6f\u7d93\u9a57\u3002\u53cd\u61c9\u5feb\u901f\uff0c\u8a9e\u8a00\u5207\u63db\u6d41\u66a2\uff0c\u5c08\u696d\u53ef\u9760\u3002"},media:[{type:"image",url:"https://images.unsplash.com/photo-1588196749597-9ff075ee6b5b?w=600&h=400&fit=crop",thumbnail:"https://images.unsplash.com/photo-1588196749597-9ff075ee6b5b?w=150&h=100&fit=crop",alt:"\u8996\u8a0a\u6703\u8b70\u53e3\u8b6f",link:"https://unsplash.com/@comparefibre"}],detailedDescription:"\n        <h3>\u53e3\u8b6f\u670d\u52d9\u7279\u8272\uff1a</h3>\n        <ul>\n          <li>\u5373\u6642\u540c\u6b65\u7ffb\u8b6f</li>\n          <li>\u652f\u63f4Zoom\u3001Teams\u7b49\u5e73\u53f0</li>\n          <li>\u63d0\u524d\u6703\u8b70\u8cc7\u6599\u6e96\u5099</li>\n          <li>\u5c08\u696d\u8853\u8a9e\u9810\u7fd2</li>\n          <li>\u6703\u8b70\u7d00\u9304\u6574\u7406</li>\n        </ul>\n      "}]},hC=()=>{const{creatorId:e}=ie(),t=re(),{user:n}=Hk(),[r,s]=(0,i.useState)(null),[o,a]=(0,i.useState)([]),[l,c]=(0,i.useState)("portfolio");return(0,i.useEffect)(()=>{let t=null,n=[];for(const[r,i]of Object.entries(uC))for(const s of i)if(s.seller&&"object"===typeof s.seller){const i=s.seller.name.replace(/\s+/g,"-").toLowerCase(),o=decodeURIComponent(e).toLowerCase();i!==o&&s.seller.name.toLowerCase()!==o||(t||(t={...s.seller,category:r}),n.push({...s,category:r}))}s(t),a(n)},[e]),r?(0,$k.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,$k.jsx)("nav",{className:"py-4",children:(0,$k.jsx)("div",{className:"container-sm",children:(0,$k.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-primary-600",children:[(0,$k.jsx)(Ee,{to:"/",className:"hover:text-primary-800 transition-colors",children:"\u9996\u9801"}),(0,$k.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,$k.jsx)(Ee,{to:`/services/${encodeURIComponent(r.category)}`,className:"hover:text-primary-800 transition-colors",children:r.category}),(0,$k.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,$k.jsx)("span",{className:"text-primary-800 font-medium",children:r.name})]})})}),(0,$k.jsxs)("div",{className:"container-sm py-8",children:[(0,$k.jsx)("div",{className:"bg-white rounded-2xl shadow-sm p-8 mb-8",children:(0,$k.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[(0,$k.jsx)("div",{className:"flex-shrink-0",children:(0,$k.jsx)("img",{src:r.avatar,alt:r.name,className:"w-32 h-32 rounded-full object-cover border-4 border-primary-100"})}),(0,$k.jsxs)("div",{className:"flex-1",children:[(0,$k.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,$k.jsx)("h1",{className:"text-3xl font-bold text-primary-800",children:r.name}),(0,$k.jsxs)("button",{onClick:()=>{if(!(n&&!n.isAnonymous&&!n.isTemporary&&n.email))return alert("\u8acb\u5148\u767b\u5165\u4ee5\u4f7f\u7528\u79c1\u8a0a\u529f\u80fd"),void t("/login");t(`/chat?creatorId=${r.name.replace(/\s+/g,"-").toLowerCase()}&creatorName=${encodeURIComponent(r.name)}`)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-primary-700 transition-colors flex items-center text-sm",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"\u79c1\u8a0a\u5275\u4f5c\u8005"]})]}),(0,$k.jsxs)("div",{className:"flex flex-wrap gap-6 mb-4",children:[(0,$k.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 text-warning-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,$k.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,$k.jsx)("span",{className:"font-medium",children:r.rating}),(0,$k.jsxs)("span",{className:"ml-1",children:["(",r.reviews," \u8a55\u50f9)"]})]}),(0,$k.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,$k.jsxs)("span",{children:["\u56de\u61c9\u6642\u9593\uff1a",r.responseTime]})]}),(0,$k.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,$k.jsxs)("span",{children:[r.completedProjects," \u500b\u5b8c\u6210\u5c08\u6848"]})]}),(0,$k.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,$k.jsxs)("span",{children:["\u52a0\u5165\u6642\u9593\uff1a",r.memberSince]})]})]}),(0,$k.jsxs)("div",{className:"mb-4",children:[(0,$k.jsx)("h3",{className:"text-sm font-medium text-primary-700 mb-2",children:"\u5c08\u696d\u6280\u80fd"}),(0,$k.jsx)("div",{className:"flex flex-wrap gap-2",children:r.skills.map((e,t)=>(0,$k.jsx)("span",{className:"px-3 py-1 text-xs bg-accent-100 text-accent-700 rounded-full",children:e},t))})]}),(0,$k.jsxs)("div",{className:"mb-4",children:[(0,$k.jsx)("h3",{className:"text-sm font-medium text-primary-700 mb-2",children:"\u500b\u4eba\u7c21\u4ecb"}),(0,$k.jsx)("p",{className:"text-primary-600 leading-relaxed",children:r.bio})]}),r.contact&&(0,$k.jsxs)("div",{children:[(0,$k.jsx)("h3",{className:"text-sm font-medium text-primary-700 mb-3",children:"\u806f\u7d61\u65b9\u5f0f"}),(0,$k.jsxs)("div",{className:"flex flex-wrap gap-4",children:[r.contact.email&&(0,$k.jsxs)("a",{href:`mailto:${r.contact.email}`,className:"flex items-center text-sm text-primary-600 hover:text-primary-800 transition-colors",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.contact.email]}),r.contact.phone&&(0,$k.jsxs)("a",{href:`tel:${r.contact.phone}`,className:"flex items-center text-sm text-primary-600 hover:text-primary-800 transition-colors",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),r.contact.phone]}),r.contact.website&&(0,$k.jsxs)("a",{href:r.contact.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-primary-600 hover:text-primary-800 transition-colors",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"})}),"\u4f5c\u54c1\u5b98\u7db2"]}),r.contact.line&&(0,$k.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12.293.572S.586 4.943.586 10.314c0 4.811 4.15 8.818 9.717 9.598.4.09.946.258 1.084.594.123.306.081.787.04 1.096l-.172 1.088c-.061.33-.33 1.295 1.1.707 1.443-.594 7.777-4.676 10.62-8.016C22.922 15.493 24 12.993 24 10.314"})}),r.contact.line]}),r.contact.instagram&&(0,$k.jsxs)("a",{href:`https://instagram.com/${r.contact.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-primary-600 hover:text-primary-800 transition-colors",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{d:"M12.017 0C8.396 0 7.989.013 7.041.072 6.094.13 5.52.33 5.036.624a3.88 3.88 0 0 0-1.407.923A3.88 3.88 0 0 0 2.706 2.95C2.41 3.436 2.21 4.009 2.152 4.958 2.094 5.906 2.08 6.314 2.08 9.935s.013 4.029.072 4.976c.058.95.258 1.524.551 2.009.307.527.717.936 1.244 1.244.485.293 1.059.493 2.008.551.947.059 1.355.072 4.976.072s4.029-.013 4.976-.072c.95-.058 1.524-.258 2.009-.551.527-.308.936-.717 1.244-1.244.293-.484.493-1.059.551-2.008.059-.947.072-1.355.072-4.976s-.013-4.029-.072-4.976c-.058-.95-.258-1.524-.551-2.009a3.881 3.881 0 0 0-1.244-1.244C18.566.408 17.991.208 17.041.15 16.094.092 15.686.08 12.017.08z M12.017 2.15c3.564 0 3.987.012 5.39.071.3.007.611.028.909.088.5.098.954.317 1.3.663.247.247.466.701.564 1.201.061.3.082.611.088.909.058 1.403.07 1.826.07 5.39s-.012 3.987-.07 5.39c-.007.3-.028.611-.088.909-.098.5-.317.954-.564 1.201-.246.246-.7.465-1.2.563-.298.061-.609.082-.909.088-1.403.058-1.826.07-5.39.07s-3.987-.012-5.39-.07c-.3-.007-.611-.028-.909-.088-.5-.098-.954-.317-1.2-.563a3.236 3.236 0 0 1-.664-1.201c-.061-.3-.082-.611-.088-.909-.058-1.403-.07-1.826-.07-5.39s.012-3.987.07-5.39c.007-.3.028-.611.088-.909.098-.5.317-.954.664-1.2.246-.247.7-.466 1.2-.564.298-.061.609-.082.909-.088 1.403-.058 1.826-.07 5.39-.07z"})}),r.contact.instagram]})]})]})]})]})}),(0,$k.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm mb-8",children:[(0,$k.jsx)("div",{className:"border-b border-primary-100",children:(0,$k.jsxs)("nav",{className:"flex space-x-8 px-8",children:[(0,$k.jsx)("button",{onClick:()=>c("portfolio"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("portfolio"===l?"border-primary-500 text-primary-600":"border-transparent text-primary-500 hover:text-primary-700 hover:border-primary-300"),children:"\u4f5c\u54c1\u96c6"}),(0,$k.jsx)("button",{onClick:()=>c("services"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("services"===l?"border-primary-500 text-primary-600":"border-transparent text-primary-500 hover:text-primary-700 hover:border-primary-300"),children:"\u4e0a\u67b6\u670d\u52d9"})]})}),(0,$k.jsxs)("div",{className:"p-8",children:["portfolio"===l&&(0,$k.jsxs)("div",{children:[(0,$k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.flatMap(e=>e.media?e.media.slice(0,6):[]).map((e,t)=>(0,$k.jsxs)("div",{className:"group cursor-pointer",onClick:()=>e.link&&window.open(e.link,"_blank"),children:[(0,$k.jsx)("div",{className:"aspect-video bg-primary-50 rounded-lg overflow-hidden",children:(0,$k.jsx)("img",{src:e.url,alt:e.alt,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,$k.jsx)("p",{className:"text-sm text-primary-600 mt-2",children:e.alt})]},t))}),0===o.flatMap(e=>e.media||[]).length&&(0,$k.jsxs)("div",{className:"text-center py-12",children:[(0,$k.jsx)("svg",{className:"w-16 h-16 text-primary-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,$k.jsx)("p",{className:"text-primary-500",children:"\u66ab\u7121\u4f5c\u54c1\u5c55\u793a"})]})]}),"services"===l&&(0,$k.jsxs)("div",{children:[(0,$k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>(0,$k.jsxs)(Ee,{to:`/services/${encodeURIComponent(e.category)}/${e.id}`,className:"bg-primary-50 border border-primary-200 rounded-xl p-6 hover:shadow-md transition-all duration-300 block",children:[(0,$k.jsx)("div",{className:"w-full h-32 bg-white rounded-lg mb-4 overflow-hidden",children:e.image?(0,$k.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"}):(0,$k.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,$k.jsx)("svg",{className:"w-8 h-8 text-primary-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,$k.jsx)("h3",{className:"text-lg font-semibold text-primary-800 mb-2 line-clamp-2",children:e.title}),(0,$k.jsx)("p",{className:"text-sm text-primary-600 mb-3 line-clamp-2",children:e.description}),(0,$k.jsx)("div",{className:"mb-3",children:(0,$k.jsx)("span",{className:"px-2 py-1 text-xs bg-accent-100 text-accent-700 rounded-full",children:e.category})}),(0,$k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,$k.jsxs)("div",{className:"text-lg font-bold text-accent-600",children:["NT$ ",e.price.toLocaleString()]}),(0,$k.jsxs)("div",{className:"flex items-center text-sm text-primary-600",children:[(0,$k.jsx)("svg",{className:"w-4 h-4 text-warning-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,$k.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.rating]})]})]},`${e.category}-${e.id}`))}),0===o.length&&(0,$k.jsxs)("div",{className:"text-center py-12",children:[(0,$k.jsx)("svg",{className:"w-16 h-16 text-primary-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,$k.jsx)("p",{className:"text-primary-500",children:"\u66ab\u7121\u4e0a\u67b6\u670d\u52d9"})]})]})]})]})]})]}):(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center",children:[(0,$k.jsx)("h2",{className:"text-2xl font-bold text-primary-800 mb-4",children:"\u5275\u4f5c\u8005\u4e0d\u5b58\u5728"}),(0,$k.jsx)(Ee,{to:"/",className:"text-primary-600 hover:text-primary-800",children:"\u8fd4\u56de\u9996\u9801"})]})})},dC=async e=>{try{if(console.log("createUserProfile \u88ab\u8abf\u7528\uff0c\u8cc7\u6599:",e),e.uid){const t=xm(Vk,"users",e.uid),n={...e,status:"active",emailVerified:!1,profileComplete:!0};console.log("\u6e96\u5099\u5beb\u5165 Firestore \u7684\u8cc7\u6599:",n),await function(e,t,n){e=La(e,wm);const r=La(e.firestore,Nm),i=yg(e.converter,t,n);return Tg(r,[zm(Vm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Qu.none())])}(t,n),console.log("\u7528\u6236\u6a94\u6848\u5275\u5efa\u6210\u529f\uff0cID:",e.uid);const r=await kg(t);return r.exists()?console.log("\u9a57\u8b49\u6210\u529f\uff0c\u5beb\u5165\u7684\u8cc7\u6599:",r.data()):console.error("\u9a57\u8b49\u5931\u6557\uff0c\u6587\u6a94\u4e0d\u5b58\u5728"),e.uid}{const t=ag(_m(Vk,"users"),cg("email","==",e.email));if(!(await Eg(t)).empty)throw new Error("\u6b64 Email \u5df2\u88ab\u8a3b\u518a");const n=ag(_m(Vk,"users"),cg("nickname","==",e.nickname));if(!(await Eg(n)).empty)throw new Error("\u6b64\u66b1\u7a31\u5df2\u88ab\u4f7f\u7528");const r=await Ng(_m(Vk,"users"),{...e,status:"active",emailVerified:!1,profileComplete:!0});return console.log("\u7528\u6236\u6a94\u6848\u5275\u5efa\u6210\u529f\uff0cID:",r.id),r.id}}catch(dv){throw console.error("\u5275\u5efa\u7528\u6236\u6a94\u6848\u5931\u6557:",dv),dv}},pC=async e=>{try{console.log("createRealtimeUserProfile \u88ab\u8abf\u7528\uff0c\u8cc7\u6599:",e);const t=vk(zk,`users/${e.uid}`),n={uid:e.uid,nickname:e.nickname||"\u65b0\u7528\u6236",avatar:e.avatar||"default-avatar.png",email:e.email,fullName:e.fullName,phone:e.phone||null,friends:{},online:!0,lastActive:Uk(),createdAt:Uk(),updatedAt:Uk()};return console.log("\u6e96\u5099\u5beb\u5165 Realtime Database \u7684\u8cc7\u6599:",n),await xk(t,n),await bk(vk(zk,`users/${e.uid}/online`)).set(!1),console.log("Realtime Database \u7528\u6236\u6a94\u6848\u5275\u5efa\u6210\u529f\uff0cID:",e.uid),e.uid}catch(dv){throw console.error("\u5275\u5efa Realtime Database \u7528\u6236\u6a94\u6848\u5931\u6557:",dv),dv}},fC=async(e,t)=>{try{const n=vk(zk,`users/${e}`);await kk(n,{online:t,lastActive:Uk()}),t&&await bk(vk(zk,`users/${e}/online`)).set(!1),console.log(`\u7528\u6236 ${e} \u5728\u7dda\u72c0\u614b\u66f4\u65b0\u70ba:`,t)}catch(dv){throw console.error("\u66f4\u65b0\u7528\u6236\u5728\u7dda\u72c0\u614b\u5931\u6557:",dv),dv}},mC=()=>{const e=re(),{updateUser:t}=Hk(),[n,r]=(0,i.useState)({fullName:"",nickname:"",email:"",phone:"",password:"",confirmPassword:""}),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)({}),[h,d]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),y=e=>{const{name:t,value:n}=e.target;r(e=>({...e,[t]:n})),c[t]&&u(e=>({...e,[t]:""}))};return(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,$k.jsx)("div",{className:"max-w-md mx-auto",children:(0,$k.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8",children:[(0,$k.jsxs)("div",{className:"text-center mb-8",children:[(0,$k.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u6703\u54e1\u8a3b\u518a"}),(0,$k.jsx)("p",{className:"text-gray-600",children:"\u8acb\u586b\u5beb\u4ee5\u4e0b\u8cc7\u8a0a\u5b8c\u6210\u8a3b\u518a"})]}),c.general&&(0,$k.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,$k.jsx)("p",{className:"text-sm text-red-600",children:c.general})}),(0,$k.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),(()=>{const e={};return n.fullName.trim()||(e.fullName="\u59d3\u540d\u70ba\u5fc5\u586b\u6b04\u4f4d"),n.nickname.trim()||(e.nickname="\u66b1\u7a31\u70ba\u5fc5\u586b\u6b04\u4f4d"),n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(e.email="\u8acb\u8f38\u5165\u6709\u6548\u7684 Email \u683c\u5f0f"):e.email="Email \u70ba\u5fc5\u586b\u6b04\u4f4d",n.phone&&!/^09\d{8}$/.test(n.phone)&&(e.phone="\u8acb\u8f38\u5165\u6709\u6548\u7684\u624b\u6a5f\u865f\u78bc\u683c\u5f0f\uff08\u4f8b\uff1a0912345678\uff09"),n.password?n.password.length<6&&(e.password="\u5bc6\u78bc\u81f3\u5c11\u9700\u8981 6 \u500b\u5b57\u5143"):e.password="\u5bc6\u78bc\u70ba\u5fc5\u586b\u6b04\u4f4d",n.confirmPassword?n.password!==n.confirmPassword&&(e.confirmPassword="\u5bc6\u78bc\u4e0d\u4e00\u81f4"):e.confirmPassword="\u8acb\u78ba\u8a8d\u5bc6\u78bc",u(e),0===Object.keys(e).length})()){d(!0);try{const r=await async function(e,t,n){if(Bn(e.app))return Promise.reject(pr(e));const r=wi(e),i=Ii(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xi,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&os(e),t}),o=await Ji._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(Bk,n.email.trim(),n.password);let c=null;if(s)try{const e="avatars/"+Date.now()+"_"+s.name.replace(/[^a-zA-Z0-9.-]/g,"_"),t=Hy(qk,e);await $y(t,s),c=await Wy(t),console.log("\u982d\u50cf\u4e0a\u50b3\u6210\u529f:",c)}catch(i){console.warn("\u982d\u50cf\u4e0a\u50b3\u5931\u6557\uff0c\u4f46\u7e7c\u7e8c\u8a3b\u518a\u6d41\u7a0b:",i)}await as(r.user,{displayName:n.nickname.trim(),photoURL:c});const u={uid:r.user.uid,fullName:n.fullName.trim(),nickname:n.nickname.trim(),email:n.email.trim(),phone:n.phone.trim()||null,avatar:c||null,online:!0,lastActive:Date.now(),createdAt:new Date,updatedAt:new Date};console.log("\u5275\u5efa\u7528\u6236\u8cc7\u6599:",u);try{await Promise.all([dC(u),pC(u)]),console.log("\u7528\u6236\u8cc7\u6599\u5275\u5efa\u5b8c\u6210\uff08Firestore + Realtime Database\uff09")}catch(o){console.warn("\u7528\u6236\u8cc7\u6599\u5275\u5efa\u5931\u6557\uff0c\u4f46\u4e0d\u5f71\u97ff\u8a3b\u518a\u6d41\u7a0b:",o)}try{await fC(r.user.uid,!0)}catch(a){console.warn("\u8a2d\u7f6e\u5728\u7dda\u72c0\u614b\u5931\u6557\uff0c\u4f46\u4e0d\u5f71\u97ff\u8a3b\u518a\u6d41\u7a0b:",a)}try{await t(r.user,u)}catch(l){console.warn("\u66f4\u65b0 AuthContext \u5931\u6557\uff0c\u4f46\u4e0d\u5f71\u97ff\u8a3b\u518a\u6d41\u7a0b:",l)}alert("\u8a3b\u518a\u6210\u529f\uff01\u6b61\u8fce\u52a0\u5165 Catcher\uff01"),e("/")}catch(dv){console.error("\u8a3b\u518a\u5931\u6557:",dv);let t="\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66";switch(dv.code){case"auth/email-already-in-use":t="\u6b64 Email \u5df2\u88ab\u8a3b\u518a";break;case"auth/invalid-email":t="Email \u683c\u5f0f\u4e0d\u6b63\u78ba";break;case"auth/weak-password":t="\u5bc6\u78bc\u5f37\u5ea6\u592a\u5f31";break;case"auth/operation-not-allowed":t="\u8a3b\u518a\u529f\u80fd\u672a\u555f\u7528";break;default:t=dv.message||"\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"}u({general:t})}finally{d(!1)}}},className:"space-y-6",children:[(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:["\u59d3\u540d ",(0,$k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$k.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:n.fullName,onChange:y,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(c.fullName?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u8f38\u5165\u60a8\u7684\u771f\u5be6\u59d3\u540d"}),c.fullName&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.fullName})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-2",children:["\u66b1\u7a31 ",(0,$k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$k.jsx)("input",{type:"text",id:"nickname",name:"nickname",value:n.nickname,onChange:y,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(c.nickname?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u8f38\u5165\u60a8\u7684\u66b1\u7a31"}),c.nickname&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.nickname})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"avatar",className:"block text-sm font-medium text-gray-700 mb-2",children:["\u982d\u50cf ",(0,$k.jsx)("span",{className:"text-gray-500",children:"(\u9078\u586b)"})]}),(0,$k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$k.jsx)("div",{className:"flex-shrink-0",children:a?(0,$k.jsx)("img",{src:a,alt:"\u982d\u50cf\u9810\u89bd",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-300"}):(0,$k.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center",children:(0,$k.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,$k.jsxs)("div",{className:"flex-1",children:[(0,$k.jsx)("input",{type:"file",id:"avatar",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void u(e=>({...e,avatar:"\u6a94\u6848\u5927\u5c0f\u4e0d\u80fd\u8d85\u904e 5MB"}));if(!t.type.startsWith("image/"))return void u(e=>({...e,avatar:"\u8acb\u9078\u64c7\u5716\u7247\u6a94\u6848"}));o(t);const e=new FileReader;e.onload=e=>{l(e.target.result)},e.readAsDataURL(t),c.avatar&&u(e=>({...e,avatar:""}))}},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,$k.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"\u652f\u63f4 JPG, PNG \u683c\u5f0f\uff0c\u6a94\u6848\u5927\u5c0f\u4e0d\u8d85\u904e 5MB"}),c.avatar&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.avatar})]})]})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",(0,$k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$k.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:y,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(c.email?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u8f38\u5165\u60a8\u7684 Email"}),c.email&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.email})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:["\u624b\u6a5f\u865f\u78bc ",(0,$k.jsx)("span",{className:"text-gray-500",children:"(\u9078\u586b)"})]}),(0,$k.jsx)("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:y,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(c.phone?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u8f38\u5165\u60a8\u7684\u624b\u6a5f\u865f\u78bc"}),c.phone&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.phone})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:["\u5bc6\u78bc ",(0,$k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$k.jsxs)("div",{className:"relative",children:[(0,$k.jsx)("input",{type:p?"text":"password",id:"password",name:"password",value:n.password,onChange:y,className:"w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(c.password?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc\uff08\u81f3\u5c116\u500b\u5b57\u5143\uff09"}),(0,$k.jsx)("button",{type:"button",onClick:()=>f(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:p?(0,$k.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,$k.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),c.password&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.password})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["\u78ba\u8a8d\u5bc6\u78bc ",(0,$k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$k.jsxs)("div",{className:"relative",children:[(0,$k.jsx)("input",{type:m?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:y,className:"w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(c.confirmPassword?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u518d\u6b21\u8f38\u5165\u5bc6\u78bc"}),(0,$k.jsx)("button",{type:"button",onClick:()=>g(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?(0,$k.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,$k.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),c.confirmPassword&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c.confirmPassword})]}),(0,$k.jsx)("div",{children:(0,$k.jsx)("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white "+(h?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:h?(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"\u8a3b\u518a\u4e2d..."]}):"\u5b8c\u6210\u8a3b\u518a"})})]}),(0,$k.jsx)("div",{className:"mt-6 text-center",children:(0,$k.jsxs)("p",{className:"text-sm text-gray-600",children:["\u5df2\u7d93\u6709\u5e33\u6236\u4e86\u55ce\uff1f",(0,$k.jsx)(Ee,{to:"/login",className:"ml-1 font-medium text-green-600 hover:text-green-500",children:"\u7acb\u5373\u767b\u5165"})]})}),(0,$k.jsx)("div",{className:"mt-4 text-center",children:(0,$k.jsx)(Ee,{to:"/",className:"text-sm text-green-600 hover:text-green-500",children:"\u8fd4\u56de\u9996\u9801"})})]})})})},gC=()=>{const e=re(),{updateUser:t}=Hk(),[n,r]=(0,i.useState)({email:"",password:""}),[s,o]=(0,i.useState)({}),[a,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),h=e=>{const{name:t,value:n}=e.target;r(e=>({...e,[t]:n})),s[t]&&o(e=>({...e,[t]:""}))};return(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,$k.jsx)("div",{className:"max-w-md mx-auto",children:(0,$k.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8",children:[(0,$k.jsxs)("div",{className:"text-center mb-8",children:[(0,$k.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u6703\u54e1\u767b\u5165"}),(0,$k.jsx)("p",{className:"text-gray-600",children:"\u6b61\u8fce\u56de\u4f86\uff01\u8acb\u8f38\u5165\u60a8\u7684\u767b\u5165\u8cc7\u8a0a"})]}),s.general&&(0,$k.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,$k.jsx)("p",{className:"text-sm text-red-600",children:s.general})}),(0,$k.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),(()=>{const e={};return n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(e.email="\u8acb\u8f38\u5165\u6709\u6548\u7684 Email \u683c\u5f0f"):e.email="Email \u70ba\u5fc5\u586b\u6b04\u4f4d",n.password?n.password.length<6&&(e.password="\u5bc6\u78bc\u81f3\u5c11\u9700\u8981 6 \u500b\u5b57\u5143"):e.password="\u5bc6\u78bc\u70ba\u5fc5\u586b\u6b04\u4f4d",o(e),0===Object.keys(e).length})()){l(!0);try{const r=await function(e,t,n){return Bn(e.app)?Promise.reject(pr(e)):ss(It(e),$i.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&os(e),t})}(Bk,n.email.trim(),n.password);console.log("\u767b\u5165\u6210\u529f:",r.user);try{const e=await(async e=>{try{const t=vk(zk,"users"),n=await Ck(t);if(n.exists()){const t=n.val(),r=Object.entries(t).find(t=>{let[n,r]=t;return r.email===e});if(r){const[e,t]=r;return{id:e,...t}}}return null}catch(dv){throw console.error("\u6839\u64da Email \u7372\u53d6 Realtime Database \u7528\u6236\u5931\u6557:",dv),dv}})(n.email.trim());if(console.log("Realtime Database \u7528\u6236\u8cc7\u6599:",e),e){try{await fC(r.user.uid,!0)}catch(i){console.warn("\u66f4\u65b0\u5728\u7dda\u72c0\u614b\u5931\u6557:",i)}try{await t(r.user,e),localStorage.setItem("userProfile",JSON.stringify(e))}catch(s){console.warn("\u66f4\u65b0 AuthContext \u5931\u6557:",s)}}else try{const e=await(async e=>{try{const t=ag(_m(Vk,"users"),cg("email","==",e)),n=await Eg(t);if(n.empty)return null;{const e=n.docs[0];return{id:e.id,...e.data()}}}catch(dv){throw console.error("\u6839\u64da Email \u7372\u53d6\u7528\u6236\u5931\u6557:",dv),dv}})(n.email.trim());console.log("Firestore \u7528\u6236\u8cc7\u6599:",e),e&&(await t(r.user,e),localStorage.setItem("userProfile",JSON.stringify(e)))}catch(a){console.warn("\u5f9e Firestore \u7372\u53d6\u7528\u6236\u8cc7\u6599\u5931\u6557:",a)}}catch(c){console.warn("\u7372\u53d6\u7528\u6236\u8cc7\u6599\u5931\u6557\uff0c\u4f46\u4e0d\u5f71\u97ff\u767b\u5165\u6d41\u7a0b:",c);try{await t(r.user)}catch(u){console.warn("\u66f4\u65b0\u57fa\u672c\u7528\u6236\u8cc7\u6599\u5931\u6557:",u)}}alert("\u767b\u5165\u6210\u529f\uff01\u6b61\u8fce\u56de\u4f86\uff01"),e("/")}catch(dv){console.error("\u767b\u5165\u5931\u6557:",dv);let t="\u767b\u5165\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66";switch(dv.code){case"auth/user-not-found":t="\u627e\u4e0d\u5230\u6b64 Email \u7684\u5e33\u6236";break;case"auth/wrong-password":t="\u5bc6\u78bc\u932f\u8aa4";break;case"auth/invalid-email":t="Email \u683c\u5f0f\u4e0d\u6b63\u78ba";break;case"auth/user-disabled":t="\u6b64\u5e33\u6236\u5df2\u88ab\u505c\u7528";break;case"auth/too-many-requests":t="\u5617\u8a66\u6b21\u6578\u904e\u591a\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66";break;default:t=dv.message||"\u767b\u5165\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"}o({general:t})}finally{l(!1)}}},className:"space-y-6",children:[(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",(0,$k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$k.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:h,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(s.email?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u8f38\u5165\u60a8\u7684 Email",autoComplete:"email"}),s.email&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s.email})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:["\u5bc6\u78bc ",(0,$k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,$k.jsxs)("div",{className:"relative",children:[(0,$k.jsx)("input",{type:c?"text":"password",id:"password",name:"password",value:n.password,onChange:h,className:"w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent "+(s.password?"border-red-500":"border-gray-300"),placeholder:"\u8acb\u8f38\u5165\u60a8\u7684\u5bc6\u78bc",autoComplete:"current-password"}),(0,$k.jsx)("button",{type:"button",onClick:()=>u(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?(0,$k.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,$k.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),s.password&&(0,$k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s.password})]}),(0,$k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,$k.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"\u8a18\u4f4f\u6211"})]}),(0,$k.jsx)("button",{type:"button",onClick:()=>{alert("\u5fd8\u8a18\u5bc6\u78bc\u529f\u80fd\u5c1a\u672a\u5be6\u4f5c")},className:"text-sm text-green-600 hover:text-green-500",children:"\u5fd8\u8a18\u5bc6\u78bc\uff1f"})]}),(0,$k.jsx)("div",{children:(0,$k.jsx)("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white "+(a?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:a?(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"\u767b\u5165\u4e2d..."]}):"\u767b\u5165"})})]}),(0,$k.jsx)("div",{className:"mt-6 text-center",children:(0,$k.jsxs)("p",{className:"text-sm text-gray-600",children:["\u9084\u6c92\u6709\u5e33\u6236\u55ce\uff1f",(0,$k.jsx)(Ee,{to:"/register",className:"ml-1 font-medium text-green-600 hover:text-green-500",children:"\u7acb\u5373\u8a3b\u518a"})]})}),(0,$k.jsx)("div",{className:"mt-4 text-center",children:(0,$k.jsx)(Ee,{to:"/",className:"text-sm text-green-600 hover:text-green-500",children:"\u8fd4\u56de\u9996\u9801"})})]})})})},yC=()=>{const e=re(),{user:t,loading:n}=Hk(),[r]=Se(),[s,o]=(0,i.useState)([]),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)([]),[h,d]=(0,i.useState)(""),[p,f]=(0,i.useState)(!0),m=(0,i.useRef)(null),g=(0,i.useRef)(null),y=(0,i.useRef)(null),v=r.get("creatorId"),w=r.get("creatorName"),b=t&&!t.isAnonymous&&!t.isTemporary&&t.email;(0,i.useEffect)(()=>{if(!n&&!b)return alert("\u8acb\u5148\u767b\u5165\u4ee5\u4f7f\u7528\u79c1\u8a0a\u529f\u80fd"),void e("/login")},[n,b,e]);(0,i.useEffect)(()=>{(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[c]);const _=async(e,n)=>{if(!b)return;const r=[t.uid,e].sort().join("_");const i={id:r,participantId:e,participantName:n,participantAvatar:"/api/placeholder/40/40",lastMessage:"",lastMessageTime:(new Date).toISOString(),unreadCount:0},s={};s[`users/${t.uid}/conversations/${r}`]=i,s[`users/${e}/conversations/${r}`]={...i,participantId:t.uid,participantName:t.displayName||t.email||"\u7528\u6236"};try{await xk(vk(zk,`users/${t.uid}/conversations/${r}`),i),await xk(vk(zk,`users/${e}/conversations/${r}`),{...i,participantId:t.uid,participantName:t.displayName||t.email||"\u7528\u6236"}),l(i)}catch(dv){console.error("\u5275\u5efa\u5c0d\u8a71\u5931\u6557:",dv)}},x=e=>{if(!e)return;if(y.current){try{Ik(y.current)}catch(dv){console.log("\u79fb\u9664\u76e3\u807d\u5668\u6642\u767c\u751f\u932f\u8aa4:",dv)}y.current=null}const t=Sk(function(e){let t=It(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}(vk(zk,`chats/${e}/messages`),function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ex("orderByChild","path",e,!1),new Ak(e)}("timestamp"),function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Rk(e)}(50)),e=>{const t=e.val();if(t){const e=Object.entries(t).map(e=>{let[t,n]=e;return{id:t,...n,timestamp:new Date(n.timestamp)}}).sort((e,t)=>e.timestamp-t.timestamp);u(e)}else u([])},e=>{console.error("\u8f09\u5165\u8a0a\u606f\u5931\u6557:",e),u([])});y.current=t},k=async()=>{if(!h.trim()||!a||!b)return;const e={senderId:t.uid,senderName:t.displayName||t.email||"\u6211",content:h.trim(),timestamp:Uk(),isRead:!1};try{const n=vk(zk,`chats/${a.id}/messages`);await _k(n,e);const r={lastMessage:h.trim(),lastMessageTime:(new Date).toISOString()};await xk(vk(zk,`users/${t.uid}/conversations/${a.id}`),{...a,...r});const i=vk(zk,`users/${a.participantId}/conversations/${a.id}`);await xk(i,{...a,participantId:t.uid,participantName:t.displayName||t.email||"\u7528\u6236",lastMessage:h.trim(),lastMessageTime:(new Date).toISOString(),unreadCount:(a.unreadCount||0)+1}),d("")}catch(dv){console.error("\u767c\u9001\u8a0a\u606f\u5931\u6557:",dv),alert("\u767c\u9001\u8a0a\u606f\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}};(0,i.useEffect)(()=>{if(b)return(()=>{if(!b)return;const e=Sk(vk(zk,`users/${t.uid}/conversations`),e=>{const t=e.val();if(t){const e=Object.entries(t).map(e=>{let[t,n]=e;return{id:t,...n}}).sort((e,t)=>new Date(t.lastMessageTime)-new Date(e.lastMessageTime));if(o(e),v&&w){const t=e.find(e=>e.participantId===v);t?l(t):_(v,w)}}else v&&w&&_(v,w);f(!1)},e=>{console.error("\u8f09\u5165\u5c0d\u8a71\u5217\u8868\u5931\u6557:",e),f(!1)});g.current=e})(),()=>{if(g.current){try{Ik(g.current)}catch(dv){console.log("\u79fb\u9664\u5c0d\u8a71\u76e3\u807d\u5668\u6642\u767c\u751f\u932f\u8aa4:",dv)}g.current=null}if(y.current){try{Ik(y.current)}catch(dv){console.log("\u79fb\u9664\u8a0a\u606f\u76e3\u807d\u5668\u6642\u767c\u751f\u932f\u8aa4:",dv)}y.current=null}}},[b,v,w]),(0,i.useEffect)(()=>(a&&(x(a.id),a.unreadCount>0&&xk(vk(zk,`users/${t.uid}/conversations/${a.id}/unreadCount`),0).catch(e=>console.error("\u6a19\u8a18\u5df2\u8b80\u5931\u6557:",e))),()=>{if(y.current){try{Ik(y.current)}catch(dv){console.log("\u79fb\u9664\u8a0a\u606f\u76e3\u807d\u5668\u6642\u767c\u751f\u932f\u8aa4:",dv)}y.current=null}}),[a,null===t||void 0===t?void 0:t.uid]);return n?(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center",children:[(0,$k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-green-500 border-t-transparent mx-auto mb-4"}),(0,$k.jsx)("p",{className:"text-gray-600",children:"\u6aa2\u67e5\u767b\u5165\u72c0\u614b\u4e2d..."})]})}):b?p?(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center",children:[(0,$k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-green-500 border-t-transparent mx-auto mb-4"}),(0,$k.jsx)("p",{className:"text-gray-600",children:"\u8f09\u5165\u804a\u5929\u8a18\u9304\u4e2d..."})]})}):(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 chat-mobile",children:(0,$k.jsxs)("div",{className:"max-w-6xl mx-auto py-4 md:py-8 px-4",children:[(0,$k.jsxs)("div",{className:"mb-4 md:mb-6 flex items-center justify-between",children:[(0,$k.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"\u79c1\u8a0a"}),(0,$k.jsx)("button",{onClick:()=>e("/"),className:"text-green-600 hover:text-green-500 text-sm md:text-base",children:"\u8fd4\u56de\u9996\u9801"})]}),(0,$k.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",style:{height:"calc(100vh - 180px)",minHeight:"500px"},children:(0,$k.jsxs)("div",{className:"flex h-full",children:[(0,$k.jsxs)("div",{className:(a?"hidden md:block":"block")+" w-full md:w-1/3 border-r border-gray-200 flex flex-col chat-sidebar-mobile",children:[(0,$k.jsx)("div",{className:"p-3 md:p-4 border-b border-gray-200",children:(0,$k.jsx)("h2",{className:"text-base md:text-lg font-semibold text-gray-900",children:"\u5c0d\u8a71"})}),(0,$k.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===s.length?(0,$k.jsx)("div",{className:"p-4 text-center text-gray-500",children:(0,$k.jsx)("p",{className:"text-sm md:text-base",children:"\u5c1a\u7121\u5c0d\u8a71\u8a18\u9304"})}):s.map(e=>(0,$k.jsx)("div",{onClick:()=>(e=>{l(e)})(e),className:"p-3 md:p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 touch-feedback "+((null===a||void 0===a?void 0:a.id)===e.id?"bg-green-50":""),children:(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("img",{src:e.participantAvatar,alt:e.participantName,className:"w-10 h-10 md:w-12 md:h-12 rounded-full mr-3 flex-shrink-0"}),(0,$k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$k.jsx)("p",{className:"text-sm md:text-base font-medium text-gray-900 truncate",children:e.participantName}),(0,$k.jsx)("p",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:e.lastMessageTime})]}),(0,$k.jsx)("p",{className:"text-xs md:text-sm text-gray-500 truncate",children:e.lastMessage})]}),e.unreadCount>0&&(0,$k.jsx)("div",{className:"ml-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center flex-shrink-0",children:e.unreadCount})]})},e.id))})]}),(0,$k.jsx)("div",{className:(a?"flex":"hidden md:flex")+" flex-1 flex-col chat-main-mobile",children:a?(0,$k.jsxs)($k.Fragment,{children:[(0,$k.jsx)("div",{className:"p-3 md:p-4 border-b border-gray-200 bg-gray-50",children:(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("button",{onClick:()=>l(null),className:"md:hidden mr-3 p-1 text-gray-500 hover:text-gray-700",children:(0,$k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,$k.jsx)("img",{src:a.participantAvatar,alt:a.participantName,className:"w-8 h-8 md:w-10 md:h-10 rounded-full mr-3"}),(0,$k.jsx)("h3",{className:"text-base md:text-lg font-medium text-gray-900",children:a.participantName})]})}),(0,$k.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-3 md:space-y-4 chat-messages-mobile",children:[c.map(e=>(0,$k.jsx)("div",{className:"flex "+(e.senderId===(null===t||void 0===t?void 0:t.uid)?"justify-end":"justify-start"),children:(0,$k.jsxs)("div",{className:"message-bubble "+(e.senderId===(null===t||void 0===t?void 0:t.uid)?"sent":"received"),children:[(0,$k.jsx)("p",{className:"text-sm md:text-base",children:e.content}),(0,$k.jsx)("p",{className:"text-xs mt-1 opacity-75",children:e.timestamp instanceof Date?e.timestamp.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"}):new Date(e.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),(0,$k.jsx)("div",{ref:m})]}),(0,$k.jsx)("div",{className:"chat-input-mobile p-3 md:p-4 border-t border-gray-200 bg-white",children:(0,$k.jsxs)("div",{className:"flex space-x-2",children:[(0,$k.jsx)("textarea",{value:h,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},placeholder:"\u8f38\u5165\u8a0a\u606f...",className:"input-mobile flex-1 px-3 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:"1",style:{fontSize:"16px"}}),(0,$k.jsx)("button",{onClick:k,disabled:!h.trim(),className:"btn-mobile px-4 py-2 rounded-lg font-medium transition-colors "+(h.trim()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"\u767c\u9001"})]})})]}):(0,$k.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(0,$k.jsxs)("div",{className:"text-center text-gray-500",children:[(0,$k.jsx)("div",{className:"mb-4",children:(0,$k.jsx)("svg",{className:"w-16 h-16 mx-auto text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,$k.jsx)("p",{className:"text-base md:text-lg mb-2",children:"\u9078\u64c7\u4e00\u500b\u5c0d\u8a71\u958b\u59cb\u804a\u5929"}),(0,$k.jsx)("p",{className:"text-sm text-gray-400",children:"\u6216\u9ede\u64ca\u5275\u4f5c\u8005\u9801\u9762\u7684\u300c\u79c1\u8a0a\u5275\u4f5c\u8005\u300d\u6309\u9215\u958b\u59cb\u65b0\u5c0d\u8a71"})]})})})]})})]})}):(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center",children:[(0,$k.jsx)("p",{className:"text-gray-600 mb-4",children:"\u8acb\u5148\u767b\u5165\u4ee5\u4f7f\u7528\u79c1\u8a0a\u529f\u80fd"}),(0,$k.jsx)("button",{onClick:()=>e("/login"),className:"btn-primary",children:"\u524d\u5f80\u767b\u5165"})]})})},vC=()=>{const e=ne(),[t,n]=(0,i.useState)(""),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)("relevance"),[l,c]=(0,i.useState)("all"),[u,h]=(0,i.useState)([]),[d,p]=(0,i.useState)(!1),[f,m]=(0,i.useState)(null);(0,i.useEffect)(()=>{const t=new URLSearchParams(e.search),r=t.get("q")||"",i=t.get("tags")?t.get("tags").split(","):[];n(r),s(i)},[e]),(0,i.useEffect)(()=>{(async()=>{p(!0),m(null);try{const e=await iC(t,r,{priceRange:l,sortBy:o});h(e)}catch(e){m("\u641c\u5c0b\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.error("\u641c\u5c0b\u5931\u6557:",e)}finally{p(!1)}})()},[t,r,o,l]);const g=async()=>{p(!0),m(null);try{const e=await iC(t,r,{priceRange:l,sortBy:o});h(e)}catch(e){m("\u641c\u5c0b\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.error("\u641c\u5c0b\u5931\u6557:",e)}finally{p(!1)}};return(0,$k.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,$k.jsx)("section",{className:"bg-white border-b border-gray-200 sticky top-20 z-40",children:(0,$k.jsxs)("div",{className:"container-sm px-4 py-4",children:[(0,$k.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,$k.jsxs)("div",{className:"flex-1",children:[(0,$k.jsx)("input",{type:"text",placeholder:"\u641c\u5c0b\u670d\u52d9...",value:t,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&g(),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,$k.jsx)("button",{onClick:g,className:"ml-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"\u641c\u5c0b"})]}),(0,$k.jsxs)("div",{className:"flex gap-2",children:[(0,$k.jsxs)("select",{value:o,onChange:e=>a(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",children:[(0,$k.jsx)("option",{value:"relevance",children:"\u76f8\u95dc\u6027"}),(0,$k.jsx)("option",{value:"price-low",children:"\u50f9\u683c\u4f4e\u5230\u9ad8"}),(0,$k.jsx)("option",{value:"price-high",children:"\u50f9\u683c\u9ad8\u5230\u4f4e"}),(0,$k.jsx)("option",{value:"rating",children:"\u8a55\u5206\u9ad8\u5230\u4f4e"})]}),(0,$k.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",children:[(0,$k.jsx)("option",{value:"all",children:"\u6240\u6709\u50f9\u683c"}),(0,$k.jsx)("option",{value:"low",children:"$10,000\u4ee5\u4e0b"}),(0,$k.jsx)("option",{value:"mid",children:"$10,000-$20,000"}),(0,$k.jsx)("option",{value:"high",children:"$20,000\u4ee5\u4e0a"})]})]})]}),(0,$k.jsx)("div",{className:"mt-4",children:(0,$k.jsx)("div",{className:"flex flex-wrap gap-2",children:["\u8a2d\u8a08","\u958b\u767c","\u6587\u6848","\u884c\u92b7","\u7ffb\u8b6f","\u5f71\u97f3","\u651d\u5f71","\u63d2\u756b","UI/UX","SEO","\u793e\u7fa4","\u54c1\u724c"].map(e=>(0,$k.jsx)("button",{onClick:()=>(e=>{r.includes(e)?s(r.filter(t=>t!==e)):r.length<3&&s([...r,e])})(e),disabled:!r.includes(e)&&r.length>=3,className:"px-3 py-1 text-xs rounded-full border transition-all duration-200 "+(r.includes(e)?"bg-primary-600 text-white border-primary-600":r.length>=3?"bg-gray-200 text-gray-400 border-gray-200 cursor-not-allowed":"bg-white text-gray-600 border-gray-300 hover:bg-primary-50 hover:border-primary-300"),children:e},e))})})]})}),(0,$k.jsxs)("section",{className:"container-sm px-4 py-6",children:[(0,$k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,$k.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["\u641c\u5c0b\u7d50\u679c (",u.length,")"]}),(t||r.length>0)&&(0,$k.jsx)("button",{onClick:()=>{n(""),s([]),g()},className:"text-sm text-gray-500 hover:text-gray-700",children:"\u6e05\u9664\u7be9\u9078"})]}),d&&(0,$k.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,$k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),(0,$k.jsx)("span",{className:"ml-3 text-gray-600",children:"\u641c\u5c0b\u4e2d..."})]}),f&&(0,$k.jsxs)("div",{className:"text-center py-12",children:[(0,$k.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,$k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u641c\u5c0b\u51fa\u73fe\u554f\u984c"}),(0,$k.jsx)("p",{className:"text-gray-500 mb-4",children:f}),(0,$k.jsx)("button",{onClick:g,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"\u91cd\u65b0\u641c\u5c0b"})]}),!d&&!f&&(0,$k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(e=>{var t,n,r;return(0,$k.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[(0,$k.jsx)("img",{src:(null===(t=e.images)||void 0===t?void 0:t[0])||"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=300&fit=crop",alt:e.title,className:"w-full h-48 object-cover"}),(0,$k.jsxs)("div",{className:"p-4",children:[(0,$k.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:e.title}),(0,$k.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),(0,$k.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["by ",e.creatorName]}),(0,$k.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$k.jsxs)("span",{className:"font-bold text-primary-600",children:["TWD"===e.currency?"NT$ ":"$",null===(n=e.price)||void 0===n?void 0:n.toLocaleString()]}),(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("span",{className:"text-yellow-400",children:"\u2605"}),(0,$k.jsx)("span",{className:"text-sm text-gray-600 ml-1",children:e.rating}),(0,$k.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["(",e.reviewCount,")"]})]})]}),(0,$k.jsx)("div",{className:"flex flex-wrap gap-1",children:null===(r=e.tags)||void 0===r?void 0:r.map(e=>(0,$k.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:e},e))})]})]},e.id)})}),!d&&!f&&0===u.length&&(0,$k.jsxs)("div",{className:"text-center py-12",children:[(0,$k.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83d\udd0d"}),(0,$k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u627e\u4e0d\u5230\u76f8\u95dc\u670d\u52d9"}),(0,$k.jsx)("p",{className:"text-gray-500 mb-4",children:"\u8acb\u5617\u8a66\u8abf\u6574\u641c\u5c0b\u689d\u4ef6\u6216\u6a19\u7c64"}),(0,$k.jsx)("button",{onClick:()=>{n(""),s([]),c("all"),a("relevance"),g()},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"\u91cd\u8a2d\u6240\u6709\u7be9\u9078"})]})]})]})},wC=()=>{const[e,t]=(0,i.useState)(0),[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(null),a=[{id:1,src:"/Catcher/images/banner.jpg",alt:"Professional services banner 1"},{id:2,src:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=1920&h=600&fit=crop&crop=center",alt:"Creative workspace banner 2"},{id:3,src:"https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?w=1920&h=600&fit=crop&crop=center",alt:"Digital collaboration banner 3"},{id:4,src:"https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=1920&h=600&fit=crop&crop=center",alt:"Innovation and creativity banner 4"}];(0,i.useEffect)(()=>{const e=setInterval(()=>{t(e=>(e+1)%a.length)},5e3);return()=>clearInterval(e)},[a.length]);const l=()=>{t(e=>(e-1+a.length)%a.length)},c=()=>{t(e=>(e+1)%a.length)};return(0,$k.jsxs)("section",{className:"relative w-full h-64 md:h-80 lg:h-96 overflow-hidden",children:[(0,$k.jsx)("div",{className:"banner-carousel relative w-full h-full",onTouchStart:e=>{o(null),r(e.targetTouches[0].clientX)},onTouchMove:e=>{o(e.targetTouches[0].clientX)},onTouchEnd:()=>{if(!n||!s)return;const e=n-s,t=e<-50;e>50?c():t&&l()},children:a.map((t,n)=>(0,$k.jsx)("div",{className:"absolute inset-0 w-full h-full transition-opacity duration-500 ease-in-out "+(n===e?"opacity-100":"opacity-0"),children:(0,$k.jsx)("img",{src:t.src,alt:t.alt,className:"w-full h-full object-cover",loading:0===n?"eager":"lazy",draggable:!1})},t.id))}),(0,$k.jsx)("button",{onClick:l,className:"banner-controls absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-2 rounded-full transition-all duration-200 backdrop-blur-sm","aria-label":"Previous slide",children:(0,$k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,$k.jsx)("button",{onClick:c,className:"banner-controls absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-2 rounded-full transition-all duration-200 backdrop-blur-sm","aria-label":"Next slide",children:(0,$k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,$k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,$k.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:a.map((n,r)=>(0,$k.jsx)("button",{onClick:()=>(e=>{t(e)})(r),className:"w-3 h-3 rounded-full transition-all duration-200 "+(r===e?"bg-white":"bg-white bg-opacity-50 hover:bg-opacity-75"),"aria-label":`Go to slide ${r+1}`},r))})]})},bC=async()=>{try{const e=await(async()=>{const e={"service-1":{title:"\u5c08\u696d\u7db2\u9801\u8a2d\u8a08\u670d\u52d9",description:"\u63d0\u4f9b\u97ff\u61c9\u5f0f\u7db2\u9801\u8a2d\u8a08\uff0c\u5305\u542b UI/UX \u8a2d\u8a08\u548c\u524d\u7aef\u958b\u767c\u3002\u5c08\u696d\u5718\u968a\u70ba\u60a8\u6253\u9020\u73fe\u4ee3\u5316\u3001\u7528\u6236\u53cb\u597d\u7684\u7db2\u7ad9\u3002",category:"design",price:25e3,currency:"TWD",creatorId:"creator-1",creatorName:"\u8a2d\u8a08\u5e2b\u5c0f\u738b",creatorAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",tags:["\u8a2d\u8a08","UI/UX","\u958b\u767c"],images:["https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&h=600&fit=crop"],rating:4.8,reviewCount:24,featured:!0,published:!0,deliveryDays:14,revisions:3,status:"active",createdAt:Date.now(),updatedAt:Date.now()},"service-2":{title:"\u54c1\u724cLogo\u8a2d\u8a08",description:"\u5c08\u696d\u54c1\u724c\u8b58\u5225\u8a2d\u8a08\uff0c\u5305\u542bLogo\u3001\u540d\u7247\u3001\u4f01\u696d\u5f62\u8c61\u8a2d\u8a08\u3002\u7368\u7279\u5275\u610f\uff0c\u5c55\u73fe\u54c1\u724c\u50f9\u503c\u3002",category:"design",price:8e3,currency:"TWD",creatorId:"creator-2",creatorName:"\u5275\u610f\u5de5\u4f5c\u5ba4",creatorAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b632?w=150&h=150&fit=crop&crop=face",tags:["\u8a2d\u8a08","\u54c1\u724c","\u63d2\u756b"],images:["https://images.unsplash.com/photo-1561070791-2526d30994b5?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1572044162444-ad60f128bdea?w=800&h=600&fit=crop"],rating:4.9,reviewCount:32,featured:!0,published:!0,deliveryDays:7,revisions:5,status:"active",createdAt:Date.now(),updatedAt:Date.now()},"service-3":{title:"\u5f71\u7247\u526a\u8f2f\u88fd\u4f5c",description:"\u5c08\u696d\u5f71\u7247\u526a\u8f2f\u670d\u52d9\uff0c\u5305\u542b\u7279\u6548\u88fd\u4f5c\u3001\u8abf\u8272\u3001\u914d\u97f3\u7b49\u3002\u8b93\u60a8\u7684\u5275\u610f\u8b8a\u6210\u7cbe\u5f69\u5f71\u7247\u3002",category:"video",price:15e3,currency:"TWD",creatorId:"creator-3",creatorName:"\u5f71\u50cf\u5de5\u4f5c\u8005",creatorAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",tags:["\u5f71\u7247","\u526a\u8f2f","\u7279\u6548"],images:["https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&h=600&fit=crop"],rating:4.7,reviewCount:18,featured:!0,published:!0,deliveryDays:10,revisions:2,status:"active",createdAt:Date.now(),updatedAt:Date.now()}};try{const t=vk(zk,"services");return await xk(t,e),console.log("\u670d\u52d9\u6578\u64da\u521d\u59cb\u5316\u6210\u529f"),!0}catch(dv){return console.error("\u670d\u52d9\u6578\u64da\u521d\u59cb\u5316\u5931\u6557:",dv),!1}})(),t=await(async()=>{const e={"creator-1":{name:"\u8a2d\u8a08\u5e2b\u5c0f\u738b",email:"wang@example.com",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",bio:"\u8cc7\u6df1\u7db2\u9801\u8a2d\u8a08\u5e2b\uff0c\u64c1\u67095\u5e74\u4ee5\u4e0a\u8a2d\u8a08\u7d93\u9a57\uff0c\u5c08\u7cbe\u65bc UI/UX \u8a2d\u8a08\u548c\u524d\u7aef\u958b\u767c\u3002",skills:["\u7db2\u9801\u8a2d\u8a08","UI/UX","\u524d\u7aef\u958b\u767c","React","Vue"],location:"\u53f0\u5317\u5e02",languages:["\u4e2d\u6587","\u82f1\u6587"],joinDate:Date.now()-31536e6,rating:4.8,reviewCount:45,completedProjects:67,responseTime:"2\u5c0f\u6642\u5167",portfolio:["https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=400&h=300&fit=crop"],verified:!0,status:"active"},"creator-2":{name:"\u5275\u610f\u5de5\u4f5c\u5ba4",email:"studio@example.com",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b632?w=150&h=150&fit=crop&crop=face",bio:"\u5c08\u696d\u8a2d\u8a08\u5718\u968a\uff0c\u63d0\u4f9b\u54c1\u724c\u8b58\u5225\u3001\u5e73\u9762\u8a2d\u8a08\u7b49\u670d\u52d9\uff0c\u81f4\u529b\u65bc\u70ba\u5ba2\u6236\u6253\u9020\u7368\u7279\u7684\u8996\u89ba\u5f62\u8c61\u3002",skills:["\u5e73\u9762\u8a2d\u8a08","\u54c1\u724c\u8a2d\u8a08","Logo\u8a2d\u8a08","Adobe\u5957\u4ef6","\u63d2\u756b"],location:"\u65b0\u5317\u5e02",languages:["\u4e2d\u6587","\u82f1\u6587","\u65e5\u6587"],joinDate:Date.now()-63072e6,rating:4.9,reviewCount:78,completedProjects:124,responseTime:"1\u5c0f\u6642\u5167",portfolio:["https://images.unsplash.com/photo-1561070791-2526d30994b5?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1572044162444-ad60f128bdea?w=400&h=300&fit=crop"],verified:!0,status:"active"},"creator-3":{name:"\u5f71\u50cf\u5de5\u4f5c\u8005",email:"video@example.com",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",bio:"\u5c08\u696d\u5f71\u50cf\u88fd\u4f5c\u4eba\uff0c\u5c08\u7cbe\u65bc\u5f71\u7247\u526a\u8f2f\u3001\u7279\u6548\u88fd\u4f5c\u3001\u52d5\u756b\u8a2d\u8a08\u3002\u8b93\u6bcf\u500b\u6545\u4e8b\u90fd\u7cbe\u5f69\u5448\u73fe\u3002",skills:["\u5f71\u7247\u526a\u8f2f","\u7279\u6548\u88fd\u4f5c","\u52d5\u756b\u8a2d\u8a08","After Effects","Premiere Pro"],location:"\u53f0\u4e2d\u5e02",languages:["\u4e2d\u6587","\u82f1\u6587"],joinDate:Date.now()-47304e6,rating:4.7,reviewCount:34,completedProjects:52,responseTime:"4\u5c0f\u6642\u5167",portfolio:["https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=400&h=300&fit=crop","https://images.unsplash.com/photo-1551434678-e076c223a692?w=400&h=300&fit=crop"],verified:!0,status:"active"}};try{const t=vk(zk,"creators");return await xk(t,e),console.log("\u5275\u4f5c\u8005\u6578\u64da\u521d\u59cb\u5316\u6210\u529f"),!0}catch(dv){return console.error("\u5275\u4f5c\u8005\u6578\u64da\u521d\u59cb\u5316\u5931\u6557:",dv),!1}})();return e&&t?(console.log("\u6240\u6709 Realtime Database \u6578\u64da\u521d\u59cb\u5316\u6210\u529f"),!0):(console.error("\u90e8\u5206\u6578\u64da\u521d\u59cb\u5316\u5931\u6557"),!1)}catch(dv){return console.error("\u521d\u59cb\u5316\u6578\u64da\u6642\u767c\u751f\u932f\u8aa4:",dv),!1}},_C=()=>(0,$k.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,$k.jsx)("button",{onClick:async()=>{try{await bC()?alert("\u6578\u64da\u521d\u59cb\u5316\u6210\u529f\uff01\u8acb\u91cd\u65b0\u8f09\u5165\u9801\u9762\u67e5\u770b\u7cbe\u9078\u670d\u52d9\u3002"):alert("\u6578\u64da\u521d\u59cb\u5316\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u63a7\u5236\u53f0\u932f\u8aa4\u8a0a\u606f\u3002")}catch(dv){console.error("\u521d\u59cb\u5316\u932f\u8aa4:",dv),alert("\u6578\u64da\u521d\u59cb\u5316\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u63a7\u5236\u53f0\u932f\u8aa4\u8a0a\u606f\u3002")}},className:"bg-accent-600 hover:bg-accent-700 text-white px-4 py-2 rounded-lg shadow-lg transition-colors",children:"\u521d\u59cb\u5316\u6578\u64da"})}),xC=()=>{const{user:e}=Hk(),t=re(),[n,r]=(0,i.useState)({title:"",description:"",category:"design",price:"",currency:"TWD",deliveryDays:7,revisions:3,tags:"",featured:!1,published:!1}),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)([""]),[h,d]=(0,i.useState)(!1),[p,f]=(0,i.useState)(0),m=e=>{const{name:t,value:n,type:i,checked:s}=e.target;r(e=>({...e,[t]:"checkbox"===i?s:n}))},g=async(e,t)=>{const n=Hy(qk,t),r=await $y(n,e);return await Wy(r.ref)};return e?(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 py-8",children:(0,$k.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,$k.jsx)("h1",{className:"text-3xl font-bold text-primary-800 mb-8",children:"\u767c\u5e03\u65b0\u670d\u52d9"}),(0,$k.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),e)if(n.title&&n.description&&n.price)if(s){d(!0),f(0);try{f(20);const r=await g(s,`services/${e.uid}/${Date.now()}_cover_${s.name}`);f(40);const i=[];for(let t=0;t<a.length;t++){const n=a[t],r=await g(n,`services/${e.uid}/${Date.now()}_media_${t}_${n.name}`);i.push(r),f(40+20*(t+1)/a.length)}const o=c.filter(e=>""!==e.trim());f(80);const l={...n,price:parseInt(n.price),deliveryDays:parseInt(n.deliveryDays),revisions:parseInt(n.revisions),tags:n.tags.split(",").map(e=>e.trim()).filter(e=>""!==e),creatorId:e.uid,creatorName:e.displayName||e.email,creatorAvatar:e.photoURL||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",images:[r,...i],mediaLinks:o,rating:0,reviewCount:0,status:"active",createdAt:Date.now(),updatedAt:Date.now()};f(90);const u=vk(zk,"services");await _k(u,l),f(100),alert("\u670d\u52d9\u767c\u5e03\u6210\u529f\uff01"),t("/")}catch(dv){console.error("\u767c\u5e03\u670d\u52d9\u5931\u6557:",dv),alert("\u767c\u5e03\u670d\u52d9\u5931\u6557\uff0c\u8acb\u91cd\u8a66")}finally{d(!1),f(0)}}else alert("\u8acb\u4e0a\u50b3\u5c01\u9762\u5716\u7247");else alert("\u8acb\u586b\u5beb\u6240\u6709\u5fc5\u8981\u6b04\u4f4d");else alert("\u8acb\u5148\u767b\u5165\u624d\u80fd\u767c\u5e03\u670d\u52d9")},className:"bg-white rounded-lg shadow-md p-6",children:[(0,$k.jsxs)("div",{className:"mb-8",children:[(0,$k.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\u57fa\u672c\u8cc7\u8a0a"}),(0,$k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,$k.jsxs)("div",{children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u670d\u52d9\u6a19\u984c *"}),(0,$k.jsx)("input",{type:"text",name:"title",value:n.title,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"\u8f38\u5165\u670d\u52d9\u6a19\u984c",required:!0})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u670d\u52d9\u985e\u5225 *"}),(0,$k.jsx)("select",{name:"category",value:n.category,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[{value:"design",label:"\u8a2d\u8a08"},{value:"development",label:"\u958b\u767c"},{value:"video",label:"\u5f71\u7247"},{value:"writing",label:"\u5beb\u4f5c"},{value:"marketing",label:"\u884c\u92b7"},{value:"music",label:"\u97f3\u6a02"},{value:"business",label:"\u5546\u696d"},{value:"other",label:"\u5176\u4ed6"}].map(e=>(0,$k.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,$k.jsxs)("div",{className:"mt-6",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u670d\u52d9\u63cf\u8ff0 *"}),(0,$k.jsx)("textarea",{name:"description",value:n.description,onChange:m,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"\u8a73\u7d30\u63cf\u8ff0\u60a8\u7684\u670d\u52d9\u5167\u5bb9",required:!0})]}),(0,$k.jsxs)("div",{className:"mt-6",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u6a19\u7c64 (\u7528\u9017\u865f\u5206\u9694)"}),(0,$k.jsx)("input",{type:"text",name:"tags",value:n.tags,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"\u4f8b\u5982\uff1a\u8a2d\u8a08, UI/UX, \u7db2\u9801"})]})]}),(0,$k.jsxs)("div",{className:"mb-8",children:[(0,$k.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\u50f9\u683c\u548c\u689d\u4ef6"}),(0,$k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,$k.jsxs)("div",{children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u50f9\u683c (TWD) *"}),(0,$k.jsx)("input",{type:"number",name:"price",value:n.price,onChange:m,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"1000",required:!0})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u4ea4\u4ed8\u5929\u6578"}),(0,$k.jsx)("input",{type:"number",name:"deliveryDays",value:n.deliveryDays,onChange:m,min:"1",max:"30",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u4fee\u6539\u6b21\u6578"}),(0,$k.jsx)("input",{type:"number",name:"revisions",value:n.revisions,onChange:m,min:"0",max:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),(0,$k.jsxs)("div",{className:"mb-8",children:[(0,$k.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\u5a92\u9ad4\u6a94\u6848"}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u5c01\u9762\u5716\u7247 *"}),(0,$k.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&t.type.startsWith("image/")?o(t):alert("\u8acb\u9078\u64c7\u6709\u6548\u7684\u5716\u7247\u6a94\u6848")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0}),s&&(0,$k.jsx)("div",{className:"mt-2",children:(0,$k.jsx)("img",{src:URL.createObjectURL(s),alt:"\u5c01\u9762\u9810\u89bd",className:"w-32 h-32 object-cover rounded-lg"})})]}),(0,$k.jsxs)("div",{className:"mb-6",children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u5176\u4ed6\u5a92\u9ad4\u6a94\u6848 (\u6700\u591a 4 \u500b)"}),(0,$k.jsx)("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files).filter(e=>e.type.startsWith("image/")||e.type.startsWith("video/"));t.length+a.length>4?alert("\u6700\u591a\u53ea\u80fd\u4e0a\u50b3 4 \u500b\u5a92\u9ad4\u6a94\u6848"):l(e=>[...e,...t].slice(0,4))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),a.length>0&&(0,$k.jsx)("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2",children:a.map((e,t)=>(0,$k.jsxs)("div",{className:"relative",children:[e.type.startsWith("image/")?(0,$k.jsx)("img",{src:URL.createObjectURL(e),alt:`\u5a92\u9ad4 ${t+1}`,className:"w-full h-24 object-cover rounded-lg"}):(0,$k.jsx)("video",{src:URL.createObjectURL(e),className:"w-full h-24 object-cover rounded-lg"}),(0,$k.jsx)("button",{type:"button",onClick:()=>(e=>{l(a.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"\xd7"})]},t))})]}),(0,$k.jsxs)("div",{children:[(0,$k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u5a92\u9ad4\u9023\u7d50 (YouTube, Vimeo \u7b49)"}),c.map((e,t)=>(0,$k.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,$k.jsx)("input",{type:"url",value:e,onChange:e=>((e,t)=>{const n=[...c];n[e]=t,u(n)})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://..."}),(0,$k.jsx)("button",{type:"button",onClick:()=>(e=>{u(c.filter((t,n)=>n!==e))})(t),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"\u79fb\u9664"})]},t)),c.length<4&&(0,$k.jsx)("button",{type:"button",onClick:()=>{c.length<4&&u([...c,""])},className:"text-primary-600 hover:text-primary-700 text-sm",children:"+ \u6dfb\u52a0\u9023\u7d50"})]})]}),(0,$k.jsxs)("div",{className:"mb-8",children:[(0,$k.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\u767c\u5e03\u8a2d\u5b9a"}),(0,$k.jsxs)("div",{className:"space-y-4",children:[(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("input",{type:"checkbox",id:"featured",name:"featured",checked:n.featured,onChange:m,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,$k.jsx)("label",{htmlFor:"featured",className:"ml-2 text-sm text-gray-700",children:"\u8a2d\u70ba\u7cbe\u9078\u670d\u52d9"})]}),(0,$k.jsxs)("div",{className:"flex items-center",children:[(0,$k.jsx)("input",{type:"checkbox",id:"published",name:"published",checked:n.published,onChange:m,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,$k.jsx)("label",{htmlFor:"published",className:"ml-2 text-sm text-gray-700",children:"\u7acb\u5373\u767c\u5e03 (\u53d6\u6d88\u52fe\u9078\u5c07\u5132\u5b58\u70ba\u8349\u7a3f)"})]})]})]}),(0,$k.jsxs)("div",{className:"flex gap-4",children:[(0,$k.jsx)("button",{type:"submit",disabled:h,className:"flex-1 bg-primary-600 text-white py-3 px-6 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?`\u4e0a\u50b3\u4e2d... ${p}%`:"\u767c\u5e03\u670d\u52d9"}),(0,$k.jsx)("button",{type:"button",onClick:()=>t("/"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"\u53d6\u6d88"})]})]})]})}):(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center",children:[(0,$k.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"\u8acb\u5148\u767b\u5165"}),(0,$k.jsx)("p",{className:"text-gray-600 mb-6",children:"\u60a8\u9700\u8981\u767b\u5165\u624d\u80fd\u767c\u5e03\u670d\u52d9"}),(0,$k.jsx)("button",{onClick:()=>t("/login"),className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700",children:"\u524d\u5f80\u767b\u5165"})]})})},kC=()=>(0,$k.jsxs)("main",{children:[(0,$k.jsx)(wC,{}),(0,$k.jsx)(Jk,{}),(0,$k.jsx)(sC,{}),(0,$k.jsx)(oC,{}),(0,$k.jsx)(_C,{})]}),CC=()=>{const{loading:e}=Hk();return e?(0,$k.jsx)("div",{className:"min-h-screen bg-cream-50 flex items-center justify-center",children:(0,$k.jsxs)("div",{className:"text-center",children:[(0,$k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-green-500 border-t-transparent mx-auto mb-4"}),(0,$k.jsx)("h2",{className:"text-xl font-medium text-gray-700 mb-2",children:"\u6b63\u5728\u521d\u59cb\u5316\u61c9\u7528\u7a0b\u5f0f"}),(0,$k.jsx)("p",{className:"text-gray-500",children:"\u8acb\u7a0d\u5019\u7247\u523b..."})]})}):(0,$k.jsxs)("div",{className:"min-h-screen bg-cream-50",children:[(0,$k.jsx)(Xk,{}),(0,$k.jsxs)(ge,{children:[(0,$k.jsx)(fe,{path:"/",element:(0,$k.jsx)(kC,{})}),(0,$k.jsx)(fe,{path:"/search",element:(0,$k.jsx)(vC,{})}),(0,$k.jsx)(fe,{path:"/services/:category",element:(0,$k.jsx)(lC,{})}),(0,$k.jsx)(fe,{path:"/services/:category/:serviceId",element:(0,$k.jsx)(cC,{})}),(0,$k.jsx)(fe,{path:"/creator/:creatorId",element:(0,$k.jsx)(hC,{})}),(0,$k.jsx)(fe,{path:"/register",element:(0,$k.jsx)(mC,{})}),(0,$k.jsx)(fe,{path:"/login",element:(0,$k.jsx)(gC,{})}),(0,$k.jsx)(fe,{path:"/chat",element:(0,$k.jsx)(yC,{})}),(0,$k.jsx)(fe,{path:"/upload-service",element:(0,$k.jsx)(xC,{})})]}),(0,$k.jsx)(aC,{})]})};const EC=function(){return(0,i.useEffect)(()=>{},[]),(0,$k.jsx)(Kk,{children:(0,$k.jsx)(ke,{basename:"/Catcher",children:(0,$k.jsx)(CC,{})})})};o.createRoot(document.getElementById("root")).render((0,$k.jsx)(i.StrictMode,{children:(0,$k.jsx)(EC,{})}))})();
//# sourceMappingURL=main.40b370ef.js.map