<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase æ•¸æ“šåˆå§‹åŒ–å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 16px;
        }
        button:hover {
            background: #2563eb;
        }
        button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3b82f6;
            background: #eff6ff;
        }
        .success {
            border-left-color: #10b981;
            background: #ecfdf5;
            color: #065f46;
        }
        .error {
            border-left-color: #ef4444;
            background: #fef2f2;
            color: #991b1b;
        }
        .progress {
            background: #f3f4f6;
            border-radius: 6px;
            height: 8px;
            margin: 10px 0;
        }
        .progress-bar {
            background: #3b82f6;
            height: 100%;
            border-radius: 6px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¥ Firebase æ•¸æ“šåˆå§‹åŒ–å·¥å…·</h1>
        <p>æ­¤å·¥å…·å°‡åˆå§‹åŒ–æ‚¨çš„ Firebase Firestore æ•¸æ“šåº«ï¼ŒåŒ…å«ç¯„ä¾‹æœå‹™å’Œå‰µä½œè€…è³‡æ–™ã€‚</p>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
        
        <button onclick="initializeData()" id="initBtn">é–‹å§‹åˆå§‹åŒ–æ•¸æ“š</button>
        <button onclick="clearData()" id="clearBtn">æ¸…é™¤æ‰€æœ‰æ•¸æ“š</button>
        
        <div id="status" class="status" style="display: none;">
            æº–å‚™å°±ç·’...
        </div>
        
        <div id="log" style="margin-top: 20px; font-family: monospace; background: #1f2937; color: #e5e7eb; padding: 15px; border-radius: 6px; max-height: 400px; overflow-y: auto; display: none;">
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            deleteDoc,
            getDocs,
            serverTimestamp 
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyAZmVR8uK8qkHlnJ8FU6BFRW4V-vxXSS6I",
            authDomain: "catcher-26e1d.firebaseapp.com",
            projectId: "catcher-26e1d",
            storageBucket: "catcher-26e1d.firebasestorage.app",
            messagingSenderId: "483645051805",
            appId: "1:483645051805:web:571cfa24ef6ceba1601574"
        };

        // åˆå§‹åŒ– Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        function updateProgress(percent) {
            document.getElementById('progressBar').style.width = percent + '%';
        }

        function showStatus(message, type = 'info') {
            const statusEl = document.getElementById('status');
            statusEl.style.display = 'block';
            statusEl.textContent = message;
            statusEl.className = 'status';
            if (type === 'success') statusEl.classList.add('success');
            if (type === 'error') statusEl.classList.add('error');
        }

        function log(message) {
            const logEl = document.getElementById('log');
            logEl.style.display = 'block';
            logEl.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '\n';
            logEl.scrollTop = logEl.scrollHeight;
        }

        // ç¯„ä¾‹æœå‹™æ•¸æ“š
        const sampleServices = [
            {
                title: 'å°ˆæ¥­ç¶²é è¨­è¨ˆæœå‹™',
                description: 'æä¾›éŸ¿æ‡‰å¼ç¶²é è¨­è¨ˆï¼ŒåŒ…å« UI/UX è¨­è¨ˆå’Œå‰ç«¯é–‹ç™¼ã€‚å°ˆæ¥­åœ˜éšŠç‚ºæ‚¨æ‰“é€ ç¾ä»£åŒ–ã€ç”¨æˆ¶å‹å¥½çš„ç¶²ç«™ã€‚',
                category: 'ç¶²é è¨­è¨ˆ',
                price: 25000,
                currency: 'TWD',
                creatorId: 'creator1',
                creatorName: 'è¨­è¨ˆå¸«å°ç‹',
                creatorAvatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
                tags: ['è¨­è¨ˆ', 'UI/UX', 'é–‹ç™¼'],
                images: [
                    'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=600&fit=crop',
                    'https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&h=600&fit=crop'
                ],
                rating: 4.8,
                reviewCount: 24,
                featured: true,
                deliveryDays: 14,
                revisions: 3,
                status: 'active',
                createdAt: serverTimestamp()
            },
            {
                title: 'å“ç‰ŒLogoè¨­è¨ˆ',
                description: 'å°ˆæ¥­å“ç‰Œè­˜åˆ¥è¨­è¨ˆï¼ŒåŒ…å«Logoã€åç‰‡ã€ä¼æ¥­å½¢è±¡è¨­è¨ˆã€‚ç¨ç‰¹å‰µæ„ï¼Œå±•ç¾å“ç‰Œåƒ¹å€¼ã€‚',
                category: 'å¹³é¢è¨­è¨ˆ',
                price: 8000,
                currency: 'TWD',
                creatorId: 'creator2',
                creatorName: 'å‰µæ„å·¥ä½œå®¤',
                creatorAvatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b632?w=150&h=150&fit=crop&crop=face',
                tags: ['è¨­è¨ˆ', 'å“ç‰Œ', 'æ’ç•«'],
                images: [
                    'https://images.unsplash.com/photo-1561070791-2526d30994b5?w=800&h=600&fit=crop',
                    'https://images.unsplash.com/photo-1572044162444-ad60f128bdea?w=800&h=600&fit=crop'
                ],
                rating: 4.9,
                reviewCount: 32,
                featured: true,
                deliveryDays: 7,
                revisions: 5,
                status: 'active',
                createdAt: serverTimestamp()
            },
            {
                title: 'ç¤¾ç¾¤åª’é«”è¡ŒéŠ·ç­–ç•¥',
                description: 'æä¾›å®Œæ•´çš„ç¤¾ç¾¤åª’é«”è¡ŒéŠ·æ–¹æ¡ˆï¼ŒåŒ…å«å…§å®¹ç­–åŠƒã€å»£å‘ŠæŠ•æ”¾ã€æ•¸æ“šåˆ†æç­‰æœå‹™ã€‚',
                category: 'æ•¸ä½è¡ŒéŠ·',
                price: 15000,
                currency: 'TWD',
                creatorId: 'creator3',
                creatorName: 'è¡ŒéŠ·é”äºº',
                creatorAvatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
                tags: ['è¡ŒéŠ·', 'ç¤¾ç¾¤åª’é«”', 'SEO'],
                images: [
                    'https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=600&fit=crop'
                ],
                rating: 4.6,
                reviewCount: 18,
                featured: false,
                deliveryDays: 21,
                revisions: 2,
                status: 'active',
                createdAt: serverTimestamp()
            },
            {
                title: 'å½±ç‰‡å‰ªè¼¯èˆ‡å¾Œè£½',
                description: 'å°ˆæ¥­å½±ç‰‡å‰ªè¼¯æœå‹™ï¼ŒåŒ…å«ç‰¹æ•ˆè£½ä½œã€é…éŸ³ã€å­—å¹•ç­‰ã€‚é©ç”¨æ–¼å•†æ¥­å»£å‘Šã€æ•™å­¸å½±ç‰‡ç­‰ã€‚',
                category: 'å½±éŸ³è£½ä½œ',
                price: 12000,
                currency: 'TWD',
                creatorId: 'creator4',
                creatorName: 'å½±åƒå·¥ä½œå®¤',
                creatorAvatar: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=150&h=150&fit=crop&crop=face',
                tags: ['å½±ç‰‡', 'å‰ªè¼¯', 'ç‰¹æ•ˆ'],
                images: [
                    'https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=800&h=600&fit=crop'
                ],
                rating: 4.7,
                reviewCount: 15,
                featured: true,
                deliveryDays: 10,
                revisions: 3,
                status: 'active',
                createdAt: serverTimestamp()
            },
            {
                title: 'é›»å•†ç¶²ç«™é–‹ç™¼',
                description: 'æ‰“é€ å°ˆæ¥­é›»å•†å¹³å°ï¼Œæ”¯æ´é‡‘æµã€ç‰©æµæ•´åˆï¼ŒRWDéŸ¿æ‡‰å¼è¨­è¨ˆï¼ŒåŠ©æ‚¨é–‹å±•ç·šä¸Šäº‹æ¥­ã€‚',
                category: 'ç¶²é è¨­è¨ˆ',
                price: 45000,
                currency: 'TWD',
                creatorId: 'creator5',
                creatorName: 'ç¶²ç«™é–‹ç™¼åœ˜éšŠ',
                creatorAvatar: 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=150&h=150&fit=crop&crop=face',
                tags: ['é›»å•†', 'é–‹ç™¼', 'é‡‘æµ'],
                images: [
                    'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop'
                ],
                rating: 4.9,
                reviewCount: 28,
                featured: true,
                deliveryDays: 30,
                revisions: 5,
                status: 'active',
                createdAt: serverTimestamp()
            },
            {
                title: 'SEOç¶²ç«™å„ªåŒ–',
                description: 'æå‡ç¶²ç«™æœå°‹å¼•æ“æ’åï¼ŒåŒ…å«é—œéµå­—åˆ†æã€å…§å®¹å„ªåŒ–ã€æŠ€è¡“SEOç­‰å®Œæ•´æœå‹™ã€‚',
                category: 'æ•¸ä½è¡ŒéŠ·',
                price: 20000,
                currency: 'TWD',
                creatorId: 'creator6',
                creatorName: 'SEOå°ˆå®¶',
                creatorAvatar: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=150&h=150&fit=crop&crop=face',
                tags: ['SEO', 'å„ªåŒ–', 'åˆ†æ'],
                images: [
                    'https://images.unsplash.com/photo-1432888622747-4eb9a8efeb07?w=800&h=600&fit=crop'
                ],
                rating: 4.5,
                reviewCount: 22,
                featured: false,
                deliveryDays: 14,
                revisions: 3,
                status: 'active',
                createdAt: serverTimestamp()
            }
        ];

        // å…¨åŸŸå‡½æ•¸
        window.initializeData = async function() {
            const initBtn = document.getElementById('initBtn');
            const clearBtn = document.getElementById('clearBtn');
            
            initBtn.disabled = true;
            clearBtn.disabled = true;
            
            try {
                showStatus('é–‹å§‹åˆå§‹åŒ–æ•¸æ“š...', 'info');
                log('é–‹å§‹ Firebase æ•¸æ“šåˆå§‹åŒ–ç¨‹åº');
                updateProgress(10);

                // åˆå§‹åŒ–æœå‹™
                log('æ­£åœ¨æ·»åŠ ç¯„ä¾‹æœå‹™...');
                for (let i = 0; i < sampleServices.length; i++) {
                    const service = sampleServices[i];
                    await addDoc(collection(db, 'services'), service);
                    log(`âœ“ å·²æ·»åŠ æœå‹™: ${service.title}`);
                    updateProgress(20 + (i / sampleServices.length) * 60);
                }

                // åˆå§‹åŒ–å‰µä½œè€…
                log('æ­£åœ¨æ·»åŠ å‰µä½œè€…è³‡æ–™...');
                const creators = [
                    {
                        id: 'creator1',
                        name: 'è¨­è¨ˆå¸«å°ç‹',
                        avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
                        bio: 'æ“æœ‰8å¹´ç¶²é è¨­è¨ˆç¶“é©—çš„å°ˆæ¥­è¨­è¨ˆå¸«',
                        specialties: ['UI/UXè¨­è¨ˆ', 'å‰ç«¯é–‹ç™¼', 'éŸ¿æ‡‰å¼è¨­è¨ˆ'],
                        rating: 4.8,
                        completedOrders: 156,
                        memberSince: new Date('2019-03-15'),
                        verified: true,
                        createdAt: serverTimestamp()
                    },
                    {
                        id: 'creator2',
                        name: 'å‰µæ„å·¥ä½œå®¤',
                        avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b632?w=150&h=150&fit=crop&crop=face',
                        bio: 'å°ˆç²¾å“ç‰Œè¨­è¨ˆçš„å‰µæ„åœ˜éšŠ',
                        specialties: ['å“ç‰Œè¨­è¨ˆ', 'Logoè¨­è¨ˆ', 'å¹³é¢è¨­è¨ˆ'],
                        rating: 4.9,
                        completedOrders: 89,
                        memberSince: new Date('2020-01-10'),
                        verified: true,
                        createdAt: serverTimestamp()
                    }
                ];

                for (let creator of creators) {
                    await addDoc(collection(db, 'creators'), creator);
                    log(`âœ“ å·²æ·»åŠ å‰µä½œè€…: ${creator.name}`);
                }

                updateProgress(100);
                showStatus('âœ… æ•¸æ“šåˆå§‹åŒ–å®Œæˆï¼', 'success');
                log('ğŸ‰ æ‰€æœ‰æ•¸æ“šåˆå§‹åŒ–å®Œæˆ');
                
            } catch (error) {
                console.error('åˆå§‹åŒ–éŒ¯èª¤:', error);
                showStatus('âŒ åˆå§‹åŒ–å¤±æ•—: ' + error.message, 'error');
                log('âŒ éŒ¯èª¤: ' + error.message);
            } finally {
                initBtn.disabled = false;
                clearBtn.disabled = false;
            }
        };

        window.clearData = async function() {
            if (!confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰æ•¸æ“šå—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚')) {
                return;
            }

            const initBtn = document.getElementById('initBtn');
            const clearBtn = document.getElementById('clearBtn');
            
            initBtn.disabled = true;
            clearBtn.disabled = true;
            
            try {
                showStatus('æ­£åœ¨æ¸…é™¤æ•¸æ“š...', 'info');
                log('é–‹å§‹æ¸…é™¤æ‰€æœ‰æ•¸æ“š');
                updateProgress(20);

                // æ¸…é™¤æœå‹™
                const servicesSnapshot = await getDocs(collection(db, 'services'));
                for (let doc of servicesSnapshot.docs) {
                    await deleteDoc(doc.ref);
                }
                log('âœ“ å·²æ¸…é™¤æ‰€æœ‰æœå‹™');
                updateProgress(60);

                // æ¸…é™¤å‰µä½œè€…
                const creatorsSnapshot = await getDocs(collection(db, 'creators'));
                for (let doc of creatorsSnapshot.docs) {
                    await deleteDoc(doc.ref);
                }
                log('âœ“ å·²æ¸…é™¤æ‰€æœ‰å‰µä½œè€…');
                updateProgress(100);

                showStatus('âœ… æ•¸æ“šæ¸…é™¤å®Œæˆï¼', 'success');
                log('ğŸ—‘ï¸ æ‰€æœ‰æ•¸æ“šå·²æ¸…é™¤');
                
            } catch (error) {
                console.error('æ¸…é™¤éŒ¯èª¤:', error);
                showStatus('âŒ æ¸…é™¤å¤±æ•—: ' + error.message, 'error');
                log('âŒ éŒ¯èª¤: ' + error.message);
            } finally {
                initBtn.disabled = false;
                clearBtn.disabled = false;
            }
        };
    </script>
</body>
</html>
